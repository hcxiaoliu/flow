!function(e){function t(t){for(var i,a,o=t[0],l=t[1],p=t[2],c=0,u=[];c<o.length;c++)a=o[c],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&u.push(s[a][0]),s[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(m&&m(t);u.length;)u.shift()();return r.push.apply(r,p||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},s={app:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/flow-bpmn/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var p=0;p<o.length;p++)t(o[p]);var m=l;r.push([0,"chunk-vendors"]),n()}({0:function(e,t,n){e.exports=n("56d7")},"021d":function(e,t,n){"use strict";n("4b4c")},"09c5":function(e,t,n){"use strict";n("45fc"),n("b0c0"),n("ac1f"),n("5319");var i=n("87f2").some,s={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function r(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}function a(e,t){return(n=e)&&n.length&&i(e,(function(e){return r(e,t)}));var n}function o(e,t,n){var a=t.name,o=s[a.replace(/activiti:/,"")];return a===e&&function(e,t){return i(t,(function(t){return r(e,t)}))}(n,o)}function l(e){e.on("property.clone",(function(e){var t=e.newElement,n=e.propertyDescriptor;this.canCloneProperty(t,n)}),this)}l.$inject=["eventBus"],l.prototype.canCloneProperty=function(e,t){return o("activiti:FailedJobRetryTimeCycle",t,e)?a(e.eventDefinitions,"bpmn:TimerEventDefinition")||a(e.eventDefinitions,"bpmn:SignalEventDefinition")||r(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):o("activiti:Connector",t,e)||o("activiti:Field",t,e)?a(e.eventDefinitions,"bpmn:MessageEventDefinition"):void 0},e.exports=l},"0c27":function(e,t,n){"use strict";n("c20b")},"0f1c":function(e,t,n){e.exports={__init__:["ActivitiModdleExtension"],ActivitiModdleExtension:["type",n("e137")]}},1:function(e,t){},1319:function(e,t,n){"use strict";n("45fc"),n("b0c0"),n("ac1f"),n("5319");var i=n("87f2").some,s={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function r(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}function a(e,t){return(n=e)&&n.length&&i(e,(function(e){return r(e,t)}));var n}function o(e,t,n){var a=t.name,o=s[a.replace(/flowable:/,"")];return a===e&&function(e,t){return i(t,(function(t){return r(e,t)}))}(n,o)}function l(e){e.on("property.clone",(function(e){var t=e.newElement,n=e.propertyDescriptor;this.canCloneProperty(t,n)}),this)}l.$inject=["eventBus"],l.prototype.canCloneProperty=function(e,t){return o("flowable:FailedJobRetryTimeCycle",t,e)?a(e.eventDefinitions,"bpmn:TimerEventDefinition")||a(e.eventDefinitions,"bpmn:SignalEventDefinition")||r(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):o("flowable:Connector",t,e)||o("flowable:Field",t,e)?a(e.eventDefinitions,"bpmn:MessageEventDefinition"):void 0},e.exports=l},"16a2":function(e,t,n){"use strict";n("fe7c")},"16c4":function(e,t){e.exports=BpmnJS},"188b":function(e){e.exports=JSON.parse('{"name":"Flowable","uri":"http://flowable.org/bpmn","prefix":"flowable","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","flowable:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"flowable:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"xcField","isAbstract":true,"properties":[{"name":"xcString","isMany":true,"type":"Element"},{"name":"name","isAttr":true,"type":"String"}]},{"name":"xcString","isAbstract":true,"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"xcformKey","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"assigneeType","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"},{"name":"inheritVariables","isAttr":true,"type":"Boolean"},{"name":"processInstanceName","isAttr":true,"type":"String"},{"name":"calledElementType","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["flowable:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","flowable:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","flowable:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike","flowable:ExecutionListener","flowable:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["flowable:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["flowable:UserTask","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"AssigneeType","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IdmCandidateUsers","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IdmCandidateGroups","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IdmAssignee","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"NodeType","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IsEditdata","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"initiator-can-complete","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask","flowable:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ModelBpmnExtension","superClass":["Element"],"meta":{"allowedIn":["bpmn:CallActivity"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]},{"name":"SkipExpression","isAbstract":true,"extends":["bpmn:SequenceFlow","bpmn:UserTask"],"properties":[{"name":"skipExpression","prefix":"","isAttr":true,"type":"String"}]}],"emumerations":[]}')},"199c":function(e,t){},2:function(e,t){},"215a":function(e,t,n){"use strict";n("c975"),n("45fc");var i=n("87f2").isFunction,s=n("87f2").isObject,r=n("87f2").some;function a(e){var t=this;e.on("moddleCopy.canCopyProperty",(function(e){var n=e.property,i=e.parent;return t.canCopyProperty(n,i)}))}function o(e,t){return e&&i(e.$instanceOf)&&e.$instanceOf(t)}function l(e,t){return r(t,(function(t){return o(e,t)}))}function p(e,t){return t?o(e,t)?e:e.$parent?p(e.$parent,t):void 0:e.$parent}a.$inject=["eventBus"],a.prototype.canCopyProperty=function(e,t){return!(s(e)&&!function(e,t){var n=e.$type&&e.$model.getTypeDescriptor(e.$type),i=n&&n.meta&&n.meta.allowedIn;return!(i&&!function(e){return-1!==e.indexOf("*")}(i))||r(i,(function(e){return p(t,e)}))}(e,t))&&!(o(e,"camunda:InputOutput")&&!this.canHostInputOutput(t))&&!(l(e,["camunda:Connector","camunda:Field"])&&!this.canHostConnector(t))&&!(o(e,"camunda:In")&&!this.canHostIn(t))&&void 0},a.prototype.canHostInputOutput=function(e){if(p(e,"camunda:Connector"))return!0;var t=p(e,"bpmn:FlowNode");return!!t&&!l(t,["bpmn:StartEvent","bpmn:Gateway","bpmn:BoundaryEvent"])&&(!o(t,"bpmn:SubProcess")||!t.get("triggeredByEvent"))},a.prototype.canHostConnector=function(e){return!o(p(e,"camunda:ServiceTaskLike"),"bpmn:MessageEventDefinition")||p(e,"bpmn:IntermediateThrowEvent")||p(e,"bpmn:EndEvent")},a.prototype.canHostIn=function(e){return!!p(e,"bpmn:CallActivity")||!p(e,"bpmn:SignalEventDefinition")||p(e,"bpmn:IntermediateThrowEvent")||p(e,"bpmn:EndEvent")},e.exports=a},"23be":function(e,t,n){"use strict";var i=n("199c"),s=n.n(i);t.default=s.a},2759:function(e,t,n){"use strict";n("6c26")},3150:function(e,t,n){},"3c78":function(e,t,n){},"3dfd":function(e,t,n){"use strict";var i=n("61b4"),s=n("23be"),r=(n("5c0b"),n("2877")),a=Object(r.a)(s.default,i.a,i.b,!1,null,null,null);t.default=a.exports},4030:function(e,t,n){},"49b1":function(e,t,n){"use strict";n("c60e")},"4b4c":function(e,t,n){},"4b97":function(e,t,n){e.exports={__init__:["FlowableModdleExtension"],FlowableModdleExtension:["type",n("1319")]}},"4c0a":function(e,t,n){},"4c56":function(e,t,n){var i=n("1020");i.registerLanguage("xml",n("8dcb")),i.registerLanguage("json",n("5ad2")),e.exports=i},"4e7b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t),n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("8bbf"),s=n.n(i),r=n("3dfd"),a=(n("d3b7"),n("bc3a")),o=n.n(a);o.a.defaults.baseURL="/dragon-api",o.a.defaults.timeout=1e5,o.a.defaults.withCredentials=!0,o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",o.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",o.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.a.interceptors.response.use((function(e){if(200!=e.status)return Promise.reject(e.data);var t=e.data.code;return e.data.msg,"100"===t?Promise.resolve(e.data):400!=t?Promise.reject(e.data):void 0}),(function(e){if(!e.response)return Promise.reject(e)}));var l=o.a,p=n("5f72"),m=n.n(p),c=(n("4c0a"),n("4c56")),u=(n("9123"),n("4160"),n("b0c0"),n("159b"),n("5530")),d=(n("99af"),n("c975"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),b=n("2909"),f=n("16c4"),h=n.n(f),g=function(e,t,n){return n||(n="flowable"),'<?xml version="1.0" encoding="UTF-8"?>\n<bpmn2:definitions \n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"\n  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"\n  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"\n  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"\n  xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"\n  id="diagram_'.concat(e,'"\n  targetNamespace="').concat({activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n],'">\n  <bpmn2:process id="').concat(e,'" name="').concat(t,'" isExecutable="true">\n  </bpmn2:process>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(e,'">\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn2:definitions>')};function y(e){return function(t,n){return n=n||{},(t=e[t]||t).replace(/{([^}]+)}/g,(function(t,i){var s=n[i];return null!==e[n[i]]&&void 0!==e[n[i]]&&(s=e[n[i]]),s||"{"+i+"}"}))}}var v={"Append EndEvent":"追加结束事件","Append Gateway":"追加网关","Append Task":"追加任务","Append Intermediate/Boundary Event":"追加中间抛出事件/边界事件","Activate the global connect tool":"激活全局连接工具","Append {type}":"添加 {type}","Add Lane above":"在上面添加道","Divide into two Lanes":"分割成两个道","Divide into three Lanes":"分割成三个道","Add Lane below":"在下面添加道","Append compensation activity":"追加补偿活动","Change type":"修改类型","Connect using Association":"使用关联连接","Connect using Sequence/MessageFlow or Association":"使用顺序/消息流或者关联连接","Connect using DataInputAssociation":"使用数据输入关联连接",Remove:"移除","Activate the hand tool":"激活抓手工具","Activate the lasso tool":"激活套索工具","Activate the create/remove space tool":"激活创建/删除空间工具","Create expanded SubProcess":"创建展开子流程","Create IntermediateThrowEvent/BoundaryEvent":"创建中间抛出事件/边界事件","Create Pool/Participant":"创建泳池/泳道","Parallel Multi Instance":"并行多实例","Sequential Multi Instance":"串行多实例",DataObjectReference:"数据对象参考",DataStoreReference:"数据存储参考",Loop:"循环","Ad-hoc":"即席","Create {type}":"创建 {type}",Task:"任务","Send Task":"发送任务","Receive Task":"接收任务","User Task":"用户任务","Manual Task":"手工任务","Business Rule Task":"业务规则任务","Service Task":"服务任务","Script Task":"脚本任务","Call Activity":"调用活动","Sub Process (collapsed)":"子流程（折叠的）","Sub Process (expanded)":"子流程（展开的）","Start Event":"开始事件",StartEvent:"开始事件","Intermediate Throw Event":"中间事件","End Event":"结束事件",EndEvent:"结束事件","Create StartEvent":"创建开始事件","Create EndEvent":"创建结束事件","Create Task":"创建任务","Create User Task":"创建用户任务","Create Gateway":"创建网关","Create DataObjectReference":"创建数据对象","Create DataStoreReference":"创建数据存储","Create Group":"创建分组","Create Intermediate/Boundary Event":"创建中间/边界事件","Message Start Event":"消息开始事件","Timer Start Event":"定时开始事件","Conditional Start Event":"条件开始事件","Signal Start Event":"信号开始事件","Error Start Event":"错误开始事件","Escalation Start Event":"升级开始事件","Compensation Start Event":"补偿开始事件","Message Start Event (non-interrupting)":"消息开始事件（非中断）","Timer Start Event (non-interrupting)":"定时开始事件（非中断）","Conditional Start Event (non-interrupting)":"条件开始事件（非中断）","Signal Start Event (non-interrupting)":"信号开始事件（非中断）","Escalation Start Event (non-interrupting)":"升级开始事件（非中断）","Message Intermediate Catch Event":"消息中间捕获事件","Message Intermediate Throw Event":"消息中间抛出事件","Timer Intermediate Catch Event":"定时中间捕获事件","Escalation Intermediate Throw Event":"升级中间抛出事件","Conditional Intermediate Catch Event":"条件中间捕获事件","Link Intermediate Catch Event":"链接中间捕获事件","Link Intermediate Throw Event":"链接中间抛出事件","Compensation Intermediate Throw Event":"补偿中间抛出事件","Signal Intermediate Catch Event":"信号中间捕获事件","Signal Intermediate Throw Event":"信号中间抛出事件","Message End Event":"消息结束事件","Escalation End Event":"定时结束事件","Error End Event":"错误结束事件","Cancel End Event":"取消结束事件","Compensation End Event":"补偿结束事件","Signal End Event":"信号结束事件","Terminate End Event":"终止结束事件","Message Boundary Event":"消息边界事件","Message Boundary Event (non-interrupting)":"消息边界事件（非中断）","Timer Boundary Event":"定时边界事件","Timer Boundary Event (non-interrupting)":"定时边界事件（非中断）","Escalation Boundary Event":"升级边界事件","Escalation Boundary Event (non-interrupting)":"升级边界事件（非中断）","Conditional Boundary Event":"条件边界事件","Conditional Boundary Event (non-interrupting)":"条件边界事件（非中断）","Error Boundary Event":"错误边界事件","Cancel Boundary Event":"取消边界事件","Signal Boundary Event":"信号边界事件","Signal Boundary Event (non-interrupting)":"信号边界事件（非中断）","Compensation Boundary Event":"补偿边界事件","Exclusive Gateway":"互斥网关","Parallel Gateway":"并行网关","Inclusive Gateway":"相容网关","Complex Gateway":"复杂网关","Event based Gateway":"事件网关",Transaction:"转运","Sub Process":"子流程","Event Sub Process":"事件子流程","Collapsed Pool":"折叠池","Expanded Pool":"展开池","no parent for {element} in {parent}":"在{parent}里，{element}没有父类","no shape type specified":"没有指定的形状类型","flow elements must be children of pools/participants":"流元素必须是池/参与者的子类","out of bounds release":"out of bounds release","more than {count} child lanes":"子道大于{count} ","element required":"元素不能为空","diagram not part of bpmn:Definitions":"流程图不符合bpmn规范","no diagram to display":"没有可展示的流程图","no process or collaboration to display":"没有可展示的流程/协作","element {element} referenced by {referenced}#{property} not yet drawn":"由{referenced}#{property}引用的{element}元素仍未绘制","already rendered {element}":"{element} 已被渲染","failed to import {element}":"导入{element}失败",Id:"编号",Name:"名称",General:"常规",Details:"详情","Message Name":"消息名称",Message:"消息",Initiator:"创建者","Asynchronous Continuations":"持续异步","Asynchronous Before":"异步前","Asynchronous After":"异步后","Job Configuration":"工作配置",Exclusive:"排除","Job Priority":"工作优先级","Retry Time Cycle":"重试时间周期",Documentation:"文档","Element Documentation":"元素文档","History Configuration":"历史配置","History Time To Live":"历史的生存时间",Forms:"表单","Form Key":"表单key","Form Fields":"表单字段","Business Key":"业务key","Form Field":"表单字段",ID:"编号",Type:"类型",Label:"名称","Default Value":"默认值","Default Flow":"默认流转路径","Conditional Flow":"条件流转路径","Sequence Flow":"普通流转路径",Validation:"校验","Add Constraint":"添加约束",Config:"配置",Properties:"属性","Add Property":"添加属性",Value:"值",Listeners:"监听器","Execution Listener":"执行监听","Event Type":"事件类型","Listener Type":"监听器类型","Java Class":"Java类",Expression:"表达式","Must provide a value":"必须提供一个值","Delegate Expression":"代理表达式",Script:"脚本","Script Format":"脚本格式","Script Type":"脚本类型","Inline Script":"内联脚本","External Script":"外部脚本",Resource:"资源","Field Injection":"字段注入",Extensions:"扩展","Input/Output":"输入/输出","Input Parameters":"输入参数","Output Parameters":"输出参数",Parameters:"参数","Output Parameter":"输出参数","Timer Definition Type":"定时器定义类型","Timer Definition":"定时器定义",Date:"日期",Duration:"持续",Cycle:"循环",Signal:"信号","Signal Name":"信号名称",Escalation:"升级",Error:"错误","Link Name":"链接名称",Condition:"条件名称","Variable Name":"变量名称","Variable Event":"变量事件","Specify more than one variable change event as a comma separated list.":"多个变量事件以逗号隔开","Wait for Completion":"等待完成","Activity Ref":"活动参考","Version Tag":"版本标签",Executable:"可执行文件","External Task Configuration":"扩展任务配置","Task Priority":"任务优先级",External:"外部",Connector:"连接器","Must configure Connector":"必须配置连接器","Connector Id":"连接器编号",Implementation:"实现方式","Field Injections":"字段注入",Fields:"字段","Result Variable":"结果变量",Topic:"主题","Configure Connector":"配置连接器","Input Parameter":"输入参数",Assignee:"代理人","Candidate Users":"候选用户","Candidate Groups":"候选组","Due Date":"到期时间","Follow Up Date":"跟踪日期",Priority:"优先级","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00",Variables:"变量","Candidate Starter Configuration":"候选人起动器配置","Candidate Starter Groups":"候选人起动器组","This maps to the process definition key.":"这映射到流程定义键。","Candidate Starter Users":"候选人起动器的用户","Specify more than one user as a comma separated list.":"指定多个用户作为逗号分隔的列表。","Tasklist Configuration":"Tasklist配置",Startable:"启动","Specify more than one group as a comma separated list.":"指定多个组作为逗号分隔的列表。"},E=n("3bf7"),x=n.n(E),S=n("8ff4"),w=n("6584"),T=n("78e6"),k=n("94c0"),F=n.n(k),A=n("e15b"),C=n.n(A),I=n("a674"),D=n.n(I),L=n("c51a"),O=n.n(L),_={name:"MyProcessDesigner",componentName:"MyProcessDesigner",props:{value:String,processId:String,processName:String,translations:Object,additionalModel:[Object,Array],moddleExtension:Object,onlyCustomizeAddi:{type:Boolean,default:!1},onlyCustomizeModdle:{type:Boolean,default:!1},simulation:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},prefix:{type:String,default:"camunda"},events:{type:Array,default:function(){return["element.click"]}},headerButtonSize:{type:String,default:"small",validator:function(e){return-1!==["default","medium","small","mini"].indexOf(e)}},headerButtonType:{type:String,default:"primary",validator:function(e){return-1!==["default","primary","success","warning","danger","info"].indexOf(e)}}},data:function(){return{defaultZoom:1,previewModelVisible:!1,simulationStatus:!1,previewResult:"",previewType:"xml",recoverable:!1,revocable:!1}},computed:{additionalModules:function(){var e=[];if(this.onlyCustomizeAddi)return"[object Array]"===Object.prototype.toString.call(this.additionalModel)?this.additionalModel||[]:[this.additionalModel];"[object Array]"===Object.prototype.toString.call(this.additionalModel)?e.push.apply(e,Object(b.a)(this.additionalModel)):this.additionalModel&&e.push(this.additionalModel);var t={translate:["value",y(this.translations||v)]};return e.push(t),this.simulation&&e.push(x.a),"camunda"===this.prefix&&e.push(F.a),"flowable"===this.prefix&&e.push(D.a),"activiti"===this.prefix&&e.push(C.a),e},moddleExtensions:function(){var e={};if(this.onlyCustomizeModdle)return this.moddleExtension||null;if(this.moddleExtension)for(var t in this.moddleExtension)e[t]=this.moddleExtension[t];return"activiti"===this.prefix&&(e.activiti=w),"flowable"===this.prefix&&(e.flowable=T),"camunda"===this.prefix&&(e.camunda=S),e}},mounted:function(){var e=this;this.initBpmnModeler(),this.createNewDiagram(this.value),this.$once("hook:beforeDestroy",(function(){e.bpmnModeler&&e.bpmnModeler.destroy(),e.$emit("destroy",e.bpmnModeler),e.bpmnModeler=null}))},methods:{initBpmnModeler:function(){this.bpmnModeler||(this.bpmnModeler=new h.a({container:this.$refs["bpmn-canvas"],keyboard:this.keyboard?{bindTo:document}:null,additionalModules:this.additionalModules,moddleExtensions:this.moddleExtensions}),this.$emit("init-finished",this.bpmnModeler),this.initModelListeners())},initModelListeners:function(){var e=this,t=this.bpmnModeler.get("eventBus"),n=this;this.events.forEach((function(e){t.on(e,(function(t){var i=e.replace(/\./g,"-"),s=t?t.element:null;n.$emit(i,s,t)}))})),t.on("commandStack.changed",function(){var t=Object(d.a)(regeneratorRuntime.mark((function t(n){var i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.recoverable=e.bpmnModeler.get("commandStack").canRedo(),e.revocable=e.bpmnModeler.get("commandStack").canUndo(),t.next=5,e.bpmnModeler.saveXML({format:!0});case 5:i=t.sent,s=i.xml,e.$emit("commandStack-changed",n),e.$emit("input",s),e.$emit("change",s),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),console.error("[Process Designer Warn]: ".concat(t.t0.message||t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()),this.bpmnModeler.on("canvas.viewbox.changed",(function(t){var n=t.viewbox;e.$emit("canvas-viewbox-changed",{viewbox:n});var i=n.scale;e.defaultZoom=Math.floor(100*i)/100}))},createNewDiagram:function(e){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var i,s,r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t.processId),i=t.processId||"Process_".concat((new Date).getTime()),s=t.processName||"业务流程_".concat((new Date).getTime()),r=e||g(i,s,t.prefix),n.prev=4,n.next=7,t.bpmnModeler.importXML(r);case 7:a=n.sent,(o=a.warnings)&&o.length&&o.forEach((function(e){return console.warn(e)})),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.error("[Process Designer Warn]: ".concat(n.t0.message||n.t0));case 15:case"end":return n.stop()}}),n,null,[[4,12]])})))()},downloadProcess:function(e,t){var n=this;return Object(d.a)(regeneratorRuntime.mark((function i(){var s,r,a,o,l,p,m,c,u,d,b,f,h,g;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(g=function(e,t){if(e&&t){var n=document.createElement("a");n.download=t,n.href=e,n.click(),URL.revokeObjectURL(n.href)}},i.prev=1,s=n,"xml"!==e&&"bpmn"!==e){i.next=14;break}return i.next=6,n.bpmnModeler.saveXML();case 6:r=i.sent,a=r.err,o=r.xml,a&&console.error("[Process Designer Warn ]: ".concat(a.message||a)),l=s.setEncoded(e.toUpperCase(),t,o),p=l.href,m=l.filename,g(p,m),i.next=23;break;case 14:return i.next=16,n.bpmnModeler.saveSVG();case 16:if(c=i.sent,u=c.err,d=c.svg,!u){i.next=21;break}return i.abrupt("return",console.error(u));case 21:b=s.setEncoded("SVG",t,d),f=b.href,h=b.filename,g(f,h);case 23:i.next=28;break;case 25:i.prev=25,i.t0=i.catch(1),console.error("[Process Designer Warn ]: ".concat(i.t0.message||i.t0));case 28:case"end":return i.stop()}}),i,null,[[1,25]])})))()},setEncoded:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"diagram",n=arguments.length>2?arguments[2]:void 0,i=encodeURIComponent(n);return{filename:"".concat(t,".").concat(e),href:"data:application/".concat("svg"===e?"text/xml":"bpmn20-xml",";charset=UTF-8,").concat(i),data:n}},importLocalFile:function(){var e=this,t=this.$refs.refFile.files[0],n=new FileReader;n.readAsText(t),n.onload=function(){var t=this.result;e.createNewDiagram(t)}},downloadProcessAsXml:function(){this.downloadProcess("xml")},downloadProcessAsBpmn:function(){this.downloadProcess("bpmn")},downloadProcessAsSvg:function(){this.downloadProcess("svg")},saveProcessAsBpmn:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var n,i,s,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.next=3,e.bpmnModeler.saveXML();case 3:i=t.sent,i.err,s=i.xml,r=e.$route.query.modelId,a={modelId:r,modelXml:s},e.$axios({method:"POST",url:"/flow/flowable/bpmn/saveBpmnModel",data:a}).then((function(t){e.$message.success("保存成功！")})).catch((function(t){e.$message.error(t.msg)})).finally((function(){n.close()}));case 9:case"end":return t.stop()}}),t)})))()},processSimulation:function(){this.simulationStatus=!this.simulationStatus,this.simulation&&this.bpmnModeler.get("toggleMode").toggleMode()},processRedo:function(){this.bpmnModeler.get("commandStack").redo()},processUndo:function(){this.bpmnModeler.get("commandStack").undo()},processZoomIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom+100*e)/100;if(t>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");this.defaultZoom=t,this.bpmnModeler.get("canvas").zoom(this.defaultZoom)},processZoomOut:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom-100*e)/100;if(t<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");this.defaultZoom=t,this.bpmnModeler.get("canvas").zoom(this.defaultZoom)},processZoomTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");if(e>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");this.defaultZoom=e,this.bpmnModeler.get("canvas").zoom(e)},processReZoom:function(){this.defaultZoom=1,this.bpmnModeler.get("canvas").zoom("fit-viewport","auto")},processRestart:function(){var e=this;this.recoverable=!1,this.revocable=!1,this.createNewDiagram(null).then((function(){return e.bpmnModeler.get("canvas").zoom(1,"auto")}))},elementsAlign:function(e){var t=this.bpmnModeler.get("alignElements"),n=this.bpmnModeler.get("selection").get();!n||n.length<=1?this.$message.warning("请按住 Ctrl 键选择多个元素对齐"):this.$confirm("自动对齐可能造成图形变形，是否继续？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.trigger(n,e)}))},previewProcessXML:function(){var e=this;this.bpmnModeler.saveXML({format:!0}).then((function(t){var n=t.xml;e.previewResult=n,e.previewType="xml",e.previewModelVisible=!0}))},previewProcessJson:function(){var e=this;this.bpmnModeler.saveXML({format:!0}).then((function(t){var n=t.xml;e.previewResult=O.a.xml2json(n,{spaces:2}),e.previewType="json",e.previewModelVisible=!0}))}}},M=n("2877"),P=Object(M.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-process-designer"},[n("div",{staticClass:"my-process-designer__header"},[e._t("control-header"),e.$slots["control-header"]?e._e():[n("el-button-group",{key:"file-control"},[n("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-folder-opened"},on:{click:function(t){return e.$refs.refFile.click()}}},[e._v("打开文件")]),n("el-tooltip",{attrs:{effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:function(t){return e.downloadProcessAsXml()}}},[e._v("下载为XML文件")]),n("br"),n("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:function(t){return e.downloadProcessAsSvg()}}},[e._v("下载为SVG文件")]),n("br"),n("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:function(t){return e.downloadProcessAsBpmn()}}},[e._v("下载为BPMN文件")])],1),n("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-download"}},[e._v("下载文件")])],1),n("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-save"},on:{click:function(t){return e.saveProcessAsBpmn()}}},[e._v("保存")]),n("el-tooltip",{attrs:{effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:e.previewProcessXML}},[e._v("预览XML")]),n("br"),n("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:e.previewProcessJson}},[e._v("预览JSON")])],1),n("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-view"}},[e._v("预览")])],1),e.simulation?n("el-tooltip",{attrs:{effect:"light",content:this.simulationStatus?"退出模拟":"开启模拟"}},[n("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-cpu"},on:{click:e.processSimulation}},[e._v(" 模拟 ")])],1):e._e()],1),n("el-button-group",{key:"align-control"},[n("el-tooltip",{attrs:{effect:"light",content:"向左对齐"}},[n("el-button",{staticClass:"align align-left",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("left")}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"向右对齐"}},[n("el-button",{staticClass:"align align-right",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("right")}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"向上对齐"}},[n("el-button",{staticClass:"align align-top",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("top")}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"向下对齐"}},[n("el-button",{staticClass:"align align-bottom",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("bottom")}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"水平居中"}},[n("el-button",{staticClass:"align align-center",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("center")}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"垂直居中"}},[n("el-button",{staticClass:"align align-middle",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("middle")}}})],1)],1),n("el-button-group",{key:"scale-control"},[n("el-tooltip",{attrs:{effect:"light",content:"缩小视图"}},[n("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom<.2,icon:"el-icon-zoom-out"},on:{click:function(t){return e.processZoomOut()}}})],1),n("el-button",{attrs:{size:e.headerButtonSize}},[e._v(e._s(Math.floor(10*this.defaultZoom*10)+"%"))]),n("el-tooltip",{attrs:{effect:"light",content:"放大视图"}},[n("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom>4,icon:"el-icon-zoom-in"},on:{click:function(t){return e.processZoomIn()}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"重置视图并居中"}},[n("el-button",{attrs:{size:e.headerButtonSize,icon:"el-icon-c-scale-to-original"},on:{click:function(t){return e.processReZoom()}}})],1)],1),n("el-button-group",{key:"stack-control"},[n("el-tooltip",{attrs:{effect:"light",content:"撤销"}},[n("el-button",{attrs:{size:e.headerButtonSize,disabled:!e.revocable,icon:"el-icon-refresh-left"},on:{click:function(t){return e.processUndo()}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"恢复"}},[n("el-button",{attrs:{size:e.headerButtonSize,disabled:!e.recoverable,icon:"el-icon-refresh-right"},on:{click:function(t){return e.processRedo()}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"重新绘制"}},[n("el-button",{attrs:{size:e.headerButtonSize,icon:"el-icon-refresh"},on:{click:e.processRestart}})],1)],1)],n("input",{ref:"refFile",staticStyle:{display:"none"},attrs:{type:"file",id:"files",accept:".xml, .bpmn"},on:{change:e.importLocalFile}})],2),n("div",{staticClass:"my-process-designer__container"},[n("div",{ref:"bpmn-canvas",staticClass:"my-process-designer__canvas"})]),n("el-dialog",{attrs:{title:"预览",width:"60%",visible:e.previewModelVisible,"append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.previewModelVisible=t}}},[n("highlightjs",{attrs:{language:e.previewType,code:e.previewResult}})],1)],1)}),[],!1,null,null,null).exports;P.install=function(e){e.component(P.name,P)};var B=P,$=(n("1276"),n("88eb")),V=function(e,t,n){return n||(n="flowable"),'<?xml version="1.0" encoding="UTF-8"?>\n<bpmn2:definitions \n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"\n  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"\n  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"\n  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"\n  xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"\n  id="diagram_'.concat(e,'"\n  targetNamespace="').concat({activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n],'">\n  <bpmn2:process id="').concat(e,'" name="').concat(t,'" isExecutable="true">\n  </bpmn2:process>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(e,'">\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn2:definitions>')};function j(e){return function(t,n){return n=n||{},(t=e[t]||t).replace(/{([^}]+)}/g,(function(t,i){var s=n[i];return null!==e[n[i]]&&void 0!==e[n[i]]&&(s=e[n[i]]),s||"{"+i+"}"}))}}var R,N,z,U={"Append EndEvent":"追加结束事件","Append Gateway":"追加网关","Append Task":"追加任务","Append Intermediate/Boundary Event":"追加中间抛出事件/边界事件","Activate the global connect tool":"激活全局连接工具","Append {type}":"添加 {type}","Add Lane above":"在上面添加道","Divide into two Lanes":"分割成两个道","Divide into three Lanes":"分割成三个道","Add Lane below":"在下面添加道","Append compensation activity":"追加补偿活动","Change type":"修改类型","Connect using Association":"使用关联连接","Connect using Sequence/MessageFlow or Association":"使用顺序/消息流或者关联连接","Connect using DataInputAssociation":"使用数据输入关联连接",Remove:"移除","Activate the hand tool":"激活抓手工具","Activate the lasso tool":"激活套索工具","Activate the create/remove space tool":"激活创建/删除空间工具","Create expanded SubProcess":"创建扩展子过程","Create IntermediateThrowEvent/BoundaryEvent":"创建中间抛出事件/边界事件","Create Pool/Participant":"创建池/参与者","Parallel Multi Instance":"并行多实例","Sequential Multi Instance":"串行多实例",DataObjectReference:"数据对象参考",DataStoreReference:"数据存储参考",Loop:"循环","Ad-hoc":"即席","Create {type}":"创建 {type}",Task:"任务","Send Task":"发送任务","Receive Task":"接收任务","User Task":"用户任务","Manual Task":"手工任务","Business Rule Task":"业务规则任务","Service Task":"服务任务","Script Task":"脚本任务","Call Activity":"调用活动","Sub Process (collapsed)":"子流程（折叠的）","Sub Process (expanded)":"子流程（展开的）","Start Event":"开始事件",StartEvent:"开始事件","Intermediate Throw Event":"中间事件","End Event":"结束事件",EndEvent:"结束事件","Create StartEvent":"创建开始事件","Create EndEvent":"创建结束事件","Create Task":"创建任务","Create User Task":"创建用户任务","Create Gateway":"创建网关","Create DataObjectReference":"创建数据对象","Create DataStoreReference":"创建数据存储","Create Group":"创建分组","Create Intermediate/Boundary Event":"创建中间/边界事件","Message Start Event":"消息开始事件","Timer Start Event":"定时开始事件","Conditional Start Event":"条件开始事件","Signal Start Event":"信号开始事件","Error Start Event":"错误开始事件","Escalation Start Event":"升级开始事件","Compensation Start Event":"补偿开始事件","Message Start Event (non-interrupting)":"消息开始事件（非中断）","Timer Start Event (non-interrupting)":"定时开始事件（非中断）","Conditional Start Event (non-interrupting)":"条件开始事件（非中断）","Signal Start Event (non-interrupting)":"信号开始事件（非中断）","Escalation Start Event (non-interrupting)":"升级开始事件（非中断）","Message Intermediate Catch Event":"消息中间捕获事件","Message Intermediate Throw Event":"消息中间抛出事件","Timer Intermediate Catch Event":"定时中间捕获事件","Escalation Intermediate Throw Event":"升级中间抛出事件","Conditional Intermediate Catch Event":"条件中间捕获事件","Link Intermediate Catch Event":"链接中间捕获事件","Link Intermediate Throw Event":"链接中间抛出事件","Compensation Intermediate Throw Event":"补偿中间抛出事件","Signal Intermediate Catch Event":"信号中间捕获事件","Signal Intermediate Throw Event":"信号中间抛出事件","Message End Event":"消息结束事件","Escalation End Event":"定时结束事件","Error End Event":"错误结束事件","Cancel End Event":"取消结束事件","Compensation End Event":"补偿结束事件","Signal End Event":"信号结束事件","Terminate End Event":"终止结束事件","Message Boundary Event":"消息边界事件","Message Boundary Event (non-interrupting)":"消息边界事件（非中断）","Timer Boundary Event":"定时边界事件","Timer Boundary Event (non-interrupting)":"定时边界事件（非中断）","Escalation Boundary Event":"升级边界事件","Escalation Boundary Event (non-interrupting)":"升级边界事件（非中断）","Conditional Boundary Event":"条件边界事件","Conditional Boundary Event (non-interrupting)":"条件边界事件（非中断）","Error Boundary Event":"错误边界事件","Cancel Boundary Event":"取消边界事件","Signal Boundary Event":"信号边界事件","Signal Boundary Event (non-interrupting)":"信号边界事件（非中断）","Compensation Boundary Event":"补偿边界事件","Exclusive Gateway":"互斥网关","Parallel Gateway":"并行网关","Inclusive Gateway":"相容网关","Complex Gateway":"复杂网关","Event based Gateway":"事件网关",Transaction:"转运","Sub Process":"子流程","Event Sub Process":"事件子流程","Collapsed Pool":"折叠池","Expanded Pool":"展开池","no parent for {element} in {parent}":"在{parent}里，{element}没有父类","no shape type specified":"没有指定的形状类型","flow elements must be children of pools/participants":"流元素必须是池/参与者的子类","out of bounds release":"out of bounds release","more than {count} child lanes":"子道大于{count} ","element required":"元素不能为空","diagram not part of bpmn:Definitions":"流程图不符合bpmn规范","no diagram to display":"没有可展示的流程图","no process or collaboration to display":"没有可展示的流程/协作","element {element} referenced by {referenced}#{property} not yet drawn":"由{referenced}#{property}引用的{element}元素仍未绘制","already rendered {element}":"{element} 已被渲染","failed to import {element}":"导入{element}失败",Id:"编号",Name:"名称",General:"常规",Details:"详情","Message Name":"消息名称",Message:"消息",Initiator:"创建者","Asynchronous Continuations":"持续异步","Asynchronous Before":"异步前","Asynchronous After":"异步后","Job Configuration":"工作配置",Exclusive:"排除","Job Priority":"工作优先级","Retry Time Cycle":"重试时间周期",Documentation:"文档","Element Documentation":"元素文档","History Configuration":"历史配置","History Time To Live":"历史的生存时间",Forms:"表单","Form Key":"表单key","Form Fields":"表单字段","Business Key":"业务key","Form Field":"表单字段",ID:"编号",Type:"类型",Label:"名称","Default Value":"默认值","Default Flow":"默认流转路径","Conditional Flow":"条件流转路径","Sequence Flow":"普通流转路径",Validation:"校验","Add Constraint":"添加约束",Config:"配置",Properties:"属性","Add Property":"添加属性",Value:"值",Listeners:"监听器","Execution Listener":"执行监听","Event Type":"事件类型","Listener Type":"监听器类型","Java Class":"Java类",Expression:"表达式","Must provide a value":"必须提供一个值","Delegate Expression":"代理表达式",Script:"脚本","Script Format":"脚本格式","Script Type":"脚本类型","Inline Script":"内联脚本","External Script":"外部脚本",Resource:"资源","Field Injection":"字段注入",Extensions:"扩展","Input/Output":"输入/输出","Input Parameters":"输入参数","Output Parameters":"输出参数",Parameters:"参数","Output Parameter":"输出参数","Timer Definition Type":"定时器定义类型","Timer Definition":"定时器定义",Date:"日期",Duration:"持续",Cycle:"循环",Signal:"信号","Signal Name":"信号名称",Escalation:"升级",Error:"错误","Link Name":"链接名称",Condition:"条件名称","Variable Name":"变量名称","Variable Event":"变量事件","Specify more than one variable change event as a comma separated list.":"多个变量事件以逗号隔开","Wait for Completion":"等待完成","Activity Ref":"活动参考","Version Tag":"版本标签",Executable:"可执行文件","External Task Configuration":"扩展任务配置","Task Priority":"任务优先级",External:"外部",Connector:"连接器","Must configure Connector":"必须配置连接器","Connector Id":"连接器编号",Implementation:"实现方式","Field Injections":"字段注入",Fields:"字段","Result Variable":"结果变量",Topic:"主题","Configure Connector":"配置连接器","Input Parameter":"输入参数",Assignee:"代理人","Candidate Users":"候选用户","Candidate Groups":"候选组","Due Date":"到期时间","Follow Up Date":"跟踪日期",Priority:"优先级","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00",Variables:"变量","Candidate Starter Configuration":"候选人起动器配置","Candidate Starter Groups":"候选人起动器组","This maps to the process definition key.":"这映射到流程定义键。","Candidate Starter Users":"候选人起动器的用户","Specify more than one user as a comma separated list.":"指定多个用户作为逗号分隔的列表。","Tasklist Configuration":"Tasklist配置",Startable:"启动","Specify more than one group as a comma separated list.":"指定多个组作为逗号分隔的列表。"},G=n("82c3"),J=n("bf8f"),H=n("188b"),K=n("c263"),q=n.n(K),W=n("0f1c"),Z=n.n(W),X=n("4b97"),Q=n.n(X),Y={name:"ProcessPreview",componentName:"ProcessPreview",props:{value:String,processId:String,procInstId:String,highLightedFlows:Array,activeActivityIds:Array,processName:String,translations:Object,additionalModel:[Object,Array],moddleExtension:Object,onlyCustomizeAddi:{type:Boolean,default:!1},onlyCustomizeModdle:{type:Boolean,default:!1},simulation:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},prefix:{type:String,default:"flowable"},events:{type:Array,default:function(){return["element.click"]}},headerButtonSize:{type:String,default:"small",validator:function(e){return-1!==["default","medium","small","mini"].indexOf(e)}},headerButtonType:{type:String,default:"primary",validator:function(e){return-1!==["default","primary","success","warning","danger","info"].indexOf(e)}}},data:function(){return{showDetailVisible:!1,showDetailLoading:!1,defaultZoom:1,previewModelVisible:!1,simulationStatus:!1,previewResult:"",previewType:"xml",recoverable:!1,revocable:!1,elementDetail:{},currentHoverEl:null,elementDetails:{}}},computed:{additionalModules:function(){var e=[];if(this.onlyCustomizeAddi)return"[object Array]"===Object.prototype.toString.call(this.additionalModel)?this.additionalModel||[]:[this.additionalModel];"[object Array]"===Object.prototype.toString.call(this.additionalModel)?e.push.apply(e,Object(b.a)(this.additionalModel)):this.additionalModel&&e.push(this.additionalModel);var t={translate:["value",j(this.translations||U)]};return e.push(t),this.simulation&&e.push(x.a),"camunda"===this.prefix&&e.push(q.a),"flowable"===this.prefix&&e.push(Q.a),"activiti"===this.prefix&&e.push(Z.a),e},moddleExtensions:function(){var e={};if(this.onlyCustomizeModdle)return this.moddleExtension||null;if(this.moddleExtension)for(var t in this.moddleExtension)e[t]=this.moddleExtension[t];return"activiti"===this.prefix&&(e.activiti=J),"flowable"===this.prefix&&(e.flowable=H),"camunda"===this.prefix&&(e.camunda=G),e},approvers:function(){return this.elementDetail.approver?this.elementDetail.approver.split(";"):[]}},mounted:function(){var e=this;this.initBpmnModeler(),this.createNewDiagram(this.value),this.$once("hook:beforeDestroy",(function(){e.bpmnViewer&&e.bpmnViewer.destroy(),e.$emit("destroy",e.bpmnViewer),e.bpmnViewer=null}))},methods:{initBpmnModeler:function(){this.bpmnViewer||(this.bpmnViewer=new $.a({container:this.$refs["bpmn-canvas"],height:600}),this.$emit("init-finished",this.bpmnViewer))},createNewDiagram:function(e){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var i,s,r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.processId||"Process_".concat((new Date).getTime()),s=t.processName||"业务流程_".concat((new Date).getTime()),r=e||V(i,s,t.prefix),n.prev=3,n.next=6,t.bpmnViewer.importXML(r);case 6:a=n.sent,(o=a.warnings)&&o.length&&o.forEach((function(e){return console.warn(e)})),t.setViewStyle(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),console.error("[Process Designer Warn]: ".concat(n.t0.message||n.t0));case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},setViewStyle:function(){var e=this,t=this.bpmnViewer.get("canvas"),n=this.bpmnViewer.get("eventBus");this.currentHoverEl=document.querySelector(".highlight"),this.showDetailVisible=!0,n.on("element.hover",(function(t){"bpmn:UserTask"===t.element.type||"bpmn:ServiceTask"===t.element.type?(e.currentHoverEl=t,e.procInstId&&e.showPopoverDebounce()):e.currentHoverEl=null})),n.on("element.out",(function(t){"bpmn:UserTask"!==t.element.type&&"bpmn:ServiceTask"!==t.element.type||(e.showDetailVisible=!1,e.$refs.showDetailRef.referenceElm=null,e.currentHoverEl=null)})),this.highLightedFlows.length>0&&this.highLightedFlows.forEach((function(e){t.addMarker(e,"highlight-line")})),this.activeActivityIds.length>0&&this.activeActivityIds.forEach((function(e){t.addMarker(e,"highlight"),document.querySelector(".highlight").querySelector(".djs-visual rect").setAttribute("stroke-dasharray","4,4")}))},showPopoverDebounce:(R="showPopover",N=200,z=null,function(){var e=this;z&&clearTimeout(z);var t=!z;z=setTimeout((function(){e[R]()}),N),t&&this[R]()}),showPopover:function(){var e=this;if(this.currentHoverEl&&this.elementDetails[this.currentHoverEl.element.id])return this.$refs.showDetailRef.referenceElm=this.currentHoverEl.gfx,this.elementDetail=this.elementDetails[this.currentHoverEl.element.id],this.showDetailLoading=!1,void(this.showDetailVisible=!0);if(this.showDetailLoading=!0,this.currentHoverEl){this.$refs.showDetailRef.referenceElm=this.currentHoverEl.gfx;var t="/flow/flowable/bpmn/getOneActivityVoByProcessInstanceIdAndActivityId/".concat(this.procInstId,"/").concat(this.currentHoverEl.element.id);this.$axios({method:"GET",url:t}).then((function(t){var n=t.data;if(e.elementDetail=n,e.elementDetail){if(e.showDetailVisible=!0,!e.currentHoverEl)return;e.elementDetails[e.currentHoverEl.element.id]=e.elementDetail}})).catch((function(t){console.error(t),e.$message.error("加载失败！"),e.showDetailLoading=!1})).finally((function(){e.showDetailLoading=!1}))}},processSimulation:function(){this.simulationStatus=!this.simulationStatus,this.simulation&&this.bpmnViewer.get("toggleMode").toggleMode()},processZoomIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom+100*e)/100;if(t>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");this.defaultZoom=t,this.bpmnViewer.get("canvas").zoom(this.defaultZoom)},processZoomOut:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom-100*e)/100;if(t<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");this.defaultZoom=t,this.bpmnViewer.get("canvas").zoom(this.defaultZoom)},processZoomTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");if(e>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");this.defaultZoom=e,this.bpmnViewer.get("canvas").zoom(e)},processReZoom:function(){this.defaultZoom=1,this.bpmnViewer.get("canvas").zoom("fit-viewport","auto")}}},ee=(n("70b8"),Object(M.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-process-designer"},[n("div",{staticClass:"my-process-designer__header"},[e._t("control-header"),e.$slots["control-header"]?e._e():[n("el-button-group",{key:"file-control"},[e.simulation?n("el-tooltip",{attrs:{effect:"light",content:this.simulationStatus?"退出模拟":"开启模拟"}},[n("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-cpu"},on:{click:e.processSimulation}},[e._v(" 模拟 ")])],1):e._e()],1),n("el-button-group",{key:"scale-control"},[n("el-tooltip",{attrs:{effect:"light",content:"缩小视图"}},[n("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom<.2,icon:"el-icon-zoom-out"},on:{click:function(t){return e.processZoomOut()}}})],1),n("el-button",{attrs:{size:e.headerButtonSize}},[e._v(e._s(Math.floor(10*this.defaultZoom*10)+"%"))]),n("el-tooltip",{attrs:{effect:"light",content:"放大视图"}},[n("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom>4,icon:"el-icon-zoom-in"},on:{click:function(t){return e.processZoomIn()}}})],1),n("el-tooltip",{attrs:{effect:"light",content:"重置视图并居中"}},[n("el-button",{attrs:{size:e.headerButtonSize,icon:"el-icon-c-scale-to-original"},on:{click:function(t){return e.processReZoom()}}})],1)],1)]],2),n("div",{staticClass:"my-process-designer__container"},[n("div",{ref:"bpmn-canvas",staticClass:"my-process-designer__canvas"})]),n("el-popover",{ref:"showDetailRef",attrs:{placement:"top",title:e.elementDetail.name,width:"300","open-delay":100,"close-delay":0,trigger:"hover"},model:{value:e.showDetailVisible,callback:function(t){e.showDetailVisible=t},expression:"showDetailVisible"}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showDetailLoading,expression:"showDetailLoading"}]},[n("el-row",[n("el-col",{attrs:{span:7}},[e._v("审批人员：")]),n("el-col",{attrs:{span:17}},e._l(e.approvers,(function(t){return n("el-tag",{key:t,staticStyle:{"margin-right":"4px","margin-bottom":"4px"},attrs:{size:"mini"}},[e._v(e._s(t))])})),1)],1),n("el-row",[n("el-col",{attrs:{span:7}},[e._v("节点类型：")]),n("el-col",{attrs:{span:17}},[e._v(" "+e._s(e.elementDetail.nodeType)+" ")])],1),n("el-row",[n("el-col",{attrs:{span:7}},[e._v("节点状态：")]),n("el-col",{attrs:{span:17}},[e._v(" "+e._s(e.elementDetail.status)+" ")])],1),n("el-row",[n("el-col",{attrs:{span:7}},[e._v("开始时间：")]),n("el-col",{attrs:{span:17}},[e._v(" "+e._s(e.elementDetail.startDate)+" ")])],1),n("el-row",[n("el-col",{attrs:{span:7}},[e._v("结束时间：")]),n("el-col",{attrs:{span:17}},[e._v(" "+e._s(e.elementDetail.endDate)+" ")])],1),n("el-row",[n("el-col",{attrs:{span:7}},[e._v("审批耗时：")]),n("el-col",{attrs:{span:17}},[e._v(" "+e._s(e.elementDetail.duration)+" ")])],1)],1)])],1)}),[],!1,null,null,null).exports);ee.install=function(e){e.component(ee.name,ee)};var te=ee,ne=(n("7db0"),n("a9e3"),{name:"ElementBaseInfo",props:{businessObject:Object,type:String,idEditDisabled:{type:Boolean,default:!0},nameEditDisabled:{type:Boolean,default:!0}},data:function(){return{elementBaseInfo:{},conditionExpression:"",showSkipExpression:!1,nodeTypeList:[{label:"普通",value:"0"},{label:"必审",value:"1"},{label:"评审",value:"2"},{label:"协同",value:"3"},{label:"不审",value:"4"},{label:"审批中",value:"5"}]}},watch:{businessObject:{immediate:!1,handler:function(e){var t=this;e&&this.$nextTick((function(){return t.resetBaseInfo()}))}}},methods:{resetBaseInfo:function(){var e,t;this.bpmnElement=null===(e=window)||void 0===e||null===(t=e.bpmnInstances)||void 0===t?void 0:t.bpmnElement,this.elementBaseInfo=JSON.parse(JSON.stringify(this.bpmnElement.businessObject)),this.showSkipExpression="bpmn:SequenceFlow"===this.elementBaseInfo.$type||"bpmn:UserTask"===this.elementBaseInfo.$type},updateBaseInfo:function(e){var t=Object.create(null);t[e]=this.elementBaseInfo[e],"id"===e?window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{id:this.elementBaseInfo[e],di:{id:this.elementBaseInfo[e]}}):window.bpmnInstances.modeling.updateProperties(this.bpmnElement,t)}},beforeDestroy:function(){this.bpmnElement=null}}),ie=Object(M.a)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"ID"}},[n("el-input",{attrs:{disabled:!0,clearable:""},on:{change:function(t){return e.updateBaseInfo("id")}},model:{value:e.elementBaseInfo.id,callback:function(t){e.$set(e.elementBaseInfo,"id",t)},expression:"elementBaseInfo.id"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{disabled:"bpmn:Process"===e.elementBaseInfo.$type,clearable:""},on:{change:function(t){return e.updateBaseInfo("name")}},model:{value:e.elementBaseInfo.name,callback:function(t){e.$set(e.elementBaseInfo,"name",t)},expression:"elementBaseInfo.name"}})],1),"bpmn:StartEvent"===e.elementBaseInfo.$type?[n("el-form-item",{attrs:{label:"发起人"}},[n("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateBaseInfo("initiator")}},model:{value:e.elementBaseInfo.initiator,callback:function(t){e.$set(e.elementBaseInfo,"initiator",t)},expression:"elementBaseInfo.initiator"}})],1)]:e._e(),e.showSkipExpression?[n("el-form-item",{staticStyle:{"margin-top":"16px"},attrs:{label:"跳过表达式"}},[n("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateBaseInfo("skipExpression")}},model:{value:e.elementBaseInfo.skipExpression,callback:function(t){e.$set(e.elementBaseInfo,"skipExpression",t)},expression:"elementBaseInfo.skipExpression"}})],1)]:e._e(),"bpmn:Process"===e.elementBaseInfo.$type?[n("el-form-item",{attrs:{label:"流程启动人"}},[n("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateBaseInfo("candidateStarterUsers")}},model:{value:e.elementBaseInfo.candidateStarterUsers,callback:function(t){e.$set(e.elementBaseInfo,"candidateStarterUsers",t)},expression:"elementBaseInfo.candidateStarterUsers"}})],1),n("el-form-item",{attrs:{label:"流程启动组"}},[n("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateBaseInfo("candidateStarterGroups")}},model:{value:e.elementBaseInfo.candidateStarterGroups,callback:function(t){e.$set(e.elementBaseInfo,"candidateStarterGroups",t)},expression:"elementBaseInfo.candidateStarterGroups"}})],1),n("el-form-item",{attrs:{label:"可执行"}},[n("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},on:{change:function(t){return e.updateBaseInfo("isExecutable")}},model:{value:e.elementBaseInfo.isExecutable,callback:function(t){e.$set(e.elementBaseInfo,"isExecutable",t)},expression:"elementBaseInfo.isExecutable"}})],1)]:e._e()],2)],1)}),[],!1,null,null,null).exports,se={name:"ElementOtherConfig",props:{id:String},data:function(){return{documentation:""}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length?this.$nextTick((function(){var e,n=null===(e=window.bpmnInstances.bpmnElement.businessObject)||void 0===e?void 0:e.documentation;t.documentation=n&&n.length?n[0].text:""})):this.documentation=""}}},methods:{updateDocumentation:function(){!this.bpmnElement&&(this.bpmnElement=window.bpmnInstances.elementRegistry.get(this.id));var e=window.bpmnInstances.bpmnFactory.create("bpmn:Documentation",{text:this.documentation});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{documentation:[e]})}},beforeDestroy:function(){this.bpmnElement=null}},re=Object(M.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("div",{staticClass:"element-property input-property"},[n("div",{staticClass:"element-property__label"},[e._v("元素文档：")]),n("div",{staticClass:"element-property__value"},[n("el-input",{attrs:{type:"textarea",size:"mini",resize:"vertical",autosize:{minRows:2,maxRows:4}},on:{input:e.updateDocumentation,blur:e.updateDocumentation},model:{value:e.documentation,callback:function(t){e.documentation=t},expression:"documentation"}})],1)])])}),[],!1,null,null,null).exports,ae=(n("4de4"),n("a15b"),n("d81d"),n("45fc"),n("a434"),n("466d"),n("c740"),n("ade3"));function oe(e,t,n){var i=Object.create(null);switch(i.event=e.event,t&&(i.id=e.id),e.listenerType){case"scriptListener":i.script=function(e,t){var n=e.scriptType,i=e.scriptFormat,s=e.value,r=e.resource,a="inlineScript"===n?{scriptFormat:i,value:s}:{scriptFormat:i,resource:r};return window.bpmnInstances.moddle.create("".concat(t,":Script"),a)}(e,n);break;case"expressionListener":i.expression=e.expression;break;case"delegateExpressionListener":i.delegateExpression=e.delegateExpression;break;default:i.class=e.class}if(e.fields&&(i.fields=e.fields.map((function(e){return function(e,t){var n=e.name,i=e.fieldType,s=e.string,r=e.expression,a="string"===i?{name:n,string:s}:{name:n,expression:r};return window.bpmnInstances.moddle.create("".concat(t,":Field"),a)}(e,n)}))),t&&"timeout"===e.event&&e.eventDefinitionType){var s=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:e.eventTimeDefinitions}),r=window.bpmnInstances.moddle.create("bpmn:TimerEventDefinition",Object(ae.a)({id:"TimerEventDefinition_".concat(pe(8))},"time".concat(e.eventDefinitionType.replace(/^\S/,(function(e){return e.toUpperCase()}))),s));i.eventDefinitions=[r]}return window.bpmnInstances.moddle.create("".concat(n,":").concat(t?"TaskListener":"ExecutionListener"),i)}function le(e,t){var n=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:t});window.bpmnInstances.modeling.updateProperties(e,{extensionElements:n})}function pe(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1?arguments[1]:void 0,n="",i=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=e;s>0;--s)n+=i[Math.floor(Math.random()*i.length)];return n}function me(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",i=[],s={},r=0;r<e.length;r++)s[e[r][t]]=e[r];for(var a=0;a<e.length;a++)s[e[a][n]]&&e[a][t]!==e[a][n]?(s[e[a][n]].children||(s[e[a][n]].children=[]),s[e[a][n]]._level||(s[e[a][n]]._level=1),e[a]._level=s[e[a][n]]._level+1,s[e[a][n]].children.push(e[a])):i.push(e[a]);return i}var ce={components:{},props:{userInfo:{type:Object,default:function(){}}},data:function(){return{}}},ue=(n("2759"),Object(M.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-base-info"},[n("el-row",{attrs:{type:"flex",align:"middle"}},[n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[n("div",[n("el-avatar",{attrs:{size:"large",src:e.userInfo.headImg}},[e._v(" "+e._s(e.userInfo.name)+" ")])],1)]),n("el-col",{attrs:{span:18}},[e._v(" 工号："+e._s(e.userInfo.code)),n("br"),e._v(" 姓名："+e._s(e.userInfo.name)),n("br"),e._v(" 手机："+e._s(e.userInfo.mobile)),n("br"),e._v(" 公司："+e._s(e.userInfo.companyName)),n("br"),e._v(" 部门："+e._s(e.userInfo.deptName)),n("br")])],1)],1)}),[],!1,null,"6021d22e",null).exports),de={components:{EmpInfoPopover:ue},props:{visible:Boolean,value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},loadingText:{type:String,default:""},title:{type:String,default:""},width:{type:String,default:"600px"},action:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},computed:{show:function(){return!this.form||this.showForm}},data:function(){return{treeLoading:!1,empLoading:!1,filterText:"",filterEmpText:"",pager:{pageSize:15,pageNum:1,total:0,sizes:[15,30,50,100]},selectedList:this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})})),defaultExpandedKeys:[],empData:[],orgTreeData:[],orgTreeProps:{label:"shortName",children:"children"},loading:!1,dialogVisible:this.visible,id:"dialog_"+(new Date).getTime(),showForm:!1}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)||-1!==t.shortName.indexOf(e)},getOrgTreeData:function(e){var t=this;this.treeLoading=!0,this.$axios({method:"GET",url:"/flow/org/department/getOrgTree"}).then((function(e){t.treeLoading=!1;var n=me(e.data,"id","pid");t.orgTreeData=n,t.$nextTick((function(){var e=[];t.orgTreeData&&t.orgTreeData.forEach((function(t){e.push(t.id)})),t.defaultExpandedKeys=e}))})).catch((function(e){t.treeLoading=!1}))},searchEmpHandle:function(){this.pager.pageSize=15,this.pager.pageNum=1,this.pager.total=0,this.getEmpData({keyword:this.filterEmpText})},getRowKeys:function(e){return e.id},getEmpData:function(e){var t=this;this.empLoading=!0,this.$axios({method:"POST",url:"/flow/org/personal/getPagerModel",data:{query:{pageSize:this.pager.pageSize,pageNum:this.pager.pageNum-1},entity:Object(u.a)({keyword:""},e)}}).then((function(e){t.empLoading=!1,e.data.data&&(e.data.data=e.data.data.map((function(e){return{id:e.id,name:e.name,code:e.code,sex:e.sex,mobile:e.mobile,email:e.email,headImg:e.headImg,companyId:e.companyId,companyName:e.companyName,deptId:e.deptId,deptName:e.deptName}}))),t.$nextTick((function(){t.pager.total=e.data.total,t.empData=e.data.data;var n=t.$refs.multipleTable;t.selectedList&&t.selectedList.forEach((function(e){t.defaultExpandedKeys.push(e.companyId),t.defaultExpandedKeys.push(e.deptId),n.toggleRowSelection(e,!0)}))}))})).catch((function(e){t.empLoading=!1}))},rowClick:function(e,t,n){var i=this.$refs.multipleTable;this.selectedList.find((function(t){return t.id==e.id}))?i.toggleRowSelection(e,!1):i.toggleRowSelection(e,!0)},rowClickHandle:function(e,t){if("operate"!==t.property){var n=-1!==this.selectedList.findIndex((function(t){return t.id===e.id}));this.selectionChangeHandle(!n,e)}},close:function(){this.dialogVisible=!1},submit:function(){this.$emit("on-submit",this.selectedList)},end:function(){this.loading=!1},handleSizeChange:function(e){this.pager.pageSize=e;var t=this.genQueryParam();this.getEmpData(t)},handleCurrentChange:function(e){this.pager.pageNum=e;var t=this.genQueryParam();this.getEmpData(t)},genQueryParam:function(){var e=this.$refs.tree.getCurrentNode(),t={};return e&&(t="1"==e.sourceType?{companyId:e.id}:{deptId:e.id}),t},isChecked:function(e){return this.selectedList.filter((function(t){return t.id===e.id})).length>0},handleSelectionChange:function(e){this.selectedList=e},appendSelectVal:function(e){e&&e.id&&(this.multiple||this.selectedList&&0!==this.selectedList.length&&this.selectedList[0].id===e.id?this.selectedList.find((function(t){return t.id===e.id}))||this.selectedList.push(e):this.selectedList=[e])},selectionChangeHandle:function(e,t){if(e)this.appendSelectVal(t);else{var n=this.selectedList.findIndex((function(e){return e.id===t.id}));n>=0&&this.selectedList.splice(n,1)}},handleNodeClick:function(e){var t={};"1"==e.sourceType?t={companyId:e.id}:"2"==e.sourceType&&(t={deptId:e.id,companyId:e.companyId}),this.pager.pageNum=1,this.getEmpData(t)}},mounted:function(){},watch:{filterText:function(e){this.$refs.tree.filter(e)},dialogVisible:function(e){var t=this;e?this.showForm=!0:(this.loading=!1,this.$emit("on-close"),setTimeout((function(){t.showForm=!1}),300))},visible:function(e){e&&(this.filterText="",this.filterEmpText=""),this.dialogVisible=e},value:function(e){this.selectedList=this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})}))}}},be=(n("5e33"),Object(M.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{ref:"elDialog",staticClass:"cus-dialog-container",staticStyle:{padding:"10px"},attrs:{title:e.title,visible:e.dialogVisible,"close-on-click-modal":e.closeOnClickModal,"append-to-body":"",center:"",width:e.width,id:e.id,fullscreen:e.fullscreen},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-container",[n("el-header",{staticStyle:{padding:"0",height:"42px"}},[n("div",{staticClass:"selector-items selector-items-dialog"},[e._l(e.selectedList,(function(t){return n("el-tag",{key:t.id,staticClass:"item",attrs:{size:"small","disable-transitions":"",closable:""},on:{close:function(n){return e.selectionChangeHandle(!1,t)}}},[e._v(" "+e._s(t.name)+" ")])})),e.selectedList.length<=0?n("div",{staticClass:"select-empty"},[e._v("请选择")]):e._e()],2)]),n("el-container",[n("el-aside",{staticStyle:{height:"400px"},attrs:{width:"200px"}},[n("el-card",{attrs:{shadow:"never","body-style":"padding:0;height: 358px;overflow-y:scroll;"}},[n("div",{staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[n("el-input",{attrs:{placeholder:"请输入关键字",size:"mini"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),n("div",[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",staticClass:"filter-tree",attrs:{"highlight-current":"","default-expanded-keys":e.defaultExpandedKeys,"node-key":"id",data:e.orgTreeData,props:e.orgTreeProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return n("span",{staticClass:"custom-tree-node"},["1"==i.sourceType?n("span",{staticStyle:{color:"#67c23a"}},[e._v(e._s(i.shortName))]):"2"==i.sourceType?n("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(i.shortName))]):n("span",[e._v(e._s(i.shortName))])])}}])})],1)])],1),n("el-main",{staticStyle:{padding:"0"}},[n("el-card",{attrs:{shadow:"never","body-style":"padding:0;height: 357px;overflow-y:hidden;"}},[n("div",{staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[n("el-input",{attrs:{placeholder:"请输入关键字",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmpHandle(t)}},model:{value:e.filterEmpText,callback:function(t){e.filterEmpText=t},expression:"filterEmpText"}},[n("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.searchEmpHandle},slot:"append"})],1)],1),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.empLoading,expression:"empLoading"}],ref:"multipleTable",attrs:{data:e.empData,size:"mini",height:"320",stripe:"","highlight-current-row":!0},on:{"row-click":e.rowClickHandle,select:e.selectionChangeHandle}},[n("el-table-column",{attrs:{label:"选择",property:"operate",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:e.isChecked(t.row)},on:{change:function(n){return e.selectionChangeHandle(n,t.row)}}})]}}])}),n("el-table-column",{attrs:{property:"name",label:"姓名",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sex?n("i",{staticClass:"el-icon-user-solid"}):n("i",{staticClass:"el-icon-user"}),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("emp-info-popover",{attrs:{"user-info":t.row}})],1),n("span",{domProps:{innerHTML:e._s(t.row.name)}})])]}}])}),n("el-table-column",{attrs:{property:"code",label:"工号",width:"80"}}),n("el-table-column",{attrs:{property:"mobile",label:"手机",width:"95"}}),n("el-table-column",{attrs:{property:"companyName",label:"组织"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.companyName)+" / "+e._s(t.row.deptName)+" ")]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"center","margin-top":"4px"},attrs:{small:"",background:"","current-page":e.pager.pageNum,"page-size":e.pager.pageSize,"page-sizes":e.pager.sizes,total:e.pager.total,layout:"sizes, total, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)],1)],1),e.action?n("span",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-footer",attrs:{slot:"footer","element-loading-text":e.loadingText},slot:"footer"},[e._t("action",[n("el-button",{on:{click:e.close}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])])],2):e._e()],1)}),[],!1,null,"0725b7e1",null).exports),fe=(new s.a,{components:{EmpInfoPopover:ue,EmpSelectorDialog:be},props:{value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},limit:{type:Number,default:9},disabled:{type:Boolean,default:!1},tip:{type:String,default:""},placeholder:{type:String,default:""},ui:{type:String,default:"element"},platform:{type:String,default:"pc"}},data:function(){return{empSelectorDialogVisible:!1,empList:this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})})),showEmpList:[],viewer:null,empSelectorId:"empselector_"+(new Date).getTime(),editIndex:-1,meituIndex:-1}},computed:{miniWidth:function(){return this.width>this.height?this.height:this.width}},methods:{handleSubmit:function(e){this.empList=e,this.empSelectorDialogVisible=!1,this.$emit("input",this.empList)},openEmpSelector:function(e){var t=this;if(!this.disabled)if("I"!==e.target.tagName&&"i"!==e.target.tagName){this.empSelectorDialogVisible=!0,this.$refs.empSelector.getOrgTreeData();var n=JSON.parse(JSON.stringify(this.empList));this.showEmpList=n,"mobile"!==this.platform&&this.$refs.empSelector.getEmpData()}else this.$nextTick((function(){"element"===t.ui?(t.$emit("input",[]),t.empList=[]):(void 0).$emit("on-field-change",t.$attrs.id,t.empList)}))}},watch:{value:function(e){this.empList=this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})}))}}}),he=(n("a1bf"),Object(M.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"selector-items",class:{"is-disabled":e.disabled},attrs:{tabindex:"0",id:e.empSelectorId},on:{click:e.openEmpSelector}},[e._l(e.empList,(function(t){return n("el-tag",{key:t.id,staticClass:"item",attrs:{size:"small","disable-transitions":""}},[n("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"hover"}},[n("div",[n("emp-info-popover",{attrs:{"user-info":t}})],1),n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.name))])])],1)})),e.empList.length<=0?n("div",{staticClass:"select-empty"},[e._v(e._s(e.placeholder))]):e._e(),e.empList.length>0&&!e.disabled?n("div",{staticClass:"remove-all"},[n("i",{staticClass:"el-icon-circle-close"})]):e._e(),n("emp-selector-dialog",{ref:"empSelector",attrs:{visible:e.empSelectorDialogVisible,multiple:e.multiple,width:"800px",title:"人员选择"},on:{"on-close":function(t){e.empSelectorDialogVisible=!1},"on-submit":e.handleSubmit},model:{value:e.showEmpList,callback:function(t){e.showEmpList=t},expression:"showEmpList"}})],2)}),[],!1,null,"0fd13fb6",null).exports),ge={components:{},props:{visible:Boolean,value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},loadingText:{type:String,default:""},title:{type:String,default:""},width:{type:String,default:"600px"},action:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},computed:{show:function(){return!this.form||this.showForm}},data:function(){return{treeLoading:!1,empLoading:!1,filterText:"",filterEmpText:"",pager:{pageSize:15,pageNum:1,total:0,sizes:[15,30,50,100]},selectedList:this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})})),defaultExpandedKeys:[],empData:[],orgTreeData:[],orgTreeProps:{label:"shortName",children:"children"},loading:!1,dialogVisible:this.visible,id:"dialog_"+(new Date).getTime(),showForm:!1,roleEmpList:[],roleEmpLoading:!1}},methods:{hideEmpPopover:function(){this.roleEmpList=[]},showEmpPopover:function(e){var t=this;this.roleEmpLoading=!0,this.$axios({method:"POST",url:"/flow/org/role/getPersonalsByRole/"+e,data:{}}).then((function(e){t.roleEmpLoading=!1,t.$nextTick((function(){t.roleEmpList=e.data.map((function(e){return{name:e.name,code:e.code}}))}))})).catch((function(e){t.roleEmpLoading=!1}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)||-1!==t.shortName.indexOf(e)},getOrgTreeData:function(e){var t=this;this.treeLoading=!0,this.$axios({method:"POST",url:"/flow/org/company/getCompanies",data:{}}).then((function(e){t.treeLoading=!1;var n=me(e.data,"id","pid");t.orgTreeData=n,t.$nextTick((function(){var e=[];t.orgTreeData&&t.orgTreeData.forEach((function(t){e.push(t.id)})),t.defaultExpandedKeys=e}))})).catch((function(e){t.treeLoading=!1}))},searchEmpHandle:function(){this.pager.pageSize=15,this.pager.pageNum=1,this.pager.total=0,this.getEmpData({keyword:this.filterEmpText})},getRowKeys:function(e){return e.id},getEmpData:function(e){var t=this;this.empLoading=!0,this.$axios({method:"POST",url:"/flow/org/role/getPagerModel",data:{query:{pageSize:this.pager.pageSize,pageNum:this.pager.pageNum-1},entity:Object(u.a)({keyword:""},e)}}).then((function(e){t.empLoading=!1,e.data.data&&(e.data.data=e.data.data.map((function(e){return{id:e.id,name:e.name,sn:e.sn,companyId:e.companyId,companyName:e.companyName}}))),t.$nextTick((function(){t.pager.total=e.data.total,t.empData=e.data.data;var n=t.$refs.multipleTable;t.selectedList&&t.selectedList.forEach((function(e){t.defaultExpandedKeys.push(e.companyId),t.defaultExpandedKeys.push(e.deptId),n.toggleRowSelection(e,!0)}))}))})).catch((function(e){t.empLoading=!1}))},rowClick:function(e,t,n){var i=this.$refs.multipleTable;this.selectedList.find((function(t){return t.id==e.id}))?i.toggleRowSelection(e,!1):i.toggleRowSelection(e,!0)},rowClickHandle:function(e,t){if("operate"!==t.property){var n=-1!==this.selectedList.findIndex((function(t){return t.id===e.id}));this.selectionChangeHandle(!n,e)}},close:function(){this.dialogVisible=!1},submit:function(){this.$emit("on-submit",this.selectedList)},end:function(){this.loading=!1},handleSizeChange:function(e){this.pager.pageSize=e;var t=this.genQueryParam();this.getEmpData(t)},handleCurrentChange:function(e){this.pager.pageNum=e;var t=this.genQueryParam();this.getEmpData(t)},genQueryParam:function(){var e=this.$refs.tree.getCurrentNode(),t={};return e&&(t="1"==e.sourceType?{companyId:e.id}:{deptId:e.id}),t},isChecked:function(e){return this.selectedList.filter((function(t){return t.id===e.id})).length>0},handleSelectionChange:function(e){this.selectedList=e},appendSelectVal:function(e){e&&e.id&&(this.multiple||this.selectedList&&0!==this.selectedList.length&&this.selectedList[0].id===e.id?this.selectedList.find((function(t){return t.id===e.id}))||this.selectedList.push(e):this.selectedList=[e])},selectionChangeHandle:function(e,t){if(e)this.appendSelectVal(t);else{var n=this.selectedList.findIndex((function(e){return e.id===t.id}));n>=0&&this.selectedList.splice(n,1)}},handleNodeClick:function(e){var t={companyId:e.id};this.pager.pageNum=1,this.getEmpData(t)}},mounted:function(){},watch:{filterText:function(e){this.$refs.tree.filter(e)},dialogVisible:function(e){var t=this;e?this.showForm=!0:(this.loading=!1,this.$emit("on-close"),setTimeout((function(){t.showForm=!1}),300))},visible:function(e){e&&(this.filterText="",this.filterEmpText=""),this.dialogVisible=e},value:function(e){this.selectedList=this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})}))}}},ye=(n("9355"),n("dc9d"),{components:{RoleSelectorDialog:Object(M.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{ref:"elDialog",staticClass:"cus-dialog-container",staticStyle:{padding:"10px"},attrs:{title:e.title,visible:e.dialogVisible,"close-on-click-modal":e.closeOnClickModal,"append-to-body":"",center:"",width:e.width,id:e.id,fullscreen:e.fullscreen},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-container",[n("el-header",{staticStyle:{padding:"0",height:"42px"}},[n("div",{staticClass:"selector-items selector-items-dialog"},[e._l(e.selectedList,(function(t){return n("el-tag",{key:t.id,staticClass:"item",attrs:{size:"small","disable-transitions":"",closable:""},on:{close:function(n){return e.selectionChangeHandle(!1,t)}}},[e._v(" "+e._s(t.name)+" ")])})),e.selectedList.length<=0?n("div",{staticClass:"select-empty"},[e._v("请选择")]):e._e()],2)]),n("el-container",[n("el-aside",{staticStyle:{height:"400px"},attrs:{width:"200px"}},[n("el-card",{attrs:{shadow:"never","body-style":"padding:0;height: 358px;overflow-y:scroll;"}},[n("div",{staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[n("el-input",{attrs:{placeholder:"请输入关键字",size:"mini"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),n("div",[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",staticClass:"filter-tree",attrs:{"highlight-current":"","default-expanded-keys":e.defaultExpandedKeys,"node-key":"id",data:e.orgTreeData,props:e.orgTreeProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{staticStyle:{color:"#67c23a"}},[e._v(e._s(i.shortName))])])}}])})],1)])],1),n("el-main",{staticStyle:{padding:"0"}},[n("el-card",{attrs:{shadow:"never","body-style":"padding:0;height: 357px;overflow-y:hidden;"}},[n("div",{staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[n("el-input",{attrs:{placeholder:"请输入关键字",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmpHandle(t)}},model:{value:e.filterEmpText,callback:function(t){e.filterEmpText=t},expression:"filterEmpText"}},[n("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.searchEmpHandle},slot:"append"})],1)],1),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.empLoading,expression:"empLoading"}],ref:"multipleTable",attrs:{data:e.empData,size:"mini",height:"320",stripe:"","highlight-current-row":!0},on:{"row-click":e.rowClickHandle,select:e.selectionChangeHandle}},[n("el-table-column",{attrs:{label:"选择",property:"operate",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:e.isChecked(t.row)},on:{change:function(n){return e.selectionChangeHandle(n,t.row)}}})]}}])}),n("el-table-column",{attrs:{property:"name",label:"名称"}}),n("el-table-column",{attrs:{property:"sn",label:"编码",width:"120"}}),n("el-table-column",{attrs:{property:"companyName",label:"所属公司"}}),n("el-table-column",{attrs:{property:"emps",label:"人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"right",title:"",width:"200","open-delay":300,"close-delay":0,trigger:"hover"},on:{show:function(n){return e.showEmpPopover(t.row.id)},hide:function(t){return e.hideEmpPopover()}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.roleEmpLoading,expression:"roleEmpLoading"}],staticClass:"role-emp-items"},[0===e.roleEmpList.length?n("el-alert",{attrs:{title:"暂无人员",type:"info",closable:!1}}):e._e(),e._l(e.roleEmpList,(function(t){return n("el-tag",{key:t.code,attrs:{size:"small"}},[e._v(" "+e._s(t.name)+"("+e._s(t.code)+") ")])}))],2),n("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("查看人员")])],1)]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"center","margin-top":"4px"},attrs:{small:"",background:"","current-page":e.pager.pageNum,"page-size":e.pager.pageSize,"page-sizes":e.pager.sizes,total:e.pager.total,layout:"sizes, total, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)],1)],1),e.action?n("span",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-footer",attrs:{slot:"footer","element-loading-text":e.loadingText},slot:"footer"},[e._t("action",[n("el-button",{on:{click:e.close}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])])],2):e._e()],1)}),[],!1,null,"c67aed5a",null).exports},props:{value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},limit:{type:Number,default:9},disabled:{type:Boolean,default:!1},tip:{type:String,default:""},placeholder:{type:String,default:""},ui:{type:String,default:"element"},platform:{type:String,default:"pc"}},data:function(){return{empSelectorDialogVisible:!1,roleList:this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})})),showRoleList:[],viewer:null,empSelectorId:"empselector_"+(new Date).getTime(),editIndex:-1,meituIndex:-1,roleEmpList:[],roleEmpLoading:!1}},computed:{miniWidth:function(){return this.width>this.height?this.height:this.width}},methods:{handleSubmit:function(e){this.roleList=e,this.empSelectorDialogVisible=!1,this.$emit("input",this.roleList)},showEmpPopover:function(e){var t=this;this.roleEmpLoading=!0,this.$axios({method:"POST",url:"/flow/org/role/getPersonalsByRole/"+e,data:{}}).then((function(e){t.roleEmpLoading=!1,t.$nextTick((function(){t.roleEmpList=e.data.map((function(e){return{name:e.name,code:e.code}}))}))})).catch((function(e){t.roleEmpLoading=!1}))},hideEmpPopover:function(e){this.roleEmpList=[]},openEmpSelector:function(e){var t=this;if(!this.disabled)if("I"!==e.target.tagName&&"i"!==e.target.tagName){this.empSelectorDialogVisible=!0,this.$refs.empSelector.getOrgTreeData();var n=JSON.parse(JSON.stringify(this.roleList));this.showRoleList=n,"mobile"!==this.platform&&this.$refs.empSelector.getEmpData()}else this.$nextTick((function(){"element"===t.ui?(t.$emit("input",[]),t.roleList=[]):(void 0).$emit("on-field-change",t.$attrs.id,t.roleList)}))}},watch:{value:function(e){this.roleList=this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})}))}}}),ve=(n("a81a"),Object(M.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"selector-items",class:{"is-disabled":e.disabled},attrs:{tabindex:"0",id:e.empSelectorId},on:{click:e.openEmpSelector}},[e._l(e.roleList,(function(t){return n("el-tag",{key:t.id,staticClass:"item",attrs:{size:"small","disable-transitions":""}},[n("el-popover",{attrs:{placement:"bottom",title:"",width:"200","open-delay":300,"close-delay":0,trigger:"hover"},on:{show:function(n){return e.showEmpPopover(t.id)},hide:function(n){return e.hideEmpPopover(t.id)}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.roleEmpLoading,expression:"roleEmpLoading"}],staticClass:"role-emp-items"},[0===e.roleEmpList.length?n("el-alert",{attrs:{title:"暂无人员",type:"info",closable:!1}}):e._e(),e._l(e.roleEmpList,(function(t){return n("el-tag",{key:t.code,attrs:{size:"small"}},[e._v(" "+e._s(t.name)+"("+e._s(t.code)+") ")])}))],2),n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.name))])])],1)})),e.roleList.length<=0?n("div",{staticClass:"select-empty"},[e._v(e._s(e.placeholder))]):e._e(),e.roleList.length>0&&!e.disabled?n("div",{staticClass:"remove-all"},[n("i",{staticClass:"el-icon-circle-close"})]):e._e(),n("role-selector-dialog",{ref:"empSelector",attrs:{visible:e.empSelectorDialogVisible,multiple:e.multiple,width:"800px",form:"",title:"角色选择"},on:{"on-close":function(t){e.empSelectorDialogVisible=!1},"on-submit":e.handleSubmit},model:{value:e.showRoleList,callback:function(t){e.showRoleList=t},expression:"showRoleList"}})],2)}),[],!1,null,"156250f6",null).exports),Ee={name:"UserTask",components:{EmpSelector:he,RoleSelector:ve},props:{id:String,type:String},data:function(){return{dynamicTags:[],inputVisible:!1,dueDateFormModelVisible:!1,inputValue:"",groupInputVisible:!1,groupInputValue:"",empSelectorDialogVisible:!0,roleSelectorDialogVisible:!0,showEmpList:[],showRoleList:[],showPersonalSelector:!1,dueDateForm:{hourEnum:["4","8","12","24"],hour:null,day:null,commonEnum:["1","2","3","4"],week:null,month:null,otherHour:null,otherDay:null,otherWeek:null,otherMonth:null,otherHourVisible:!1,otherDayVisible:!1,otherWeekVisible:!1,otherMonthVisible:!1},defaultTaskForm:{assigneePersons:[],assigneeType:{},assignee:"",candidateUsers:[],candidateGroups:[],dueDate:"",followUpDate:"",priority:""},userTaskForm:{},mockData:[1,2,3,4,5,6,7,8,9,10],assigneeTypes:[{label:"分配给单个人",value:"assigneeUser"},{label:"候选人员",value:"candidateUsers"},{label:"分配给流程发起人",value:"$INITIATOR"}],currentAssigneeType:"assigneeUser",assigneeType:{},assigneeTabType:"",assigneeUser:{},candidateUsers:{},candidateGroups:{},initUserTask:!1,nodeEditable:"false",nodeType:"0",nodeTypeList:[{label:"普通",value:"0"},{label:"必审",value:"1"},{label:"评审",value:"2"},{label:"协同",value:"3"},{label:"不审",value:"4"},{label:"审批中",value:"5"}]}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}},showEmpList:{immediate:!1,handler:function(e,t){"idm"===this.assigneeTabType&&(e.forEach((function(e){delete e.email,delete e.headImg})),"assigneeUser"===this.currentAssigneeType?(e.length>0?(this.userTaskForm.assignee=e[0].code,this.addExtensionElement("IdmAssignee",JSON.stringify(e))):(this.removeExtensionElement("IdmAssignee"),this.userTaskForm.assignee=""),this.updateElementTask("assignee")):"candidateUsers"===this.currentAssigneeType&&(this.userTaskForm.candidateUsers=e.map((function(e){return e.code})),this.updateElementTask("candidateUsers"),e.length>0?this.addExtensionElement("IdmCandidateUsers",JSON.stringify(e)):(this.removeExtensionElement("IdmCandidateUsers"),this.userTaskForm.assignee="",this.updateElementTask("assignee"))))}},showRoleList:{immediate:!1,handler:function(e,t){"idm"===this.assigneeTabType&&(this.userTaskForm.candidateGroups=e.map((function(e){return e.sn})),this.updateElementTask("candidateGroups"),e.length>0?this.addExtensionElement("IdmCandidateGroups",JSON.stringify(e)):this.removeExtensionElement("IdmCandidateGroups"))}}},methods:{handleClose:function(e){this.userTaskForm.candidateUsers.splice(this.userTaskForm.candidateUsers.indexOf(e),1),this.updateElementTask("candidateUsers")},showDueDateSetting:function(){this.dueDateFormModelVisible=!0;var e=this.userTaskForm.dueDate;if(e){var t=e.match(/\d+/g);switch(e.charAt(e.length-1)){case"H":-1===this.dueDateForm.hourEnum.indexOf(t[0])?(this.dueDateForm.otherHourVisible=!0,this.dueDateForm.otherHour=t[0],this.dueDateForm.hour=-1):(this.dueDateForm.otherHourVisible=!1,this.dueDateForm.hour=t[0]);break;case"D":-1===this.dueDateForm.commonEnum.indexOf(t[0])?(this.dueDateForm.otherDayVisible=!0,this.dueDateForm.otherDay=t[0],this.dueDateForm.day=-1):(this.dueDateForm.otherDayVisible=!1,this.dueDateForm.day=t[0]);break;case"W":-1===this.dueDateForm.commonEnum.indexOf(t[0])?(this.dueDateForm.otherWeekVisible=!0,this.dueDateForm.otherWeek=t[0],this.dueDateForm.week=-1):(this.dueDateForm.otherWeekVisible=!1,this.dueDateForm.week=t[0]);break;case"M":-1===this.dueDateForm.commonEnum.indexOf(t[0])?(this.dueDateForm.otherMonthVisible=!0,this.dueDateForm.otherMonth=t[0],this.dueDateForm.month=-1):(this.dueDateForm.otherMonthVisible=!1,this.dueDateForm.month=t[0])}}else this.dueDateForm.hour=void 0,this.dueDateForm.day=void 0,this.dueDateForm.week=void 0,this.dueDateForm.month=void 0,this.dueDateForm.otherHour=1,this.dueDateForm.otherDay=1,this.dueDateForm.otherWeek=1,this.dueDateForm.otherMonth=1,this.dueDateForm.otherHourVisible=!1,this.dueDateForm.otherDayVisible=!1,this.dueDateForm.otherWeekVisible=!1,this.dueDateForm.otherMonthVisible=!1},changeHour:function(){this.dueDateForm.day=null,this.dueDateForm.week=void 0,this.dueDateForm.month=void 0,this.dueDateForm.otherDayVisible=!1,this.dueDateForm.otherWeekVisible=!1,this.dueDateForm.otherMonthVisible=!1,-1==this.dueDateForm.hour?this.dueDateForm.otherHourVisible=!0:this.dueDateForm.otherHourVisible=!1},changeDay:function(){this.dueDateForm.hour=void 0,this.dueDateForm.week=void 0,this.dueDateForm.month=void 0,this.dueDateForm.otherHourVisible=!1,this.dueDateForm.otherWeekVisible=!1,this.dueDateForm.otherMonthVisible=!1,-1==this.dueDateForm.day?this.dueDateForm.otherDayVisible=!0:this.dueDateForm.otherDayVisible=!1},changeWeek:function(){this.dueDateForm.day=void 0,this.dueDateForm.hour=void 0,this.dueDateForm.month=void 0,this.dueDateForm.otherDayVisible=!1,this.dueDateForm.otherHourVisible=!1,this.dueDateForm.otherMonthVisible=!1,-1==this.dueDateForm.week?this.dueDateForm.otherWeekVisible=!0:this.dueDateForm.otherWeekVisible=!1},changeMonth:function(){this.dueDateForm.day=void 0,this.dueDateForm.week=void 0,this.dueDateForm.hour=void 0,this.dueDateForm.otherDayVisible=!1,this.dueDateForm.otherWeekVisible=!1,this.dueDateForm.otherHourVisible=!1,-1==this.dueDateForm.month?this.dueDateForm.otherMonthVisible=!0:this.dueDateForm.otherMonthVisible=!1},handleSubmitEmp:function(){},saveDueDateForm:function(){this.dueDateForm.hour?-1==this.dueDateForm.hour?this.userTaskForm.dueDate="PT"+this.dueDateForm.otherHour+"H":this.userTaskForm.dueDate="PT"+this.dueDateForm.hour+"H":this.dueDateForm.day?-1==this.dueDateForm.day?this.userTaskForm.dueDate="P"+this.dueDateForm.otherDay+"D":this.userTaskForm.dueDate="P"+this.dueDateForm.day+"D":this.dueDateForm.week?-1==this.dueDateForm.week?this.userTaskForm.dueDate="P"+this.dueDateForm.otherWeek+"W":this.userTaskForm.dueDate="P"+this.dueDateForm.week+"W":this.dueDateForm.month&&(-1==this.dueDateForm.month?this.userTaskForm.dueDate="P"+this.dueDateForm.otherMonth+"M":this.userTaskForm.dueDate="P"+this.dueDateForm.month+"M"),this.updateElementTask("dueDate"),this.dueDateFormModelVisible=!1},handleSubmitEmps:function(){},handleSubmitRoles:function(){},beforeLeaveTab:function(e,t){var n=this;if(this.userTaskForm.assignee||this.userTaskForm.candidateUsers&&0!==this.userTaskForm.candidateUsers.length||this.userTaskForm.candidateGroups&&0!==this.userTaskForm.candidateGroups.length){if(!this.initUserTask)return this.$confirm("此操作将清除已选的数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.showEmpList=[],n.showRoleList=[],n.userTaskForm.assignee="",n.userTaskForm.candidateUsers=[],n.userTaskForm.candidateGroups=[],n.updateElementTask("assignee"),n.updateElementTask("candidateUsers"),n.updateElementTask("candidateGroups"),setTimeout((function(){n.removeExtensionElements(["IdmAssignee","IdmCandidateUsers","IdmCandidateGroups"])}),500)})).catch((function(){throw new Error("取消成功！")}));this.initUserTask=!1}else this.initUserTask=!1},handleTabClick:function(e){this.addExtensionElement("AssigneeType",e.name)},updateElementExtensions:function(){var e=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions.concat(this.assigneeType)});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:e})},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.userTaskForm.candidateUsers.push(e),this.inputVisible=!1,this.inputValue="",this.updateElementTask("candidateUsers")},handleCloseGroup:function(e){this.userTaskForm.candidateGroups.splice(this.userTaskForm.candidateGroups.indexOf(e),1),this.updateElementTask("candidateGroups")},showInputGroup:function(){var e=this;this.groupInputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInputGroup.$refs.input.focus()}))},handleInputConfirmGroup:function(){var e=this.groupInputValue;e&&this.userTaskForm.candidateGroups.push(e),this.groupInputVisible=!1,this.groupInputValue="",this.updateElementTask("candidateGroups")},resetTaskForm:function(){var e,t,n,i,s,r,a;for(var o in this.defaultTaskForm){var l,p,m=void 0;m="candidateUsers"===o||"candidateGroups"===o?null!==(l=this.bpmnElement)&&void 0!==l&&l.businessObject[o]?this.bpmnElement.businessObject[o].split(","):[]:(null===(p=this.bpmnElement)||void 0===p?void 0:p.businessObject[o])||this.defaultTaskForm[o],this.$set(this.userTaskForm,o,m)}this.elExtensionElements=(null===(e=this.bpmnElement)||void 0===e?void 0:e.businessObject.get("extensionElements"))||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.assigneeType=(null===(t=this.elExtensionElements.values.filter((function(e){return"flowable:AssigneeType"===e.$type})))||void 0===t?void 0:t[0])||window.bpmnInstances.moddle.create("flowable:AssigneeType",{body:"static"}),this.assigneeTabType=this.assigneeType.body,this.addExtensionElement("AssigneeType",this.assigneeTabType),this.assigneeUser=null===(n=this.elExtensionElements.values.filter((function(e){return"flowable:IdmAssignee"===e.$type})))||void 0===n?void 0:n[0],this.candidateUsers=null===(i=this.elExtensionElements.values.filter((function(e){return"flowable:IdmCandidateUsers"===e.$type})))||void 0===i?void 0:i[0],this.assigneeUser&&this.assigneeUser.body?(this.currentAssigneeType="assigneeUser",this.showEmpList=JSON.parse(this.assigneeUser.body)):this.showEmpList=[],this.candidateUsers&&this.candidateUsers.body&&(this.currentAssigneeType="candidateUsers",this.showEmpList=JSON.parse(this.candidateUsers.body)),"$INITIATOR"===this.userTaskForm.assignee&&(this.currentAssigneeType="$INITIATOR"),this.candidateGroups=(null===(s=this.elExtensionElements.values.filter((function(e){return"flowable:IdmCandidateGroups"===e.$type})))||void 0===s?void 0:s[0])||window.bpmnInstances.moddle.create("flowable:IdmCandidateGroups",{body:"[]"}),this.showRoleList=JSON.parse(this.candidateGroups.body),this.initUserTask=!0;var c=null===(r=this.elExtensionElements.values.filter((function(e){return"flowable:NodeType"===e.$type})))||void 0===r?void 0:r[0];c&&c.body&&(this.nodeType=c.body);var u=null===(a=this.elExtensionElements.values.filter((function(e){return"flowable:IsEditdata"===e.$type})))||void 0===a?void 0:a[0];u&&u.body&&(this.nodeEditable="true"===u.body)},updateExtensionElement:function(e){"nodeType"===e?this.nodeType?this.addExtensionElement("NodeType",this.nodeType):this.removeExtensionElement("NodeType"):"nodeEditable"===e&&this.addExtensionElement("IsEditdata",this.nodeEditable?"true":"false")},addExtensionElement:function(e,t){var n,i;this.elExtensionElements=(null===(n=this.bpmnElement)||void 0===n?void 0:n.businessObject.get("extensionElements"))||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&t.$type!=="flowable:".concat(e)}));var s=(null===(i=this.elExtensionElements.values.filter((function(t){return t&&t.$type==="flowable:".concat(e)})))||void 0===i?void 0:i[0])||window.bpmnInstances.moddle.create("flowable:".concat(e),{body:"[]"});s.body=t;var r=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions.concat(s)});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:r})},removeExtensionElement:function(e){this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&t.$type!=="flowable:".concat(e)}));var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:t})},removeExtensionElements:function(e){this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&!e.some((function(e){return"flowable:".concat(e)===t.$type}))}));var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:t})},changeAssigneeType:function(e){this.userTaskForm.assignee="",this.userTaskForm.candidateUsers=[],"$INITIATOR"===e?(this.userTaskForm.assignee=e,this.updateElementTask("assignee"),this.userTaskForm.candidateUsers=[],this.updateElementTask("candidateUsers"),this.removeExtensionElements(["IdmCandidateUsers","IdmAssignee"]),this.showEmpList=[]):"assigneeUser"===e?(this.removeExtensionElement("IdmCandidateUsers"),this.showEmpList.length>0?(this.userTaskForm.assignee=this.showEmpList[0].code,this.updateElementTask("assignee"),this.userTaskForm.candidateUsers=[],this.updateElementTask("candidateUsers"),this.addExtensionElement("IdmAssignee",JSON.stringify(this.showEmpList))):(this.userTaskForm.assignee="",this.updateElementTask("assignee")),this.showEmpList.length>1&&(this.showEmpList=[this.showEmpList[0]])):"candidateUsers"===e&&(this.userTaskForm.assignee="",this.updateElementTask("assignee"),this.removeExtensionElement("IdmAssignee"),this.showEmpList.length>0?(this.userTaskForm.candidateUsers=this.showEmpList.map((function(e){return e.code})),this.addExtensionElement("IdmCandidateUsers",JSON.stringify(this.showEmpList))):this.userTaskForm.candidateUsers=[],this.updateElementTask("candidateUsers"))},updateElementTask:function(e){var t=Object.create(null);t[e]="candidateUsers"===e||"candidateGroups"===e?this.userTaskForm[e]&&this.userTaskForm[e].length?this.userTaskForm[e].join():null:this.userTaskForm[e]||null,window.bpmnInstances.modeling.updateProperties(this.bpmnElement,t)}},beforeDestroy:function(){this.bpmnElement=null}},xe=(n("7761"),Object(M.a)(Ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-tabs",{attrs:{"tab-position":"left","before-leave":e.beforeLeaveTab},on:{"tab-click":e.handleTabClick},model:{value:e.assigneeTabType,callback:function(t){e.assigneeTabType=t},expression:"assigneeTabType"}},[n("el-tab-pane",{attrs:{label:"固定值",name:"static"}},[n("el-form-item",{attrs:{label:"分配人员"}},[n("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateElementTask("assignee")}},model:{value:e.userTaskForm.assignee,callback:function(t){e.$set(e.userTaskForm,"assignee",t)},expression:"userTaskForm.assignee"}})],1),n("el-form-item",{staticClass:"tag-list",attrs:{label:"候选人员"}},[e._l(e.userTaskForm.candidateUsers,(function(t){return n("el-tag",{key:t,attrs:{size:"small",closable:"","disable-transitions":!1},on:{close:function(n){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:e.showInput}},[e._v("添加")])],2),n("el-form-item",{staticClass:"tag-list",attrs:{label:"候选角色"}},[e._l(e.userTaskForm.candidateGroups,(function(t){return n("el-tag",{key:t,attrs:{size:"small",closable:"","disable-transitions":!1},on:{close:function(n){return e.handleCloseGroup(t)}}},[e._v(" "+e._s(t)+" ")])})),e.groupInputVisible?n("el-input",{ref:"saveTagInputGroup",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirmGroup},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirmGroup(t)}},model:{value:e.groupInputValue,callback:function(t){e.groupInputValue=t},expression:"groupInputValue"}}):n("el-button",{class:["button-new-tag",e.userTaskForm.candidateGroups&&0===e.userTaskForm.candidateGroups.length?"no-item":""],attrs:{size:"mini"},on:{click:e.showInputGroup}},[e._v("添加")])],2)],1),n("el-tab-pane",{attrs:{label:"身份存储",name:"idm"}},[n("el-form-item",{attrs:{label:"分配"}},[n("el-select",{attrs:{clearable:""},on:{change:e.changeAssigneeType},model:{value:e.currentAssigneeType,callback:function(t){e.currentAssigneeType=t},expression:"currentAssigneeType"}},e._l(e.assigneeTypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"assigneeUser"===e.currentAssigneeType?[n("el-form-item",{attrs:{label:"分配人员"}},[n("emp-selector",{ref:"empSelector",attrs:{visible:e.empSelectorDialogVisible,multiple:!1,placeholder:"请选择人员",width:"800px",form:"",title:"人员选择"},on:{"on-close":function(t){e.empSelectorDialogVisible=!1},"on-submit":e.handleSubmitEmp},model:{value:e.showEmpList,callback:function(t){e.showEmpList=t},expression:"showEmpList"}})],1)]:"candidateUsers"===e.currentAssigneeType?[n("el-form-item",{attrs:{label:"候选人员"}},[n("emp-selector",{ref:"empSelector",attrs:{visible:e.empSelectorDialogVisible,multiple:!0,placeholder:"请选择候选人员",width:"800px",form:"",title:"人员选择"},on:{"on-close":function(t){e.empSelectorDialogVisible=!1},"on-submit":e.handleSubmitEmps},model:{value:e.showEmpList,callback:function(t){e.showEmpList=t},expression:"showEmpList"}})],1)]:e._e(),[n("el-form-item",{attrs:{label:"候选角色"}},[n("role-selector",{ref:"roleSelector",attrs:{visible:e.roleSelectorDialogVisible,multiple:!0,placeholder:"请选择候选角色",width:"800px",form:"",title:"角色选择"},on:{"on-close":function(t){e.roleSelectorDialogVisible=!1},"on-submit":e.handleSubmitRoles},model:{value:e.showRoleList,callback:function(t){e.showRoleList=t},expression:"showRoleList"}})],1)]],2)],1),n("el-row",{staticStyle:{"margin-top":"16px"}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"节点类型"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){return e.updateExtensionElement("nodeType")}},model:{value:e.nodeType,callback:function(t){e.nodeType=t},expression:"nodeType"}},e._l(e.nodeTypeList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"可编辑"}},[n("el-switch",{on:{change:function(t){return e.updateExtensionElement("nodeEditable")}},model:{value:e.nodeEditable,callback:function(t){e.nodeEditable=t},expression:"nodeEditable"}})],1)],1)],1),n("el-form-item",{staticStyle:{"margin-top":"16px"},attrs:{label:"到期时间"}},[n("el-input",{attrs:{clearable:""},on:{focus:e.showDueDateSetting},model:{value:e.userTaskForm.dueDate,callback:function(t){e.$set(e.userTaskForm,"dueDate",t)},expression:"userTaskForm.dueDate"}})],1),n("el-form-item",{attrs:{label:"优先级"}},[n("el-input-number",{attrs:{clearable:"",min:0,max:20,label:"优先级"},on:{change:function(t){return e.updateElementTask("priority")}},model:{value:e.userTaskForm.priority,callback:function(t){e.$set(e.userTaskForm,"priority",t)},expression:"userTaskForm.priority"}})],1),n("el-dialog",{attrs:{title:"任务到期时间配置",visible:e.dueDateFormModelVisible,width:"500px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.dueDateFormModelVisible=t}}},[n("el-form",{ref:"listenerFieldFormRef",staticStyle:{height:"136px"},attrs:{size:"mini","label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"小时："}},[n("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeHour},model:{value:e.dueDateForm.hour,callback:function(t){e.$set(e.dueDateForm,"hour",t)},expression:"dueDateForm.hour"}},[e._l(e.dueDateForm.hourEnum,(function(t){return n("el-radio-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),n("el-radio-button",{attrs:{label:"-1"}},[e._v("自定义")])],2),e.dueDateForm.otherHourVisible?n("el-input-number",{staticStyle:{width:"95px"},attrs:{size:"mini",min:1,max:999},model:{value:e.dueDateForm.otherHour,callback:function(t){e.$set(e.dueDateForm,"otherHour",t)},expression:"dueDateForm.otherHour"}}):e._e()],1),n("el-form-item",{attrs:{label:"天："}},[n("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeDay},model:{value:e.dueDateForm.day,callback:function(t){e.$set(e.dueDateForm,"day",t)},expression:"dueDateForm.day"}},[e._l(e.dueDateForm.commonEnum,(function(t){return n("el-radio-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),n("el-radio-button",{attrs:{label:"-1"}},[e._v("自定义")])],2),e.dueDateForm.otherDayVisible?n("el-input-number",{staticStyle:{width:"95px"},attrs:{size:"mini",min:1,max:999},model:{value:e.dueDateForm.otherDay,callback:function(t){e.$set(e.dueDateForm,"otherDay",t)},expression:"dueDateForm.otherDay"}}):e._e()],1),n("el-form-item",{attrs:{label:"周："}},[n("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeWeek},model:{value:e.dueDateForm.week,callback:function(t){e.$set(e.dueDateForm,"week",t)},expression:"dueDateForm.week"}},[e._l(e.dueDateForm.commonEnum,(function(t){return n("el-radio-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),n("el-radio-button",{attrs:{label:"-1"}},[e._v("自定义")])],2),e.dueDateForm.otherWeekVisible?n("el-input-number",{staticStyle:{width:"95px"},attrs:{size:"mini",min:1,max:999},model:{value:e.dueDateForm.otherWeek,callback:function(t){e.$set(e.dueDateForm,"otherWeek",t)},expression:"dueDateForm.otherWeek"}}):e._e()],1),n("el-form-item",{attrs:{label:"月："}},[n("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeMonth},model:{value:e.dueDateForm.month,callback:function(t){e.$set(e.dueDateForm,"month",t)},expression:"dueDateForm.month"}},[e._l(e.dueDateForm.commonEnum,(function(t){return n("el-radio-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),n("el-radio-button",{attrs:{label:"-1"}},[e._v("自定义")])],2),e.dueDateForm.otherMonthVisible?n("el-input-number",{staticStyle:{width:"95px"},attrs:{size:"mini",min:1,max:999},model:{value:e.dueDateForm.otherMonth,callback:function(t){e.$set(e.dueDateForm,"otherMonth",t)},expression:"dueDateForm.otherMonth"}}):e._e()],1)],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dueDateFormModelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveDueDateForm}},[e._v("确 定")])],1)],2)],1)}),[],!1,null,null,null).exports),Se={name:"ScriptTask",props:{id:String,type:String},data:function(){return{defaultTaskForm:{scriptFormat:"",script:"",resource:"",resultVariable:""},scriptTaskForm:{}}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}}},methods:{resetTaskForm:function(){for(var e in this.defaultTaskForm){var t,n=(null===(t=this.bpmnElement)||void 0===t?void 0:t.businessObject[e])||this.defaultTaskForm[e];this.$set(this.scriptTaskForm,e,n)}this.$set(this.scriptTaskForm,"scriptType",this.scriptTaskForm.script?"inline":"external")},updateElementTask:function(){var e=Object.create(null);e.scriptFormat=this.scriptTaskForm.scriptFormat||null,e.resultVariable=this.scriptTaskForm.resultVariable||null,"inline"===this.scriptTaskForm.scriptType?(e.script=this.scriptTaskForm.script||null,e.resource=null):(e.resource=this.scriptTaskForm.resource||null,e.script=null),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,e)}},beforeDestroy:function(){this.bpmnElement=null}},we=Object(M.a)(Se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-form-item",{attrs:{label:"脚本格式"}},[n("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.scriptFormat,callback:function(t){e.$set(e.scriptTaskForm,"scriptFormat",t)},expression:"scriptTaskForm.scriptFormat"}})],1),n("el-form-item",{attrs:{label:"脚本类型"}},[n("el-select",{model:{value:e.scriptTaskForm.scriptType,callback:function(t){e.$set(e.scriptTaskForm,"scriptType",t)},expression:"scriptTaskForm.scriptType"}},[n("el-option",{attrs:{label:"内联脚本",value:"inline"}}),n("el-option",{attrs:{label:"外部资源",value:"external"}})],1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"inline"===e.scriptTaskForm.scriptType,expression:"scriptTaskForm.scriptType === 'inline'"}],attrs:{label:"脚本"}},[n("el-input",{attrs:{type:"textarea",resize:"vertical",autosize:{minRows:2,maxRows:4},clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.script,callback:function(t){e.$set(e.scriptTaskForm,"script",t)},expression:"scriptTaskForm.script"}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"external"===e.scriptTaskForm.scriptType,expression:"scriptTaskForm.scriptType === 'external'"}],attrs:{label:"资源地址"}},[n("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.resource,callback:function(t){e.$set(e.scriptTaskForm,"resource",t)},expression:"scriptTaskForm.resource"}})],1),n("el-form-item",{attrs:{label:"结果变量"}},[n("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.resultVariable,callback:function(t){e.$set(e.scriptTaskForm,"resultVariable",t)},expression:"scriptTaskForm.resultVariable"}})],1)],1)}),[],!1,null,null,null).exports,Te={name:"ServiceTask",props:{id:String,type:String},data:function(){return{defaultTaskForm:{class:"",expression:"",delegateExpression:""},serviceTaskForm:{},expressionType:"",expressionMsg:"",expressionTypes:[{label:"无",value:""},{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"委托表达式",value:"delegateExpression"}]}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}}},methods:{resetTaskForm:function(){for(var e in this.defaultTaskForm){var t,n,i=void 0;i="none"===e?null!==(t=this.bpmnElement)&&void 0!==t&&t.businessObject[e]?this.bpmnElement.businessObject[e].split(","):[]:(null===(n=this.bpmnElement)||void 0===n?void 0:n.businessObject[e])||this.defaultTaskForm[e],i&&(this.expressionType=e,this.expressionMsg=i)}},updateExpressionType:function(){""===this.expressionType&&(this.expressionMsg=""),this.updateElementTask()},updateElementTask:function(){var e=this;this.expressionTypes.forEach((function(t){var n=Object.create(null);t.value&&(e.expressionType===t.value?n[t.value]=e.expressionMsg||null:n[t.value]=null,window.bpmnInstances.modeling.updateProperties(e.bpmnElement,n))}))}},beforeDestroy:function(){this.bpmnElement=null}},ke=(n("9f60"),Object(M.a)(Te,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-form-item",{attrs:{label:"节点类型"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){return e.updateExpressionType()}},model:{value:e.expressionType,callback:function(t){e.expressionType=t},expression:"expressionType"}},e._l(e.expressionTypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),""!==e.expressionType?n("el-form-item",{staticStyle:{"margin-top":"16px"},attrs:{label:e.expressionTypes.filter((function(t){return t.value===e.expressionType}))[0].label}},[n("el-input",{attrs:{type:"textarea",size:"mini",clearable:"",resize:"vertical",autosize:{minRows:2,maxRows:4}},on:{input:e.updateElementTask,blur:e.updateElementTask},model:{value:e.expressionMsg,callback:function(t){e.expressionMsg=t},expression:"expressionMsg"}})],1):e._e()],1)}),[],!1,null,null,null).exports),Fe={name:"ReceiveTask",props:{id:String,type:String},data:function(){return{bindMessageId:"",newMessageForm:{},messageMap:{},messageModelVisible:!1}},watch:{id:{immediate:!0,handler:function(){var e=this;this.$nextTick((function(){return e.getBindMessage()}))}}},created:function(){var e=this;this.bpmnMessageRefsMap=Object.create(null),this.bpmnRootElements=window.bpmnInstances.modeler.getDefinitions().rootElements,this.bpmnRootElements.filter((function(e){return"bpmn:Message"===e.$type})).forEach((function(t){e.bpmnMessageRefsMap[t.id]=t,e.$set(e.messageMap,t.id,t.name)})),this.$set(this.messageMap,"-1","无")},methods:{getBindMessage:function(){var e,t;this.bpmnElement=window.bpmnInstances.bpmnElement,this.bindMessageId=(null===(e=this.bpmnElement.businessObject)||void 0===e||null===(t=e.messageRef)||void 0===t?void 0:t.id)||"-1"},openMessageModel:function(){this.messageModelVisible=!0,this.newMessageForm={}},createNewMessage:function(){if(this.messageMap[this.newMessageForm.id])this.$message.error("该消息已存在，请修改id后重新保存");else{var e=window.bpmnInstances.moddle.create("bpmn:Message",this.newMessageForm);this.bpmnRootElements.push(e),this.$set(this.messageMap,this.newMessageForm.id,this.newMessageForm.name),this.bpmnMessageRefsMap[this.newMessageForm.id]=e,this.messageModelVisible=!1}},updateTaskMessage:function(e){"-1"===e?window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{messageRef:null}):window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{messageRef:this.bpmnMessageRefsMap[e]})}},beforeDestroy:function(){this.bpmnElement=null}},Ae={name:"ElementTaskConfig",components:{UserTask:xe,ScriptTask:we,ReceiveTask:Object(M.a)(Fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-form-item",{attrs:{label:"消息实例"}},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","flex-wrap":"nowrap"}},[n("el-select",{on:{change:e.updateTaskMessage},model:{value:e.bindMessageId,callback:function(t){e.bindMessageId=t},expression:"bindMessageId"}},e._l(Object.keys(e.messageMap),(function(t){return n("el-option",{key:t,attrs:{value:t,label:e.messageMap[t]}})})),1),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.openMessageModel}})],1)]),n("el-dialog",{attrs:{visible:e.messageModelVisible,"close-on-click-modal":!1,title:"创建新消息",width:"400px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.messageModelVisible=t}}},[n("el-form",{attrs:{model:e.newMessageForm,size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"消息ID"}},[n("el-input",{attrs:{clearable:""},model:{value:e.newMessageForm.id,callback:function(t){e.$set(e.newMessageForm,"id",t)},expression:"newMessageForm.id"}})],1),n("el-form-item",{attrs:{label:"消息名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.newMessageForm.name,callback:function(t){e.$set(e.newMessageForm,"name",t)},expression:"newMessageForm.name"}})],1)],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.createNewMessage}},[e._v("确 认")])],1)],2)],1)}),[],!1,null,null,null).exports,ServiceTask:ke},props:{id:String,type:String},data:function(){return{taskConfigForm:{async:!1,asyncAfter:!1,asyncBefore:!1,exclusive:!1},witchTaskComponent:"",installedComponent:{UserTask:"UserTask",ScriptTask:"ScriptTask",ServiceTask:"ServiceTask",ReceiveTask:"ReceiveTask"}}},watch:{id:{immediate:!0,handler:function(){var e,t,n,i,s,r,a,o;this.bpmnElement=window.bpmnInstances.bpmnElement,this.taskConfigForm.async=null===(e=this.bpmnElement)||void 0===e||null===(t=e.businessObject)||void 0===t?void 0:t.async,this.taskConfigForm.asyncBefore=null===(n=this.bpmnElement)||void 0===n||null===(i=n.businessObject)||void 0===i?void 0:i.asyncBefore,this.taskConfigForm.asyncAfter=null===(s=this.bpmnElement)||void 0===s||null===(r=s.businessObject)||void 0===r?void 0:r.asyncAfter,this.taskConfigForm.exclusive=null===(a=this.bpmnElement)||void 0===a||null===(o=a.businessObject)||void 0===o?void 0:o.exclusive}},type:{immediate:!0,handler:function(){this.witchTaskComponent=this.installedComponent[this.type]}}},methods:{changeTaskAsync:function(){this.taskConfigForm.asyncBefore||this.taskConfigForm.asyncAfter||(this.taskConfigForm.exclusive=!1),window.bpmnInstances.modeling.updateProperties(window.bpmnInstances.bpmnElement,Object(u.a)({},this.taskConfigForm))}}},Ce=Object(M.a)(Ae,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"异步延续"}},[n("el-checkbox",{attrs:{label:"异步"},on:{change:e.changeTaskAsync},model:{value:e.taskConfigForm.async,callback:function(t){e.$set(e.taskConfigForm,"async",t)},expression:"taskConfigForm.async"}})],1),n(e.witchTaskComponent,e._b({tag:"component"},"component",e.$props,!1))],1)],1)}),[],!1,null,null,null).exports,Ie={name:"UserTask",components:{EmpSelector:he,RoleSelector:ve},props:{id:String,type:String},data:function(){return{dynamicTags:[],inputVisible:!1,inputValue:"",groupInputVisible:!1,groupInputValue:"",empSelectorDialogVisible:!0,roleSelectorDialogVisible:!0,showEmpList:[],showRoleList:[],showPersonalSelector:!1,defaultTaskForm:{assigneePersons:[],assigneeType:{},assignee:"",candidateUsers:[],candidateGroups:[],dueDate:"",followUpDate:"",priority:""},userTaskForm:{},mockData:[1,2,3,4,5,6,7,8,9,10],assigneeTypes:[{label:"分配给单个人",value:"assigneeUser"},{label:"候选人员",value:"candidateUsers"},{label:"分配给流程发起人",value:"$INITIATOR"}],currentAssigneeType:"assigneeUser",assigneeType:{},assigneeTabType:"",assigneeUser:{},candidateUsers:{},candidateGroups:{},initUserTask:!1,nodeEditable:"false",nodeType:"0",nodeTypeList:[{label:"普通",value:"0"},{label:"必审",value:"1"},{label:"评审",value:"2"},{label:"协同",value:"3"},{label:"不审",value:"4"},{label:"审批中",value:"5"}]}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}},showEmpList:{immediate:!1,handler:function(e,t){"idm"===this.assigneeTabType&&(e.forEach((function(e){delete e.email,delete e.headImg})),"assigneeUser"===this.currentAssigneeType?(e.length>0?(this.userTaskForm.assignee=e[0].code,this.addExtensionElement("IdmAssignee",JSON.stringify(e))):(this.removeExtensionElement("IdmAssignee"),this.userTaskForm.assignee=""),this.updateElementTask("assignee")):"candidateUsers"===this.currentAssigneeType&&(this.userTaskForm.candidateUsers=e.map((function(e){return e.code})),this.updateElementTask("candidateUsers"),e.length>0?this.addExtensionElement("IdmCandidateUsers",JSON.stringify(e)):(this.removeExtensionElement("IdmCandidateUsers"),this.userTaskForm.assignee="",this.updateElementTask("assignee"))))}},showRoleList:{immediate:!1,handler:function(e,t){"idm"===this.assigneeTabType&&(this.userTaskForm.candidateGroups=e.map((function(e){return e.sn})),this.updateElementTask("candidateGroups"),e.length>0?this.addExtensionElement("IdmCandidateGroups",JSON.stringify(e)):this.removeExtensionElement("IdmCandidateGroups"))}}},methods:{handleClose:function(e){this.userTaskForm.candidateUsers.splice(this.userTaskForm.candidateUsers.indexOf(e),1),this.updateElementTask("candidateUsers")},handleSubmitEmp:function(){},handleSubmitEmps:function(){},handleSubmitRoles:function(){},beforeLeaveTab:function(e,t){var n=this;if(this.userTaskForm.assignee||this.userTaskForm.candidateUsers&&0!==this.userTaskForm.candidateUsers.length||this.userTaskForm.candidateGroups&&0!==this.userTaskForm.candidateGroups.length){if(!this.initUserTask)return this.$confirm("此操作将清除已选的数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.showEmpList=[],n.showRoleList=[],n.userTaskForm.assignee="",n.userTaskForm.candidateUsers=[],n.userTaskForm.candidateGroups=[],n.updateElementTask("assignee"),n.updateElementTask("candidateUsers"),n.updateElementTask("candidateGroups"),setTimeout((function(){n.removeExtensionElements(["IdmAssignee","IdmCandidateUsers","IdmCandidateGroups"])}),500)})).catch((function(){throw new Error("取消成功！")}));this.initUserTask=!1}else this.initUserTask=!1},handleTabClick:function(e){this.addExtensionElement("AssigneeType",e.name)},updateElementExtensions:function(){var e=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions.concat(this.assigneeType)});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:e})},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.userTaskForm.candidateUsers.push(e),this.inputVisible=!1,this.inputValue="",this.updateElementTask("candidateUsers")},handleCloseGroup:function(e){this.userTaskForm.candidateGroups.splice(this.userTaskForm.candidateGroups.indexOf(e),1),this.updateElementTask("candidateGroups")},showInputGroup:function(){var e=this;this.groupInputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInputGroup.$refs.input.focus()}))},handleInputConfirmGroup:function(){var e=this.groupInputValue;e&&this.userTaskForm.candidateGroups.push(e),this.groupInputVisible=!1,this.groupInputValue="",this.updateElementTask("candidateGroups")},resetTaskForm:function(){var e,t,n,i,s,r,a;for(var o in this.defaultTaskForm){var l,p,m=void 0;m="candidateUsers"===o||"candidateGroups"===o?null!==(l=this.bpmnElement)&&void 0!==l&&l.businessObject[o]?this.bpmnElement.businessObject[o].split(","):[]:(null===(p=this.bpmnElement)||void 0===p?void 0:p.businessObject[o])||this.defaultTaskForm[o],this.$set(this.userTaskForm,o,m)}this.elExtensionElements=(null===(e=this.bpmnElement)||void 0===e?void 0:e.businessObject.get("extensionElements"))||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.assigneeType=(null===(t=this.elExtensionElements.values.filter((function(e){return"flowable:AssigneeType"===e.$type})))||void 0===t?void 0:t[0])||window.bpmnInstances.moddle.create("flowable:AssigneeType",{body:"static"}),this.assigneeTabType=this.assigneeType.body,this.assigneeUser=null===(n=this.elExtensionElements.values.filter((function(e){return"flowable:IdmAssignee"===e.$type})))||void 0===n?void 0:n[0],this.candidateUsers=null===(i=this.elExtensionElements.values.filter((function(e){return"flowable:IdmCandidateUsers"===e.$type})))||void 0===i?void 0:i[0],this.assigneeUser&&this.assigneeUser.body?(this.currentAssigneeType="assigneeUser",this.showEmpList=JSON.parse(this.assigneeUser.body)):this.showEmpList=[],this.candidateUsers&&this.candidateUsers.body&&(this.currentAssigneeType="candidateUsers",this.showEmpList=JSON.parse(this.candidateUsers.body)),"$INITIATOR"===this.userTaskForm.assignee&&(this.currentAssigneeType="$INITIATOR"),this.candidateGroups=(null===(s=this.elExtensionElements.values.filter((function(e){return"flowable:IdmCandidateGroups"===e.$type})))||void 0===s?void 0:s[0])||window.bpmnInstances.moddle.create("flowable:IdmCandidateGroups",{body:"[]"}),this.showRoleList=JSON.parse(this.candidateGroups.body),this.initUserTask=!0;var c=null===(r=this.elExtensionElements.values.filter((function(e){return"flowable:NodeType"===e.$type})))||void 0===r?void 0:r[0];c&&c.body&&(this.nodeType=c.body);var u=null===(a=this.elExtensionElements.values.filter((function(e){return"flowable:IsEditdata"===e.$type})))||void 0===a?void 0:a[0];u&&u.body&&(this.nodeEditable="true"===u.body)},updateExtensionElement:function(e){"nodeType"===e?this.nodeType?this.addExtensionElement("NodeType",this.nodeType):this.removeExtensionElement("NodeType"):"nodeEditable"===e&&this.addExtensionElement("IsEditdata",this.nodeEditable?"true":"false")},addExtensionElement:function(e,t){var n,i;this.elExtensionElements=(null===(n=this.bpmnElement)||void 0===n?void 0:n.businessObject.get("extensionElements"))||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&t.$type!=="flowable:".concat(e)}));var s=(null===(i=this.elExtensionElements.values.filter((function(t){return t&&t.$type==="flowable:".concat(e)})))||void 0===i?void 0:i[0])||window.bpmnInstances.moddle.create("flowable:".concat(e),{body:"[]"});s.body=t;var r=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions.concat(s)});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:r})},removeExtensionElement:function(e){this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&t.$type!=="flowable:".concat(e)}));var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:t})},removeExtensionElements:function(e){this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&!e.some((function(e){return"flowable:".concat(e)===t.$type}))}));var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:t})},changeAssigneeType:function(e){this.userTaskForm.assignee="",this.userTaskForm.candidateUsers=[],"$INITIATOR"===e?(this.userTaskForm.assignee=e,this.updateElementTask("assignee"),this.userTaskForm.candidateUsers=[],this.updateElementTask("candidateUsers"),this.removeExtensionElements(["IdmCandidateUsers","IdmAssignee"]),this.showEmpList=[]):"assigneeUser"===e?(this.removeExtensionElement("IdmCandidateUsers"),this.showEmpList.length>0?(this.userTaskForm.assignee=this.showEmpList[0].code,this.updateElementTask("assignee"),this.userTaskForm.candidateUsers=[],this.updateElementTask("candidateUsers"),this.addExtensionElement("IdmAssignee",JSON.stringify(this.showEmpList))):(this.userTaskForm.assignee="",this.updateElementTask("assignee")),this.showEmpList.length>1&&(this.showEmpList=[this.showEmpList[0]])):"candidateUsers"===e&&(this.userTaskForm.assignee="",this.updateElementTask("assignee"),this.removeExtensionElement("IdmAssignee"),this.showEmpList.length>0?(this.userTaskForm.candidateUsers=this.showEmpList.map((function(e){return e.code})),this.addExtensionElement("IdmCandidateUsers",JSON.stringify(this.showEmpList))):this.userTaskForm.candidateUsers=[],this.updateElementTask("candidateUsers"))},updateElementTask:function(e){var t=Object.create(null);t[e]="candidateUsers"===e||"candidateGroups"===e?this.userTaskForm[e]&&this.userTaskForm[e].length?this.userTaskForm[e].join():null:this.userTaskForm[e]||null,window.bpmnInstances.modeling.updateProperties(this.bpmnElement,t)}},beforeDestroy:function(){this.bpmnElement=null}},De=(n("0c27"),Object(M.a)(Ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-tabs",{attrs:{"tab-position":"left","before-leave":e.beforeLeaveTab},on:{"tab-click":e.handleTabClick},model:{value:e.assigneeTabType,callback:function(t){e.assigneeTabType=t},expression:"assigneeTabType"}},[n("el-tab-pane",{attrs:{label:"固定值",name:"static"}},[n("el-form-item",{attrs:{label:"分配人员"}},[n("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateElementTask("assignee")}},model:{value:e.userTaskForm.assignee,callback:function(t){e.$set(e.userTaskForm,"assignee",t)},expression:"userTaskForm.assignee"}})],1),n("el-form-item",{staticClass:"tag-list",attrs:{label:"候选人员"}},[e._l(e.userTaskForm.candidateUsers,(function(t){return n("el-tag",{key:t,attrs:{size:"small",closable:"","disable-transitions":!1},on:{close:function(n){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:e.showInput}},[e._v("添加")])],2),n("el-form-item",{staticClass:"tag-list",attrs:{label:"候选角色"}},[e._l(e.userTaskForm.candidateGroups,(function(t){return n("el-tag",{key:t,attrs:{size:"small",closable:"","disable-transitions":!1},on:{close:function(n){return e.handleCloseGroup(t)}}},[e._v(" "+e._s(t)+" ")])})),e.groupInputVisible?n("el-input",{ref:"saveTagInputGroup",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirmGroup},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirmGroup(t)}},model:{value:e.groupInputValue,callback:function(t){e.groupInputValue=t},expression:"groupInputValue"}}):n("el-button",{class:["button-new-tag",e.userTaskForm.candidateGroups&&0===e.userTaskForm.candidateGroups.length?"no-item":""],attrs:{size:"mini"},on:{click:e.showInputGroup}},[e._v("添加")])],2)],1),n("el-tab-pane",{attrs:{label:"身份存储",name:"idm"}},[n("el-form-item",{attrs:{label:"分配"}},[n("el-select",{attrs:{clearable:""},on:{change:e.changeAssigneeType},model:{value:e.currentAssigneeType,callback:function(t){e.currentAssigneeType=t},expression:"currentAssigneeType"}},e._l(e.assigneeTypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"assigneeUser"===e.currentAssigneeType?[n("el-form-item",{attrs:{label:"分配人员"}},[n("emp-selector",{ref:"empSelector",attrs:{visible:e.empSelectorDialogVisible,multiple:!1,placeholder:"请选择人员",width:"800px",form:"",title:"人员选择"},on:{"on-close":function(t){e.empSelectorDialogVisible=!1},"on-submit":e.handleSubmitEmp},model:{value:e.showEmpList,callback:function(t){e.showEmpList=t},expression:"showEmpList"}})],1)]:"candidateUsers"===e.currentAssigneeType?[n("el-form-item",{attrs:{label:"候选人员"}},[n("emp-selector",{ref:"empSelector",attrs:{visible:e.empSelectorDialogVisible,multiple:!0,placeholder:"请选择候选人员",width:"800px",form:"",title:"人员选择"},on:{"on-close":function(t){e.empSelectorDialogVisible=!1},"on-submit":e.handleSubmitEmps},model:{value:e.showEmpList,callback:function(t){e.showEmpList=t},expression:"showEmpList"}})],1)]:e._e(),[n("el-form-item",{attrs:{label:"候选角色"}},[n("role-selector",{ref:"roleSelector",attrs:{visible:e.roleSelectorDialogVisible,multiple:!0,placeholder:"请选择候选角色",width:"800px",form:"",title:"角色选择"},on:{"on-close":function(t){e.roleSelectorDialogVisible=!1},"on-submit":e.handleSubmitRoles},model:{value:e.showRoleList,callback:function(t){e.showRoleList=t},expression:"showRoleList"}})],1)]],2)],1),n("el-row",{staticStyle:{"margin-top":"16px"}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"节点类型"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){return e.updateExtensionElement("nodeType")}},model:{value:e.nodeType,callback:function(t){e.nodeType=t},expression:"nodeType"}},e._l(e.nodeTypeList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"可编辑"}},[n("el-switch",{on:{change:function(t){return e.updateExtensionElement("nodeEditable")}},model:{value:e.nodeEditable,callback:function(t){e.nodeEditable=t},expression:"nodeEditable"}})],1)],1)],1),n("el-form-item",{staticStyle:{"margin-top":"16px"},attrs:{label:"到期时间"}},[n("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateElementTask("dueDate")}},model:{value:e.userTaskForm.dueDate,callback:function(t){e.$set(e.userTaskForm,"dueDate",t)},expression:"userTaskForm.dueDate"}})],1),n("el-form-item",{attrs:{label:"优先级"}},[n("el-input-number",{attrs:{clearable:"",min:0,max:20,label:"优先级"},on:{change:function(t){return e.updateElementTask("priority")}},model:{value:e.userTaskForm.priority,callback:function(t){e.$set(e.userTaskForm,"priority",t)},expression:"userTaskForm.priority"}})],1)],1)}),[],!1,null,null,null).exports),Le={name:"ScriptTask",props:{id:String,type:String},data:function(){return{defaultTaskForm:{scriptFormat:"",script:"",resource:"",resultVariable:""},scriptTaskForm:{}}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}}},methods:{resetTaskForm:function(){for(var e in this.defaultTaskForm){var t,n=(null===(t=this.bpmnElement)||void 0===t?void 0:t.businessObject[e])||this.defaultTaskForm[e];this.$set(this.scriptTaskForm,e,n)}this.$set(this.scriptTaskForm,"scriptType",this.scriptTaskForm.script?"inline":"external")},updateElementTask:function(){var e=Object.create(null);e.scriptFormat=this.scriptTaskForm.scriptFormat||null,e.resultVariable=this.scriptTaskForm.resultVariable||null,"inline"===this.scriptTaskForm.scriptType?(e.script=this.scriptTaskForm.script||null,e.resource=null):(e.resource=this.scriptTaskForm.resource||null,e.script=null),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,e)}},beforeDestroy:function(){this.bpmnElement=null}},Oe=Object(M.a)(Le,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-form-item",{attrs:{label:"脚本格式"}},[n("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.scriptFormat,callback:function(t){e.$set(e.scriptTaskForm,"scriptFormat",t)},expression:"scriptTaskForm.scriptFormat"}})],1),n("el-form-item",{attrs:{label:"脚本类型"}},[n("el-select",{model:{value:e.scriptTaskForm.scriptType,callback:function(t){e.$set(e.scriptTaskForm,"scriptType",t)},expression:"scriptTaskForm.scriptType"}},[n("el-option",{attrs:{label:"内联脚本",value:"inline"}}),n("el-option",{attrs:{label:"外部资源",value:"external"}})],1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"inline"===e.scriptTaskForm.scriptType,expression:"scriptTaskForm.scriptType === 'inline'"}],attrs:{label:"脚本"}},[n("el-input",{attrs:{type:"textarea",resize:"vertical",autosize:{minRows:2,maxRows:4},clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.script,callback:function(t){e.$set(e.scriptTaskForm,"script",t)},expression:"scriptTaskForm.script"}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"external"===e.scriptTaskForm.scriptType,expression:"scriptTaskForm.scriptType === 'external'"}],attrs:{label:"资源地址"}},[n("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.resource,callback:function(t){e.$set(e.scriptTaskForm,"resource",t)},expression:"scriptTaskForm.resource"}})],1),n("el-form-item",{attrs:{label:"结果变量"}},[n("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.resultVariable,callback:function(t){e.$set(e.scriptTaskForm,"resultVariable",t)},expression:"scriptTaskForm.resultVariable"}})],1)],1)}),[],!1,null,null,null).exports,_e={name:"ServiceTask",props:{id:String,type:String},data:function(){return{defaultTaskForm:{class:"",expression:"",delegateExpression:""},serviceTaskForm:{},expressionType:"",expressionMsg:"",expressionTypes:[{label:"无",value:""},{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"委托表达式",value:"delegateExpression"}]}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}}},methods:{resetTaskForm:function(){for(var e in this.defaultTaskForm){var t,n,i=void 0;i="none"===e?null!==(t=this.bpmnElement)&&void 0!==t&&t.businessObject[e]?this.bpmnElement.businessObject[e].split(","):[]:(null===(n=this.bpmnElement)||void 0===n?void 0:n.businessObject[e])||this.defaultTaskForm[e],i&&(this.expressionType=e,this.expressionMsg=i)}},updateExpressionType:function(){""===this.expressionType&&(this.expressionMsg=""),this.updateElementTask()},updateElementTask:function(){var e=this;this.expressionTypes.forEach((function(t){var n=Object.create(null);t.value&&(e.expressionType===t.value?n[t.value]=e.expressionMsg||null:n[t.value]=null,window.bpmnInstances.modeling.updateProperties(e.bpmnElement,n))}))}},beforeDestroy:function(){this.bpmnElement=null}},Me=(n("021d"),Object(M.a)(_e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-form-item",{attrs:{label:"节点类型"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){return e.updateExpressionType()}},model:{value:e.expressionType,callback:function(t){e.expressionType=t},expression:"expressionType"}},e._l(e.expressionTypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),""!==e.expressionType?n("el-form-item",{staticStyle:{"margin-top":"16px"},attrs:{label:e.expressionTypes.filter((function(t){return t.value===e.expressionType}))[0].label}},[n("el-input",{attrs:{type:"textarea",size:"mini",clearable:"",resize:"vertical",autosize:{minRows:2,maxRows:4}},on:{input:e.updateElementTask,blur:e.updateElementTask},model:{value:e.expressionMsg,callback:function(t){e.expressionMsg=t},expression:"expressionMsg"}})],1):e._e()],1)}),[],!1,null,null,null).exports),Pe={name:"ReceiveTask",props:{id:String,type:String},data:function(){return{bindMessageId:"",newMessageForm:{},messageMap:{},messageModelVisible:!1}},watch:{id:{immediate:!0,handler:function(){var e=this;this.$nextTick((function(){return e.getBindMessage()}))}}},created:function(){var e=this;this.bpmnMessageRefsMap=Object.create(null),this.bpmnRootElements=window.bpmnInstances.modeler.getDefinitions().rootElements,this.bpmnRootElements.filter((function(e){return"bpmn:Message"===e.$type})).forEach((function(t){e.bpmnMessageRefsMap[t.id]=t,e.$set(e.messageMap,t.id,t.name)})),this.$set(this.messageMap,"-1","无")},methods:{getBindMessage:function(){var e,t;this.bpmnElement=window.bpmnInstances.bpmnElement,this.bindMessageId=(null===(e=this.bpmnElement.businessObject)||void 0===e||null===(t=e.messageRef)||void 0===t?void 0:t.id)||"-1"},openMessageModel:function(){this.messageModelVisible=!0,this.newMessageForm={}},createNewMessage:function(){if(this.messageMap[this.newMessageForm.id])this.$message.error("该消息已存在，请修改id后重新保存");else{var e=window.bpmnInstances.moddle.create("bpmn:Message",this.newMessageForm);this.bpmnRootElements.push(e),this.$set(this.messageMap,this.newMessageForm.id,this.newMessageForm.name),this.bpmnMessageRefsMap[this.newMessageForm.id]=e,this.messageModelVisible=!1}},updateTaskMessage:function(e){"-1"===e?window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{messageRef:null}):window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{messageRef:this.bpmnMessageRefsMap[e]})}},beforeDestroy:function(){this.bpmnElement=null}},Be=Object(M.a)(Pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-form-item",{attrs:{label:"消息实例"}},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","flex-wrap":"nowrap"}},[n("el-select",{on:{change:e.updateTaskMessage},model:{value:e.bindMessageId,callback:function(t){e.bindMessageId=t},expression:"bindMessageId"}},e._l(Object.keys(e.messageMap),(function(t){return n("el-option",{key:t,attrs:{value:t,label:e.messageMap[t]}})})),1),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.openMessageModel}})],1)]),n("el-dialog",{attrs:{visible:e.messageModelVisible,"close-on-click-modal":!1,title:"创建新消息",width:"400px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.messageModelVisible=t}}},[n("el-form",{attrs:{model:e.newMessageForm,size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"消息ID"}},[n("el-input",{attrs:{clearable:""},model:{value:e.newMessageForm.id,callback:function(t){e.$set(e.newMessageForm,"id",t)},expression:"newMessageForm.id"}})],1),n("el-form-item",{attrs:{label:"消息名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.newMessageForm.name,callback:function(t){e.$set(e.newMessageForm,"name",t)},expression:"newMessageForm.name"}})],1)],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.createNewMessage}},[e._v("确 认")])],1)],2)],1)}),[],!1,null,null,null).exports,$e={components:{},props:{visible:Boolean,value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},loadingText:{type:String,default:""},title:{type:String,default:""},width:{type:String,default:"600px"},action:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},computed:{show:function(){return!this.form||this.showForm}},data:function(){return{treeLoading:!1,listLoading:!1,filterText:"",filterEmpText:"",pager:{pageSize:15,pageNum:1,total:0,sizes:[15,30,50,100]},selectedList:this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})})),defaultExpandedKeys:[],listData:[],treeData:[],treeProps:{label:"name",children:"children"},loading:!1,dialogVisible:this.visible,id:"dialog_"+(new Date).getTime(),showForm:!1,roleEmpList:[],roleEmpLoading:!1}},methods:{hideEmpPopover:function(){this.roleEmpList=[]},showEmpPopover:function(e){var t=this;this.roleEmpLoading=!0,this.$axios({method:"POST",url:"/flow/org/role/getPersonalsByRole/"+e,data:{}}).then((function(e){t.roleEmpLoading=!1,t.$nextTick((function(){t.roleEmpList=e.data.map((function(e){return{name:e.name,code:e.code}}))}))})).catch((function(e){t.roleEmpLoading=!1}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)||-1!==t.shortName.indexOf(e)},getTreeData:function(e){var t=this;this.treeLoading=!0,this.$axios({method:"POST",url:"/flow/base/category/getCategories",data:{}}).then((function(e){t.treeLoading=!1;var n=me(e.data,"id","pid");t.treeData=n,t.$nextTick((function(){var e=[];t.treeData&&t.treeData.forEach((function(t){e.push(t.id)})),t.defaultExpandedKeys=e}))})).catch((function(e){t.treeLoading=!1}))},searchEmpHandle:function(){this.pager.pageSize=15,this.pager.pageNum=1,this.pager.total=0,this.getListData({keyword:this.filterEmpText})},getRowKeys:function(e){return e.id},getListData:function(e){var t=this;this.listLoading=!0,this.$axios({method:"POST",url:"/flow/flowable/modelInfo/getPagerModel",data:{query:{pageSize:this.pager.pageSize,pageNum:this.pager.pageNum-1},entity:Object(u.a)({flowableModelType:0,keyword:""},null==e?void 0:e.entity)}}).then((function(e){t.listLoading=!1,e.data.data&&(e.data.data=e.data.data.map((function(e){return{id:e.id,modelId:e.modelId,modelKey:e.modelKey,name:e.name,appSn:e.appSn,appName:e.appName,categoryCode:e.categoryCode,categoryName:e.categoryName,status:e.status,statusName:e.statusName}}))),t.$nextTick((function(){t.pager.total=e.data.total,t.listData=e.data.data;var n=t.$refs.multipleTable;t.selectedList&&t.selectedList.forEach((function(e){t.defaultExpandedKeys.push(e.companyId),t.defaultExpandedKeys.push(e.deptId),n.toggleRowSelection(e,!0)}))}))})).catch((function(e){t.listLoading=!1}))},rowClick:function(e,t,n){var i=this.$refs.multipleTable;this.selectedList.find((function(t){return t.id==e.id}))?i.toggleRowSelection(e,!1):i.toggleRowSelection(e,!0)},rowClickHandle:function(e,t){if("operate"!==t.property){var n=-1!==this.selectedList.findIndex((function(t){return t.id===e.id}));this.selectionChangeHandle(!n,e)}},close:function(){this.dialogVisible=!1},submit:function(){this.$emit("on-submit",this.selectedList)},end:function(){this.loading=!1},handleSizeChange:function(e){this.pager.pageSize=e;var t=this.genQueryParam();this.getListData(t)},handleCurrentChange:function(e){this.pager.pageNum=e;var t=this.genQueryParam();this.getListData(t)},genQueryParam:function(){var e=this.$refs.tree.getCurrentNode(),t={};return e&&(t="1"==e.sourceType?{companyId:e.id}:{deptId:e.id}),t},isChecked:function(e){return this.selectedList.filter((function(t){return t.id===e.id})).length>0},handleSelectionChange:function(e){this.selectedList=e},appendSelectVal:function(e){e&&e.id&&(this.multiple||this.selectedList&&0!==this.selectedList.length&&this.selectedList[0].id===e.id?this.selectedList.find((function(t){return t.id===e.id}))||this.selectedList.push(e):this.selectedList=[e])},selectionChangeHandle:function(e,t){if(e)this.appendSelectVal(t);else{var n=this.selectedList.findIndex((function(e){return e.id===t.id}));n>=0&&this.selectedList.splice(n,1)}},handleNodeClick:function(e){var t={};t.entity={categoryCode:e.code},this.pager.pageNum=1,this.getListData(t)}},mounted:function(){},watch:{filterText:function(e){this.$refs.tree.filter(e)},dialogVisible:function(e){var t=this;e?this.showForm=!0:(this.loading=!1,this.$emit("on-close"),setTimeout((function(){t.showForm=!1}),300))},visible:function(e){e&&(this.filterText="",this.filterEmpText=""),this.dialogVisible=e},value:function(e){this.selectedList=this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})}))}}},Ve=(n("a4ad"),n("f18e"),{components:{ProcessSelectorDialog:Object(M.a)($e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{ref:"elDialog",staticClass:"cus-dialog-container",staticStyle:{padding:"10px"},attrs:{title:e.title,visible:e.dialogVisible,"close-on-click-modal":e.closeOnClickModal,"append-to-body":"",center:"",width:e.width,id:e.id,fullscreen:e.fullscreen},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-container",[n("el-header",{staticStyle:{padding:"0",height:"42px"}},[n("div",{staticClass:"selector-items selector-items-dialog"},[e._l(e.selectedList,(function(t){return n("el-tag",{key:t.id,staticClass:"item",attrs:{size:"small","disable-transitions":"",closable:""},on:{close:function(n){return e.selectionChangeHandle(!1,t)}}},[e._v(" "+e._s(t.name)+" ")])})),e.selectedList.length<=0?n("div",{staticClass:"select-empty"},[e._v("请选择")]):e._e()],2)]),n("el-container",[n("el-aside",{staticStyle:{height:"400px"},attrs:{width:"200px"}},[n("el-card",{attrs:{shadow:"never","body-style":"padding:0;height: 358px;overflow-y:scroll;"}},[n("div",{staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[n("el-input",{attrs:{placeholder:"请输入关键字",size:"mini"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),n("div",[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",staticClass:"filter-tree",attrs:{"highlight-current":"","default-expanded-keys":e.defaultExpandedKeys,"node-key":"id",data:e.treeData,props:e.treeProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{staticStyle:{color:"#67c23a"}},[e._v(e._s(i.name))])])}}])})],1)])],1),n("el-main",{staticStyle:{padding:"0"}},[n("el-card",{attrs:{shadow:"never","body-style":"padding:0;height: 357px;overflow-y:hidden;"}},[n("div",{staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[n("el-input",{attrs:{placeholder:"请输入关键字",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmpHandle(t)}},model:{value:e.filterEmpText,callback:function(t){e.filterEmpText=t},expression:"filterEmpText"}},[n("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.searchEmpHandle},slot:"append"})],1)],1),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{data:e.listData,size:"mini",height:"320",stripe:"","highlight-current-row":!0},on:{"row-click":e.rowClickHandle,select:e.selectionChangeHandle}},[n("el-table-column",{attrs:{label:"选择",property:"operate",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:e.isChecked(t.row)},on:{change:function(n){return e.selectionChangeHandle(n,t.row)}}})]}}])}),n("el-table-column",{attrs:{property:"name",label:"名称"}}),n("el-table-column",{attrs:{property:"modelKey",label:"编码",width:"120"}}),n("el-table-column",{attrs:{property:"statusName",label:"发布状态",width:"80"}}),n("el-table-column",{attrs:{property:"appName",label:"所属应用"}}),n("el-table-column",{attrs:{property:"emps",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"right",title:"",width:"200","open-delay":300,"close-delay":0,trigger:"hover"},on:{show:function(n){return e.showEmpPopover(t.row.id)},hide:function(t){return e.hideEmpPopover()}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.roleEmpLoading,expression:"roleEmpLoading"}],staticClass:"role-emp-items"},[0===e.roleEmpList.length?n("el-alert",{attrs:{title:"暂无预览",type:"info",closable:!1}}):e._e(),e._l(e.roleEmpList,(function(t){return n("el-tag",{key:t.code,attrs:{size:"small"}},[e._v(" "+e._s(t.name)+"("+e._s(t.code)+") ")])}))],2),n("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("查看预览")])],1)]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"center","margin-top":"4px"},attrs:{small:"",background:"","current-page":e.pager.pageNum,"page-size":e.pager.pageSize,"page-sizes":e.pager.sizes,total:e.pager.total,layout:"sizes, total, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)],1)],1),e.action?n("span",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-footer",attrs:{slot:"footer","element-loading-text":e.loadingText},slot:"footer"},[e._t("action",[n("el-button",{on:{click:e.close}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])])],2):e._e()],1)}),[],!1,null,"edfee8da",null).exports},props:{value:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},limit:{type:Number,default:9},disabled:{type:Boolean,default:!1},tip:{type:String,default:""},placeholder:{type:String,default:""},ui:{type:String,default:"element"}},data:function(){return{processSelectorDialogVisible:!1,dataList:this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})})),showSelectedList:[],processSelectorId:"empselector_"+(new Date).getTime(),selectedList:[],processDesignerLoading:!1}},computed:{miniWidth:function(){return this.width>this.height?this.height:this.width}},methods:{handleSubmit:function(e){this.dataList=e,this.processSelectorDialogVisible=!1,this.$emit("input",this.dataList)},showProcessDesignerPopover:function(e){var t=this;this.processDesignerLoading=!0,this.$axios({method:"POST",url:"/flow/org/role/getPersonalsByRole/"+e,data:{}}).then((function(e){t.processDesignerLoading=!1,t.$nextTick((function(){t.selectedList=e.data.map((function(e){return{name:e.name,code:e.code}}))}))})).catch((function(e){t.processDesignerLoading=!1}))},hideProcessDesignerPopover:function(e){this.selectedList=[]},openProcessSelector:function(e){var t=this;if(!this.disabled)if("I"!==e.target.tagName&&"i"!==e.target.tagName){this.processSelectorDialogVisible=!0,this.$refs.processSelector.getTreeData();var n=JSON.parse(JSON.stringify(this.dataList));this.showSelectedList=n}else this.$nextTick((function(){"element"===t.ui?(t.$emit("input",[]),t.dataList=[]):(void 0).$emit("on-field-change",t.$attrs.id,t.dataList)}))}},watch:{value:function(e){this.dataList=this.value.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})}))}}}),je=(n("16a2"),{name:"CallActivity",components:{ProcessSelector:Object(M.a)(Ve,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"selector-items",class:{"is-disabled":e.disabled},attrs:{tabindex:"0",id:e.processSelectorId},on:{click:e.openProcessSelector}},[e._l(e.dataList,(function(t){return n("el-tag",{key:t.id,staticClass:"item",attrs:{size:"small","disable-transitions":""}},[n("el-popover",{attrs:{placement:"bottom",title:"",width:"200","open-delay":300,"close-delay":0,trigger:"hover"},on:{show:function(n){return e.showProcessDesignerPopover(t.id)},hide:function(n){return e.hideProcessDesignerPopover(t.id)}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.processDesignerLoading,expression:"processDesignerLoading"}],staticClass:"role-emp-items"},[0===e.selectedList.length?n("el-alert",{attrs:{title:"暂无预览",type:"info",closable:!1}}):e._e(),e._l(e.selectedList,(function(t){return n("el-tag",{key:t.code,attrs:{size:"small"}},[e._v(" "+e._s(t.name)+"("+e._s(t.code)+") ")])}))],2),n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.name))])])],1)})),e.dataList.length<=0?n("div",{staticClass:"select-empty"},[e._v(e._s(e.placeholder))]):e._e(),e.dataList.length>0&&!e.disabled?n("div",{staticClass:"remove-all"},[n("i",{staticClass:"el-icon-circle-close"})]):e._e(),n("process-selector-dialog",{ref:"processSelector",attrs:{visible:e.processSelectorDialogVisible,multiple:e.multiple,width:"800px",form:"",title:"流程选择"},on:{"on-close":function(t){e.processSelectorDialogVisible=!1},"on-submit":e.handleSubmit},model:{value:e.showSelectedList,callback:function(t){e.showSelectedList=t},expression:"showSelectedList"}})],2)}),[],!1,null,"7c107a92",null).exports},props:{id:String,type:String},data:function(){return{processSelectorDialogVisible:!0,showProcessList:[],defaultCallActivityForm:{calledElement:"",processInstanceName:"",calledElementType:"key",inheritVariables:!1,fallbackToDefaultTenant:!1},callActivityForm:{},expressionType:"",expressionMsg:"",calledElementTypes:[{label:"KEY",value:"key"},{label:"ID",value:"id"}]}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetCallActivityForm()}))}},showProcessList:{immediate:!1,handler:function(e,t){var n="",i="";e&&e.length>0&&(n=e[0].modelKey,e[0].name,i="key"),this.callActivityForm.calledElementType=i,this.updateElementTask("calledElementType"),this.callActivityForm.calledElement=n,this.updateElementTask("calledElement"),n?this.addExtensionElement("ModelBpmnExtension",JSON.stringify(e)):this.removeExtensionElement("ModelBpmnExtension")}}},methods:{resetCallActivityForm:function(){var e,t;for(var n in this.defaultCallActivityForm){var i,s,r=void 0;r="none"===n?null!==(i=this.bpmnElement)&&void 0!==i&&i.businessObject[n]?this.bpmnElement.businessObject[n].split(","):[]:(null===(s=this.bpmnElement)||void 0===s?void 0:s.businessObject[n])||this.defaultCallActivityForm[n],this.$set(this.callActivityForm,n,r)}this.elExtensionElements=(null===(e=this.bpmnElement)||void 0===e?void 0:e.businessObject.get("extensionElements"))||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.modelBpmnExtension=(null===(t=this.elExtensionElements.values.filter((function(e){return"flowable:ModelBpmnExtension"===e.$type})))||void 0===t?void 0:t[0])||window.bpmnInstances.moddle.create("flowable:ModelBpmnExtension",{body:"[]"}),this.showProcessList=JSON.parse(this.modelBpmnExtension.body)},handleSubmitProcess:function(){},updateElementTask:function(e){var t=Object.create(null);t[e]="candidateUsers"===e||"candidateGroups"===e?this.callActivityForm[e]&&this.callActivityForm[e].length?this.callActivityForm[e].join():null:this.callActivityForm[e]||null,window.bpmnInstances.modeling.updateProperties(this.bpmnElement,t)},addExtensionElement:function(e,t){var n,i;this.elExtensionElements=(null===(n=this.bpmnElement)||void 0===n?void 0:n.businessObject.get("extensionElements"))||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&t.$type!=="flowable:".concat(e)}));var s=(null===(i=this.elExtensionElements.values.filter((function(t){return t&&t.$type==="flowable:".concat(e)})))||void 0===i?void 0:i[0])||window.bpmnInstances.moddle.create("flowable:".concat(e),{body:"[]"});s.body=t;var r=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions.concat(s)});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:r})},removeExtensionElement:function(e){this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t&&t.$type!=="flowable:".concat(e)}));var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:t})}},beforeDestroy:function(){this.bpmnElement=null}}),Re=(n("a7c6"),{name:"ElementStructureConfig",components:{UserTask:De,ScriptTask:Oe,ReceiveTask:Be,ServiceTask:Me,CallActivity:Object(M.a)(je,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"16px"}},[n("el-form-item",{staticStyle:{"margin-top":"16px"},attrs:{label:"实例名称"}},[n("el-input",{attrs:{placeholder:"请输入流程实例名称",clearable:""},on:{change:function(t){return e.updateElementTask("processInstanceName")}},model:{value:e.callActivityForm.processInstanceName,callback:function(t){e.$set(e.callActivityForm,"processInstanceName",t)},expression:"callActivityForm.processInstanceName"}})],1),n("el-form-item",{attrs:{label:"被调用流程"}},[n("process-selector",{ref:"processSelector",attrs:{visible:e.processSelectorDialogVisible,multiple:!1,placeholder:"请选择流程",width:"800px",form:"",title:"流程选择"},on:{"on-close":function(t){e.processSelectorDialogVisible=!1},"on-submit":e.handleSubmitProcess},model:{value:e.showProcessList,callback:function(t){e.showProcessList=t},expression:"showProcessList"}})],1),n("el-form-item",{attrs:{label:"继承变量"}},[n("el-checkbox",{attrs:{label:"继承"},on:{change:function(t){return e.updateElementTask("inheritVariables")}},model:{value:e.callActivityForm.inheritVariables,callback:function(t){e.$set(e.callActivityForm,"inheritVariables",t)},expression:"callActivityForm.inheritVariables"}})],1)],1)}),[],!1,null,null,null).exports},props:{id:String,type:String},data:function(){return{taskConfigForm:{async:!1,asyncAfter:!1,asyncBefore:!1,exclusive:!1},witchTaskComponent:"",installedComponent:{UserTask:"UserTask",ScriptTask:"ScriptTask",ServiceTask:"ServiceTask",ReceiveTask:"ReceiveTask",CallActivity:"CallActivity"}}},watch:{id:{immediate:!0,handler:function(){var e,t,n,i,s,r,a,o;this.bpmnElement=window.bpmnInstances.bpmnElement,this.taskConfigForm.async=null===(e=this.bpmnElement)||void 0===e||null===(t=e.businessObject)||void 0===t?void 0:t.async,this.taskConfigForm.asyncBefore=null===(n=this.bpmnElement)||void 0===n||null===(i=n.businessObject)||void 0===i?void 0:i.asyncBefore,this.taskConfigForm.asyncAfter=null===(s=this.bpmnElement)||void 0===s||null===(r=s.businessObject)||void 0===r?void 0:r.asyncAfter,this.taskConfigForm.exclusive=null===(a=this.bpmnElement)||void 0===a||null===(o=a.businessObject)||void 0===o?void 0:o.exclusive}},type:{immediate:!0,handler:function(){this.witchTaskComponent=this.installedComponent[this.type]}}},methods:{changeTaskAsync:function(){this.taskConfigForm.asyncBefore||this.taskConfigForm.asyncAfter||(this.taskConfigForm.exclusive=!1),window.bpmnInstances.modeling.updateProperties(window.bpmnInstances.bpmnElement,Object(u.a)({},this.taskConfigForm))}}}),Ne=Object(M.a)(Re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"异步延续"}},[n("el-checkbox",{attrs:{label:"异步"},on:{change:e.changeTaskAsync},model:{value:e.taskConfigForm.async,callback:function(t){e.$set(e.taskConfigForm,"async",t)},expression:"taskConfigForm.async"}})],1),n(e.witchTaskComponent,e._b({tag:"component"},"component",e.$props,!1))],1)],1)}),[],!1,null,null,null).exports,ze={name:"ElementMultiInstance",props:{businessObject:Object,type:String},inject:{prefix:"prefix"},data:function(){return{loopCharacteristics:"",defaultLoopInstanceForm:{completionCondition:"",loopCardinality:"",extensionElements:[],asyncAfter:!1,asyncBefore:!1,exclusive:!1},loopInstanceForm:{}}},watch:{businessObject:{immediate:!0,handler:function(e){this.bpmnElement=window.bpmnInstances.bpmnElement,this.getElementLoop(e)}}},methods:{getElementLoop:function(e){var t,n,i,s,r,a;return e.loopCharacteristics?"bpmn:StandardLoopCharacteristics"===e.loopCharacteristics.$type?(this.loopCharacteristics="StandardLoop",void(this.loopInstanceForm={})):(!0===e.loopCharacteristics.isSequential?this.loopCharacteristics="SequentialMultiInstance":this.loopCharacteristics="ParallelMultiInstance",this.loopInstanceForm=Object(u.a)(Object(u.a)(Object(u.a)({},this.defaultLoopInstanceForm),e.loopCharacteristics),{},{completionCondition:null!==(t=null===(n=e.loopCharacteristics)||void 0===n||null===(i=n.completionCondition)||void 0===i?void 0:i.body)&&void 0!==t?t:"",loopCardinality:null!==(s=null===(r=e.loopCharacteristics)||void 0===r||null===(a=r.loopCardinality)||void 0===a?void 0:a.body)&&void 0!==s?s:""}),this.multiLoopInstance=window.bpmnInstances.bpmnElement.businessObject.loopCharacteristics,void(e.loopCharacteristics.extensionElements&&e.loopCharacteristics.extensionElements.values&&e.loopCharacteristics.extensionElements.values.length&&this.$set(this.loopInstanceForm,"timeCycle",e.loopCharacteristics.extensionElements.values[0].body))):(this.loopCharacteristics="Null",void(this.loopInstanceForm={}))},changeLoopCharacteristicsType:function(e){var t,n,i,s,r,a,o,l;if("Null"!==e){if("StandardLoop"===e){var p=window.bpmnInstances.moddle.create("bpmn:StandardLoopCharacteristics");return window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:p}),void(this.multiLoopInstance=null)}this.multiLoopInstance="SequentialMultiInstance"===e?window.bpmnInstances.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:!0}):window.bpmnInstances.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{});var m=null===(t=this.businessObject.loopCharacteristics)||void 0===t?void 0:t.collection,c=null===(n=this.businessObject.loopCharacteristics)||void 0===n?void 0:n.elementVariable,u=null!==(i=null===(s=this.businessObject.loopCharacteristics)||void 0===s||null===(r=s.completionCondition)||void 0===r?void 0:r.body)&&void 0!==i?i:"",d=null!==(a=null===(o=this.businessObject.loopCharacteristics)||void 0===o||null===(l=o.loopCardinality)||void 0===l?void 0:l.body)&&void 0!==a?a:"";if(u){var b=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:u});this.multiLoopInstance.completionCondition=b}if(d){var f=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:d});this.multiLoopInstance.loopCardinality=f}m&&(this.multiLoopInstance.collection=m),c&&(this.multiLoopInstance.elementVariable=c),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:this.multiLoopInstance})}else window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:null})},updateLoopCardinality:function(e){var t=null;e&&e.length&&(t=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:e})),window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{loopCardinality:t})},updateLoopCondition:function(e){var t=null;e&&e.length&&(t=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:e})),window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{completionCondition:t})},updateLoopTimeCycle:function(e){var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[window.bpmnInstances.moddle.create("".concat(this.prefix,":FailedJobRetryTimeCycle"),{body:e})]});window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{extensionElements:t})},updateLoopBase:function(){window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{collection:this.loopInstanceForm.collection||null,elementVariable:this.loopInstanceForm.elementVariable||null})},updateLoopAsync:function(e){var t=this.loopInstanceForm,n=t.asyncBefore,i=t.asyncAfter,s=Object.create(null);n||i?s[e]=this.loopInstanceForm[e]:(this.$set(this.loopInstanceForm,"exclusive",!1),s={asyncBefore:!1,asyncAfter:!1,exclusive:!1,extensionElements:null}),window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,s)}},beforeDestroy:function(){this.multiLoopInstance=null,this.bpmnElement=null}},Ue=Object(M.a)(ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"多实例类型"}},[n("el-select",{on:{change:e.changeLoopCharacteristicsType},model:{value:e.loopCharacteristics,callback:function(t){e.loopCharacteristics=t},expression:"loopCharacteristics"}},[n("el-option",{attrs:{label:"并行",value:"ParallelMultiInstance"}}),n("el-option",{attrs:{label:"串行",value:"SequentialMultiInstance"}}),n("el-option",{attrs:{label:"无",value:"Null"}})],1)],1),"ParallelMultiInstance"===e.loopCharacteristics||"SequentialMultiInstance"===e.loopCharacteristics?[n("el-form-item",{key:"loopCardinality",attrs:{label:"基数"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateLoopCardinality},model:{value:e.loopInstanceForm.loopCardinality,callback:function(t){e.$set(e.loopInstanceForm,"loopCardinality",t)},expression:"loopInstanceForm.loopCardinality"}})],1),n("el-form-item",{key:"collection",attrs:{label:"集合"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateLoopBase},model:{value:e.loopInstanceForm.collection,callback:function(t){e.$set(e.loopInstanceForm,"collection",t)},expression:"loopInstanceForm.collection"}})],1),n("el-form-item",{key:"elementVariable",attrs:{label:"元素变量"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateLoopBase},model:{value:e.loopInstanceForm.elementVariable,callback:function(t){e.$set(e.loopInstanceForm,"elementVariable",t)},expression:"loopInstanceForm.elementVariable"}})],1),n("el-form-item",{key:"completionCondition",attrs:{label:"完成条件"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateLoopCondition},model:{value:e.loopInstanceForm.completionCondition,callback:function(t){e.$set(e.loopInstanceForm,"completionCondition",t)},expression:"loopInstanceForm.completionCondition"}})],1)]:e._e()],2)],1)}),[],!1,null,null,null).exports,Ge={name:"FlowCondition",props:{businessObject:Object,type:String},data:function(){return{flowConditionForm:{}}},watch:{businessObject:{immediate:!0,handler:function(){var e=this;this.$nextTick((function(){return e.resetFlowCondition()}))}}},methods:{resetFlowCondition:function(){if(this.bpmnElement=window.bpmnInstances.bpmnElement,this.bpmnElementSource=this.bpmnElement.source,this.bpmnElementSourceRef=this.bpmnElement.businessObject.sourceRef,this.bpmnElementSourceRef&&this.bpmnElementSourceRef.default&&this.bpmnElementSourceRef.default.id===this.bpmnElement.id)this.flowConditionForm={type:"default"};else if(this.bpmnElement.businessObject.conditionExpression){var e=this.bpmnElement.businessObject.conditionExpression;if(this.flowConditionForm=Object(u.a)(Object(u.a)({},e),{},{type:"condition"}),this.flowConditionForm.resource)return this.$set(this.flowConditionForm,"conditionType","script"),void this.$set(this.flowConditionForm,"scriptType","externalScript");if(e.language)return this.$set(this.flowConditionForm,"conditionType","script"),void this.$set(this.flowConditionForm,"scriptType","inlineScript");this.$set(this.flowConditionForm,"conditionType","expression")}else this.flowConditionForm={type:"normal"}},updateFlowType:function(e){return"condition"===e?(this.flowConditionRef=window.bpmnInstances.moddle.create("bpmn:FormalExpression"),void window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:this.flowConditionRef})):"default"===e?(window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:null}),void window.bpmnInstances.modeling.updateProperties(this.bpmnElementSource,{default:this.bpmnElement})):(this.bpmnElementSourceRef.default&&this.bpmnElementSourceRef.default.id===this.bpmnElement.id&&window.bpmnInstances.modeling.updateProperties(this.bpmnElementSource,{default:null}),void window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:null}))},updateFlowCondition:function(){var e,t=this.flowConditionForm,n=t.conditionType,i=t.scriptType,s=t.body,r=t.resource,a=t.language;"expression"===n?e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:s}):"inlineScript"===i?(e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:s,language:a}),this.$set(this.flowConditionForm,"resource","")):(this.$set(this.flowConditionForm,"body",""),e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{resource:r,language:a})),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:e})}},beforeDestroy:function(){this.bpmnElement=null,this.bpmnElementSource=null,this.bpmnElementSourceRef=null}},Je=Object(M.a)(Ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-form",{attrs:{model:e.flowConditionForm,"label-width":"90px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"流转类型"}},[n("el-select",{on:{change:e.updateFlowType},model:{value:e.flowConditionForm.type,callback:function(t){e.$set(e.flowConditionForm,"type",t)},expression:"flowConditionForm.type"}},[n("el-option",{attrs:{label:"普通流转路径",value:"normal"}}),n("el-option",{attrs:{label:"默认流转路径",value:"default"}}),n("el-option",{attrs:{label:"条件流转路径",value:"condition"}})],1)],1),"condition"===e.flowConditionForm.type?n("el-form-item",{key:"condition",attrs:{label:"条件格式"}},[n("el-select",{model:{value:e.flowConditionForm.conditionType,callback:function(t){e.$set(e.flowConditionForm,"conditionType",t)},expression:"flowConditionForm.conditionType"}},[n("el-option",{attrs:{label:"表达式",value:"expression"}}),n("el-option",{attrs:{label:"脚本",value:"script"}})],1)],1):e._e(),e.flowConditionForm.conditionType&&"expression"===e.flowConditionForm.conditionType?n("el-form-item",{key:"express",attrs:{label:"表达式"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.body,callback:function(t){e.$set(e.flowConditionForm,"body",t)},expression:"flowConditionForm.body"}})],1):e._e(),e.flowConditionForm.conditionType&&"script"===e.flowConditionForm.conditionType?[n("el-form-item",{key:"language",attrs:{label:"脚本语言"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.language,callback:function(t){e.$set(e.flowConditionForm,"language",t)},expression:"flowConditionForm.language"}})],1),n("el-form-item",{key:"scriptType",attrs:{label:"脚本类型"}},[n("el-select",{model:{value:e.flowConditionForm.scriptType,callback:function(t){e.$set(e.flowConditionForm,"scriptType",t)},expression:"flowConditionForm.scriptType"}},[n("el-option",{attrs:{label:"内联脚本",value:"inlineScript"}}),n("el-option",{attrs:{label:"外部脚本",value:"externalScript"}})],1)],1),"inlineScript"===e.flowConditionForm.scriptType?n("el-form-item",{key:"body",attrs:{label:"脚本"}},[n("el-input",{attrs:{type:"textarea",clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.body,callback:function(t){e.$set(e.flowConditionForm,"body",t)},expression:"flowConditionForm.body"}})],1):e._e(),"externalScript"===e.flowConditionForm.scriptType?n("el-form-item",{key:"resource",attrs:{label:"资源地址"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.resource,callback:function(t){e.$set(e.flowConditionForm,"resource",t)},expression:"flowConditionForm.resource"}})],1):e._e()]:e._e()],2)],1)}),[],!1,null,null,null).exports,He={name:"SignalAndMassage",data:function(){return{signalList:[],messageList:[],modelVisible:!1,modelType:"",modelObjectForm:{},editingMessageIndex:-1}},computed:{modelConfig:function(){return"message"===this.modelType?{title:"创建消息",idLabel:"消息ID",nameLabel:"消息名称"}:{title:"创建信号",idLabel:"信号ID",nameLabel:"信号名称"}}},mounted:function(){this.initDataList()},methods:{initDataList:function(){var e=this;this.rootElements=window.bpmnInstances.modeler.getDefinitions().rootElements,this.messageIdMap={},this.signalIdMap={},this.messageList=[],this.signalList=[],this.rootElements.forEach((function(t){"bpmn:Message"===t.$type&&(e.messageIdMap[t.id]=!0,e.messageList.push(Object(u.a)({},t))),"bpmn:Signal"===t.$type&&(e.signalIdMap[t.id]=!0,e.signalList.push(Object(u.a)({},t)))}))},openModel:function(e){this.modelType=e,this.modelObjectForm={},this.modelVisible=!0},openMessageForm:function(e,t){var n=this;this.modelType="message",this.editingMessageIndex=t,this.modelObjectForm=-1===t?{}:JSON.parse(JSON.stringify(e)),this.modelVisible=!0,this.$nextTick((function(){n.$refs.modelObjectFormRef&&n.$refs.modelObjectFormRef.clearValidate()}))},removeMessage:function(e,t){var n=this;this.$confirm("确认移除该属性吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.elementPropertyList.splice(t,1),n.bpmnElementPropertyList.splice(t,1),n.updateElementAttributes(n.elementPropertyList),n.resetAttributesList()})).catch((function(){return console.info("操作取消")}))},addNewObject:function(){if("message"===this.modelType){-1===this.editingMessageIndex?this.messageList.push(this.modelObjectForm):this.messageList.splice(this.editingMessageIndex,1,this.modelObjectForm);var e=window.bpmnInstances.moddle.create("bpmn:Message",this.modelObjectForm);this.rootElements.push(e)}else{if(this.signalIdMap[this.modelObjectForm.id])return this.$message.error("该信号已存在，请修改id后重新保存");var t=window.bpmnInstances.moddle.create("bpmn:Signal",this.modelObjectForm);this.rootElements.push(t)}this.modelVisible=!1,this.initDataList()}}},Ke=(n("49b1"),Object(M.a)(He,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("div",{staticClass:"panel-tab__content--title"},[e._m(0),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openModel("message")}}},[e._v("创建新消息")])],1),n("el-table",{attrs:{data:e.messageList,size:"mini",border:""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{label:"消息ID",prop:"id","max-width":"300px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"消息名称",prop:"name","max-width":"300px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openMessageForm(i,s)}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeMessage(i,s)}}},[e._v("移除")])]}}])})],1),n("div",{staticClass:"panel-tab__content--title",staticStyle:{"padding-top":"8px","margin-top":"8px","border-top":"1px solid #eeeeee"}},[e._m(1),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openModel("signal")}}},[e._v("创建新信号")])],1),n("el-table",{attrs:{data:e.signalList,size:"mini",border:""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{label:"信号ID",prop:"id","max-width":"300px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"信号名称",prop:"name","max-width":"300px","show-overflow-tooltip":""}})],1),n("el-dialog",{attrs:{visible:e.modelVisible,title:e.modelConfig.title,"close-on-click-modal":!1,width:"400px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.modelVisible=t}}},[n("el-form",{ref:"modelObjectFormRef",attrs:{model:e.modelObjectForm,size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:e.modelConfig.idLabel}},[n("el-input",{attrs:{clearable:""},model:{value:e.modelObjectForm.id,callback:function(t){e.$set(e.modelObjectForm,"id",t)},expression:"modelObjectForm.id"}})],1),n("el-form-item",{attrs:{label:e.modelConfig.nameLabel}},[n("el-input",{attrs:{clearable:""},model:{value:e.modelObjectForm.name,callback:function(t){e.$set(e.modelObjectForm,"name",t)},expression:"modelObjectForm.name"}})],1)],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.modelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addNewObject}},[e._v("保 存")])],1)],2)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("i",{staticClass:"el-icon-menu",staticStyle:{"margin-right":"8px",color:"#555555"}}),e._v("消息列表")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("i",{staticClass:"el-icon-menu",staticStyle:{"margin-right":"8px",color:"#555555"}}),e._v("信号列表")])}],!1,null,null,null).exports);function qe(e){var t=Object(u.a)({},e);if(e.script&&(t=Object(u.a)(Object(u.a)(Object(u.a)({},e),e.script),{},{scriptType:e.script.resource?"externalScript":"inlineScript"})),"timeout"===e.event&&e.eventDefinitions&&e.eventDefinitions.length){var n="";for(var i in e.eventDefinitions[0])console.log(e.eventDefinitions,i),-1!==i.indexOf("time")&&(n=i,t.eventDefinitionType=i.replace("time","").toLowerCase());console.log(n),t.eventTimeDefinitions=e.eventDefinitions[0][n].body}return t}function We(e){var t,n;return e.class&&(n="classListener"),e.expression&&(n="expressionListener"),e.delegateExpression&&(n="delegateExpressionListener"),e.script&&(n="scriptListener"),Object(u.a)(Object(u.a)(Object(u.a)({},JSON.parse(JSON.stringify(e))),null!==(t=e.script)&&void 0!==t?t:{}),{},{listenerType:n})}var Ze={classListener:"Java 类",expressionListener:"表达式",delegateExpressionListener:"代理表达式"},Xe={create:"创建",assignment:"指派",complete:"完成",delete:"删除"},Qe={string:"字符串",expression:"表达式"},Ye={name:"ElementListeners",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{elementListenersList:[],listenerForm:{},listenerFormModelVisible:!1,fieldsListOfListener:[],listenerFieldForm:{},listenerFieldFormModelVisible:!1,editingListenerIndex:-1,editingListenerFieldIndex:-1,listenerTypeObject:Ze,fieldTypeObject:Qe}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length&&this.$nextTick((function(){return t.resetListenersList()}))}}},methods:{resetListenersList:function(){var e,t,n,i,s=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.otherExtensionList=[],this.bpmnElementListeners=null!==(e=null===(t=this.bpmnElement.businessObject)||void 0===t||null===(n=t.extensionElements)||void 0===n||null===(i=n.values)||void 0===i?void 0:i.filter((function(e){return e.$type!=="".concat(s.prefix,":ExecutionListener")&&s.otherExtensionList.push(e),e.$type==="".concat(s.prefix,":ExecutionListener")})))&&void 0!==e?e:[],this.elementListenersList=this.bpmnElementListeners.map((function(e){return We(e)}))},openListenerForm:function(e,t){var n=this;e?(this.listenerForm=qe(e),this.editingListenerIndex=t):(this.listenerForm={},this.editingListenerIndex=-1),e&&e.fields?this.fieldsListOfListener=e.fields.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{fieldType:e.string?"string":"expression"})})):(this.fieldsListOfListener=[],this.$set(this.listenerForm,"fields",[])),this.listenerFormModelVisible=!0,this.$nextTick((function(){n.$refs.listenerFormRef&&n.$refs.listenerFormRef.clearValidate()}))},openListenerFieldForm:function(e,t){var n=this;this.listenerFieldForm=e?JSON.parse(JSON.stringify(e)):{},this.editingListenerFieldIndex=e?t:-1,this.listenerFieldFormModelVisible=!0,this.$nextTick((function(){n.$refs.listenerFieldFormRef&&n.$refs.listenerFieldFormRef.clearValidate()}))},saveListenerFiled:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.listenerFieldFormRef.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:-1===e.editingListenerFieldIndex?(e.fieldsListOfListener.push(e.listenerFieldForm),e.listenerForm.fields.push(e.listenerFieldForm)):(e.fieldsListOfListener.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm),e.listenerForm.fields.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm)),e.listenerFieldFormModelVisible=!1,e.$nextTick((function(){return e.listenerFieldForm={}}));case 8:case"end":return t.stop()}}),t)})))()},removeListenerField:function(e,t){var n=this;this.$confirm("确认移除该字段吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.fieldsListOfListener.splice(t,1),n.listenerForm.fields.splice(t,1)})).catch((function(){return console.info("操作取消")}))},removeListener:function(e,t){var n=this;this.$confirm("确认移除该监听器吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.bpmnElementListeners.splice(t,1),n.elementListenersList.splice(t,1),le(n.bpmnElement,n.otherExtensionList.concat(n.bpmnElementListeners))})).catch((function(){return console.info("操作取消")}))},saveListenerConfig:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.listenerFormRef.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:n=oe(e.listenerForm,!1,e.prefix),-1===e.editingListenerIndex?(e.bpmnElementListeners.push(n),e.elementListenersList.push(e.listenerForm)):(e.bpmnElementListeners.splice(e.editingListenerIndex,1,n),e.elementListenersList.splice(e.editingListenerIndex,1,e.listenerForm)),le(e.bpmnElement,e.otherExtensionList.concat(e.bpmnElementListeners)),e.listenerFormModelVisible=!1,e.listenerForm={};case 10:case"end":return t.stop()}}),t)})))()}}},et=Object(M.a)(Ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-table",{attrs:{data:e.elementListenersList,size:"mini",border:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"事件类型","min-width":"100px",prop:"event"}}),n("el-table-column",{attrs:{label:"监听器类型","min-width":"100px","show-overflow-tooltip":"",formatter:function(t){return e.listenerTypeObject[t.listenerType]}}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerForm(i,s)}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListener(i,s)}}},[e._v("移除")])]}}])})],1),n("div",{staticClass:"element-drawer__button"},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openListenerForm(null)}}},[e._v("添加监听器")])],1),n("el-drawer",{attrs:{visible:e.listenerFormModelVisible,title:"执行监听器",size:e.width+"px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFormModelVisible=t}}},[n("el-form",{ref:"listenerFormRef",attrs:{size:"mini",model:e.listenerForm,"label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"事件类型",prop:"event",rules:{required:!0,trigger:["blur","change"]}}},[n("el-select",{model:{value:e.listenerForm.event,callback:function(t){e.$set(e.listenerForm,"event",t)},expression:"listenerForm.event"}},[n("el-option",{attrs:{label:"开始",value:"start"}}),n("el-option",{attrs:{label:"结束",value:"end"}}),n("el-option",{attrs:{label:"启用",value:"take"}})],1)],1),n("el-form-item",{attrs:{label:"监听器类型",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}}},[n("el-select",{model:{value:e.listenerForm.listenerType,callback:function(t){e.$set(e.listenerForm,"listenerType",t)},expression:"listenerForm.listenerType"}},e._l(Object.keys(e.listenerTypeObject),(function(t){return n("el-option",{key:t,attrs:{label:e.listenerTypeObject[t],value:t}})})),1)],1),"classListener"===e.listenerForm.listenerType?n("el-form-item",{key:"listener-class",attrs:{label:"Java类",prop:"class",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.class,callback:function(t){e.$set(e.listenerForm,"class",t)},expression:"listenerForm.class"}})],1):e._e(),"expressionListener"===e.listenerForm.listenerType?n("el-form-item",{key:"listener-expression",attrs:{label:"表达式",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.expression,callback:function(t){e.$set(e.listenerForm,"expression",t)},expression:"listenerForm.expression"}})],1):e._e(),"delegateExpressionListener"===e.listenerForm.listenerType?n("el-form-item",{key:"listener-delegate",attrs:{label:"代理表达式",prop:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.delegateExpression,callback:function(t){e.$set(e.listenerForm,"delegateExpression",t)},expression:"listenerForm.delegateExpression"}})],1):e._e(),"scriptListener"===e.listenerForm.listenerType?[n("el-form-item",{key:"listener-script-format",attrs:{label:"脚本格式",prop:"scriptFormat",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本格式"}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.scriptFormat,callback:function(t){e.$set(e.listenerForm,"scriptFormat",t)},expression:"listenerForm.scriptFormat"}})],1),n("el-form-item",{key:"listener-script-type",attrs:{label:"脚本类型",prop:"scriptType",rules:{required:!0,trigger:["blur","change"],message:"请选择脚本类型"}}},[n("el-select",{model:{value:e.listenerForm.scriptType,callback:function(t){e.$set(e.listenerForm,"scriptType",t)},expression:"listenerForm.scriptType"}},[n("el-option",{attrs:{label:"内联脚本",value:"inlineScript"}}),n("el-option",{attrs:{label:"外部脚本",value:"externalScript"}})],1)],1),"inlineScript"===e.listenerForm.scriptType?n("el-form-item",{key:"listener-script",attrs:{label:"脚本内容",prop:"value",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本内容"}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.value,callback:function(t){e.$set(e.listenerForm,"value",t)},expression:"listenerForm.value"}})],1):e._e(),"externalScript"===e.listenerForm.scriptType?n("el-form-item",{key:"listener-resource",attrs:{label:"资源地址",prop:"resource",rules:{required:!0,trigger:["blur","change"],message:"请填写资源地址"}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.resource,callback:function(t){e.$set(e.listenerForm,"resource",t)},expression:"listenerForm.resource"}})],1):e._e()]:e._e()],2),n("el-divider"),n("p",{staticClass:"listener-filed__title"},[n("span",[n("i",{staticClass:"el-icon-menu"}),e._v("注入字段：")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openListenerFieldForm(null)}}},[e._v("添加字段")])],1),n("el-table",{staticStyle:{flex:"none"},attrs:{data:e.fieldsListOfListener,size:"mini","max-height":"240",border:"",fit:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"字段名称","min-width":"100px",prop:"name"}}),n("el-table-column",{attrs:{label:"字段类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.fieldTypeObject[t.fieldType]}}}),n("el-table-column",{attrs:{label:"字段值/表达式","min-width":"100px","show-overflow-tooltip":"",formatter:function(e){return e.string||e.expression}}}),n("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerFieldForm(i,s)}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListenerField(i,s)}}},[e._v("移除")])]}}])})],1),n("div",{staticClass:"element-drawer__button"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFormModelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerConfig}},[e._v("保 存")])],1)],1),n("el-dialog",{attrs:{title:"字段配置",visible:e.listenerFieldFormModelVisible,width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFieldFormModelVisible=t}}},[n("el-form",{ref:"listenerFieldFormRef",staticStyle:{height:"136px"},attrs:{model:e.listenerFieldForm,size:"mini","label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"字段名称：",prop:"name",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.name,callback:function(t){e.$set(e.listenerFieldForm,"name",t)},expression:"listenerFieldForm.name"}})],1),n("el-form-item",{attrs:{label:"字段类型：",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}}},[n("el-select",{model:{value:e.listenerFieldForm.fieldType,callback:function(t){e.$set(e.listenerFieldForm,"fieldType",t)},expression:"listenerFieldForm.fieldType"}},e._l(Object.keys(e.fieldTypeObject),(function(t){return n("el-option",{key:t,attrs:{label:e.fieldTypeObject[t],value:t}})})),1)],1),"string"===e.listenerFieldForm.fieldType?n("el-form-item",{key:"field-string",attrs:{label:"字段值：",prop:"string",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.string,callback:function(t){e.$set(e.listenerFieldForm,"string",t)},expression:"listenerFieldForm.string"}})],1):e._e(),"expression"===e.listenerFieldForm.fieldType?n("el-form-item",{key:"field-expression",attrs:{label:"表达式：",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.expression,callback:function(t){e.$set(e.listenerFieldForm,"expression",t)},expression:"listenerFieldForm.expression"}})],1):e._e()],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFieldFormModelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerFiled}},[e._v("确 定")])],1)],2)],1)}),[],!1,null,null,null).exports,tt=(n("13d5"),{name:"ElementProperties",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{elementPropertyList:[],propertyForm:{},editingPropertyIndex:-1,propertyFormModelVisible:!1}},watch:{id:{immediate:!0,handler:function(e){e&&e.length&&this.resetAttributesList()}}},methods:{resetAttributesList:function(){var e,t,n,i,s,r=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.otherExtensionList=[],this.bpmnElementProperties=null!==(e=null===(t=this.bpmnElement.businessObject)||void 0===t||null===(n=t.extensionElements)||void 0===n||null===(i=n.values)||void 0===i?void 0:i.filter((function(e){return e.$type!=="".concat(r.prefix,":Properties")&&r.otherExtensionList.push(e),e.$type==="".concat(r.prefix,":Properties")})))&&void 0!==e?e:[],this.bpmnElementPropertyList=this.bpmnElementProperties.reduce((function(e,t){return e.concat(t.values)}),[]),this.elementPropertyList=JSON.parse(JSON.stringify(null!==(s=this.bpmnElementPropertyList)&&void 0!==s?s:[]))},openAttributesForm:function(e,t){var n=this;this.editingPropertyIndex=t,this.propertyForm=-1===t?{}:JSON.parse(JSON.stringify(e)),this.propertyFormModelVisible=!0,this.$nextTick((function(){n.$refs.attributeFormRef&&n.$refs.attributeFormRef.clearValidate()}))},removeAttributes:function(e,t){var n=this;this.$confirm("确认移除该属性吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.elementPropertyList.splice(t,1),n.bpmnElementPropertyList.splice(t,1),n.updateElementAttributes(n.elementPropertyList),n.resetAttributesList()})).catch((function(){return console.info("操作取消")}))},saveAttribute:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.attributeFormRef.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:-1===e.editingPropertyIndex?e.elementPropertyList.push(e.propertyForm):e.elementPropertyList.splice(e.editingPropertyIndex,1,e.propertyForm),e.updateElementAttributes(e.elementPropertyList),e.propertyFormModelVisible=!1,e.resetAttributesList();case 9:case"end":return t.stop()}}),t)})))()},updateElementAttributes:function(e){var t,n=this,i=window.bpmnInstances.moddle.create("".concat(this.prefix,":Properties"),{values:e.map((function(e){return window.bpmnInstances.moddle.create("".concat(n.prefix,":Property"),{name:e.name,value:e.value})}))}),s=window.bpmnInstances.elementRegistry.get(this.bpmnElement.id),r=s.businessObject.get("extensionElements"),a=(null==r||null===(t=r.get("values"))||void 0===t?void 0:t.filter((function(e){return e.$type!=="".concat(n.prefix,":Properties")})))||[],o=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:a.concat([i])});this.updateElementExtensions(s,o)},updateElementExtensions:function(e,t){window.bpmnInstances.modeling.updateProperties(e,{extensionElements:t})}}}),nt=Object(M.a)(tt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-table",{attrs:{data:e.elementPropertyList,size:"mini","max-height":"240",border:"",fit:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"属性名",prop:"name","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"属性值",prop:"value","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openAttributesForm(i,s)}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeAttributes(i,s)}}},[e._v("移除")])]}}])})],1),n("div",{staticClass:"element-drawer__button"},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openAttributesForm(null,-1)}}},[e._v("添加属性")])],1),n("el-dialog",{attrs:{visible:e.propertyFormModelVisible,title:"属性配置",width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.propertyFormModelVisible=t}}},[n("el-form",{ref:"attributeFormRef",attrs:{model:e.propertyForm,"label-width":"80px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"属性名：",prop:"name"}},[n("el-input",{attrs:{clearable:""},model:{value:e.propertyForm.name,callback:function(t){e.$set(e.propertyForm,"name",t)},expression:"propertyForm.name"}})],1),n("el-form-item",{attrs:{label:"属性值：",prop:"value"}},[n("el-input",{attrs:{clearable:""},model:{value:e.propertyForm.value,callback:function(t){e.$set(e.propertyForm,"value",t)},expression:"propertyForm.value"}})],1)],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.propertyFormModelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveAttribute}},[e._v("确 定")])],1)],2)],1)}),[],!1,null,null,null).exports,it={name:"ElementForm",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{formKey:"",businessKey:"",optionModelTitle:"",fieldList:[],formFieldForm:{},fieldType:{long:"长整型",string:"字符串",boolean:"布尔类",date:"日期类",enum:"枚举类",custom:"自定义类型"},formFieldIndex:-1,formFieldOptionIndex:-1,fieldModelVisible:!1,fieldOptionModelVisible:!1,fieldOptionForm:{},fieldOptionType:"",fieldEnumList:[],fieldConstraintsList:[],fieldPropertiesList:[]}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length&&this.$nextTick((function(){return t.resetFormList()}))}}},methods:{resetFormList:function(){var e,t=this;this.bpmnELement=window.bpmnInstances.bpmnElement,this.formKey=this.bpmnELement.businessObject.formKey,this.elExtensionElements=this.bpmnELement.businessObject.get("extensionElements")||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.formData=(null===(e=this.elExtensionElements.values.filter((function(e){return e.$type==="".concat(t.prefix,":FormData")})))||void 0===e?void 0:e[0])||window.bpmnInstances.moddle.create("".concat(this.prefix,":FormData"),{fields:[]}),this.businessKey=this.formData.businessKey,this.otherExtensions=this.elExtensionElements.values.filter((function(e){return e.$type!=="".concat(t.prefix,":FormData")})),this.fieldList=JSON.parse(JSON.stringify(this.formData.fields||[])),this.updateElementExtensions()},updateElementFormKey:function(){window.bpmnInstances.modeling.updateProperties(this.bpmnELement,{formKey:this.formKey})},updateElementBusinessKey:function(){window.bpmnInstances.modeling.updateModdleProperties(this.bpmnELement,this.formData,{businessKey:this.businessKey})},changeFieldTypeType:function(e){this.$set(this.formFieldForm,"type","custom"===e?"":e)},openFieldForm:function(e,t){if(this.formFieldIndex=t,-1!==t){var n,i,s=this.formData.fields[t];this.formFieldForm=JSON.parse(JSON.stringify(e)),this.$set(this.formFieldForm,"typeType",this.fieldType[e.type]?e.type:"custom"),"enum"===e.type&&(this.fieldEnumList=JSON.parse(JSON.stringify((null==s?void 0:s.values)||[]))),this.fieldConstraintsList=JSON.parse(JSON.stringify((null==s||null===(n=s.validation)||void 0===n?void 0:n.constraints)||[])),this.fieldPropertiesList=JSON.parse(JSON.stringify((null==s||null===(i=s.properties)||void 0===i?void 0:i.values)||[]))}else this.formFieldForm={},this.fieldEnumList=[],this.fieldConstraintsList=[],this.fieldPropertiesList=[];this.fieldModelVisible=!0},openFieldOptionForm:function(e,t,n){return this.fieldOptionModelVisible=!0,this.fieldOptionType=n,this.formFieldOptionIndex=t,"property"===n?(this.fieldOptionForm=e?JSON.parse(JSON.stringify(e)):{},this.optionModelTitle="属性配置"):"enum"===n?(this.fieldOptionForm=e?JSON.parse(JSON.stringify(e)):{},this.optionModelTitle="枚举值配置"):(this.fieldOptionForm=e?JSON.parse(JSON.stringify(e)):{},this.optionModelTitle="约束条件配置")},saveFieldOption:function(){-1===this.formFieldOptionIndex?("property"===this.fieldOptionType&&this.fieldPropertiesList.push(this.fieldOptionForm),"constraint"===this.fieldOptionType&&this.fieldConstraintsList.push(this.fieldOptionForm),"enum"===this.fieldOptionType&&this.fieldEnumList.push(this.fieldOptionForm)):("property"===this.fieldOptionType&&this.fieldPropertiesList.splice(this.formFieldOptionIndex,1,this.fieldOptionForm),"constraint"===this.fieldOptionType&&this.fieldConstraintsList.splice(this.formFieldOptionIndex,1,this.fieldOptionForm),"enum"===this.fieldOptionType&&this.fieldEnumList.splice(this.formFieldOptionIndex,1,this.fieldOptionForm)),this.fieldOptionModelVisible=!1,this.fieldOptionForm={}},saveField:function(){var e=this,t=this.formFieldForm,n=t.id,i=t.type,s=t.label,r=t.defaultValue,a=t.datePattern,o=window.bpmnInstances.moddle.create("".concat(this.prefix,":FormField"),{id:n,type:i,label:s});if(r&&(o.defaultValue=r),a&&(o.datePattern=a),this.fieldPropertiesList&&this.fieldPropertiesList.length){var l=this.fieldPropertiesList.map((function(t){return window.bpmnInstances.moddle.create("".concat(e.prefix,":Property"),{id:t.id,value:t.value})}));o.properties=window.bpmnInstances.moddle.create("".concat(this.prefix,":Properties"),{values:l})}if(this.fieldConstraintsList&&this.fieldConstraintsList.length){var p=this.fieldConstraintsList.map((function(t){return window.bpmnInstances.moddle.create("".concat(e.prefix,":Constraint"),{name:t.name,config:t.config})}));o.validation=window.bpmnInstances.moddle.create("".concat(this.prefix,":Validation"),{constraints:p})}this.fieldEnumList&&this.fieldEnumList.length&&(o.values=this.fieldEnumList.map((function(t){return window.bpmnInstances.moddle.create("".concat(e.prefix,":Value"),{name:t.name,id:t.id})}))),-1===this.formFieldIndex?(this.fieldList.push(this.formFieldForm),this.formData.fields.push(o)):(this.fieldList.splice(this.formFieldIndex,1,this.formFieldForm),this.formData.fields.splice(this.formFieldIndex,1,o)),this.updateElementExtensions(),this.fieldModelVisible=!1},removeFieldOptionItem:function(e,t,n){"property"!==n?"enum"!==n?this.fieldConstraintsList.splice(t,1):this.fieldEnumList.splice(t,1):this.fieldPropertiesList.splice(t,1)},removeField:function(e,t){this.fieldList.splice(t,1),this.formData.fields.splice(t,1),this.updateElementExtensions()},updateElementExtensions:function(){var e=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions.concat(this.formData)});window.bpmnInstances.modeling.updateProperties(this.bpmnELement,{extensionElements:e})}}},st=Object(M.a)(it,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-form",{attrs:{size:"mini","label-width":"80px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"表单标识"}},[n("el-input",{attrs:{clearable:""},on:{change:e.updateElementFormKey},model:{value:e.formKey,callback:function(t){e.formKey=t},expression:"formKey"}})],1),n("el-form-item",{attrs:{label:"业务标识"}},[n("el-select",{on:{change:e.updateElementBusinessKey},model:{value:e.businessKey,callback:function(t){e.businessKey=t},expression:"businessKey"}},[e._l(e.fieldList,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})})),n("el-option",{attrs:{label:"无",value:""}})],2)],1)],1),n("div",{staticClass:"element-property list-property"},[n("el-divider",[n("i",{staticClass:"el-icon-coin"}),e._v(" 表单字段")]),n("el-table",{attrs:{data:e.fieldList,size:"mini","max-height":"240",border:"",fit:""}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50px"}}),n("el-table-column",{attrs:{label:"字段名称",prop:"label","min-width":"80px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"字段类型",prop:"type","min-width":"80px",formatter:function(t){return e.fieldType[t.type]||t.type},"show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"默认值",prop:"defaultValue","min-width":"80px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openFieldForm(i,s)}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeField(i,s)}}},[e._v("移除")])]}}])})],1)],1),n("div",{staticClass:"element-drawer__button"},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openFieldForm(null,-1)}}},[e._v("添加字段")])],1),n("el-drawer",{attrs:{visible:e.fieldModelVisible,title:"字段配置",size:e.width+"px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.fieldModelVisible=t}}},[n("el-form",{attrs:{model:e.formFieldForm,"label-width":"90px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"字段ID"}},[n("el-input",{attrs:{clearable:""},model:{value:e.formFieldForm.id,callback:function(t){e.$set(e.formFieldForm,"id",t)},expression:"formFieldForm.id"}})],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{placeholder:"请选择字段类型",clearable:""},on:{change:e.changeFieldTypeType},model:{value:e.formFieldForm.typeType,callback:function(t){e.$set(e.formFieldForm,"typeType",t)},expression:"formFieldForm.typeType"}},e._l(e.fieldType,(function(e,t){return n("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),"custom"===e.formFieldForm.typeType?n("el-form-item",{attrs:{label:"类型名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.formFieldForm.type,callback:function(t){e.$set(e.formFieldForm,"type",t)},expression:"formFieldForm.type"}})],1):e._e(),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.formFieldForm.label,callback:function(t){e.$set(e.formFieldForm,"label",t)},expression:"formFieldForm.label"}})],1),"date"===e.formFieldForm.typeType?n("el-form-item",{attrs:{label:"时间格式"}},[n("el-input",{attrs:{clearable:""},model:{value:e.formFieldForm.datePattern,callback:function(t){e.$set(e.formFieldForm,"datePattern",t)},expression:"formFieldForm.datePattern"}})],1):e._e(),n("el-form-item",{attrs:{label:"默认值"}},[n("el-input",{attrs:{clearable:""},model:{value:e.formFieldForm.defaultValue,callback:function(t){e.$set(e.formFieldForm,"defaultValue",t)},expression:"formFieldForm.defaultValue"}})],1)],1),"enum"===e.formFieldForm.type?[n("el-divider",{key:"enum-divider"}),n("p",{key:"enum-title",staticClass:"listener-filed__title"},[n("span",[n("i",{staticClass:"el-icon-menu"}),e._v("枚举值列表：")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openFieldOptionForm(null,-1,"enum")}}},[e._v("添加枚举值")])],1),n("el-table",{key:"enum-table",attrs:{data:e.fieldEnumList,size:"mini","max-height":"240",border:"",fit:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"枚举值编号",prop:"id","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"枚举值名称",prop:"name","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openFieldOptionForm(i,s,"enum")}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeFieldOptionItem(i,s,"enum")}}},[e._v("移除")])]}}],null,!1,1977609051)})],1)]:e._e(),n("el-divider",{key:"validation-divider"}),n("p",{key:"validation-title",staticClass:"listener-filed__title"},[n("span",[n("i",{staticClass:"el-icon-menu"}),e._v("约束条件列表：")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openFieldOptionForm(null,-1,"constraint")}}},[e._v("添加约束")])],1),n("el-table",{key:"validation-table",attrs:{data:e.fieldConstraintsList,size:"mini","max-height":"240",border:"",fit:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"约束名称",prop:"name","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"约束配置",prop:"config","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openFieldOptionForm(i,s,"constraint")}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeFieldOptionItem(i,s,"constraint")}}},[e._v("移除")])]}}])})],1),n("el-divider",{key:"property-divider"}),n("p",{key:"property-title",staticClass:"listener-filed__title"},[n("span",[n("i",{staticClass:"el-icon-menu"}),e._v("字段属性列表：")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openFieldOptionForm(null,-1,"property")}}},[e._v("添加属性")])],1),n("el-table",{key:"property-table",attrs:{data:e.fieldPropertiesList,size:"mini","max-height":"240",border:"",fit:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"属性编号",prop:"id","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"属性值",prop:"value","min-width":"100px","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openFieldOptionForm(i,s,"property")}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeFieldOptionItem(i,s,"property")}}},[e._v("移除")])]}}])})],1),n("div",{staticClass:"element-drawer__button"},[n("el-button",{attrs:{size:"mini"}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveField}},[e._v("保 存")])],1)],2),n("el-dialog",{attrs:{visible:e.fieldOptionModelVisible,title:e.optionModelTitle,width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.fieldOptionModelVisible=t}}},[n("el-form",{attrs:{model:e.fieldOptionForm,size:"mini","label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},["constraint"!==e.fieldOptionType?n("el-form-item",{key:"option-id",attrs:{label:"编号/ID"}},[n("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.id,callback:function(t){e.$set(e.fieldOptionForm,"id",t)},expression:"fieldOptionForm.id"}})],1):e._e(),"property"!==e.fieldOptionType?n("el-form-item",{key:"option-name",attrs:{label:"名称"}},[n("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.name,callback:function(t){e.$set(e.fieldOptionForm,"name",t)},expression:"fieldOptionForm.name"}})],1):e._e(),"constraint"===e.fieldOptionType?n("el-form-item",{key:"option-config",attrs:{label:"配置"}},[n("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.config,callback:function(t){e.$set(e.fieldOptionForm,"config",t)},expression:"fieldOptionForm.config"}})],1):e._e(),"property"===e.fieldOptionType?n("el-form-item",{key:"option-value",attrs:{label:"值"}},[n("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.value,callback:function(t){e.$set(e.fieldOptionForm,"value",t)},expression:"fieldOptionForm.value"}})],1):e._e()],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.fieldOptionModelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveFieldOption}},[e._v("确 定")])],1)],2)],1)}),[],!1,null,null,null).exports,rt={name:"UserTaskListeners",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{elementListenersList:[],listenerEventTypeObject:Xe,listenerTypeObject:Ze,listenerFormModelVisible:!1,listenerForm:{},fieldTypeObject:Qe,fieldsListOfListener:[],listenerFieldFormModelVisible:!1,editingListenerIndex:-1,editingListenerFieldIndex:-1,listenerFieldForm:{}}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length&&this.$nextTick((function(){return t.resetListenersList()}))}}},methods:{resetListenersList:function(){var e,t,n,i,s=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.otherExtensionList=[],this.bpmnElementListeners=null!==(e=null===(t=this.bpmnElement.businessObject)||void 0===t||null===(n=t.extensionElements)||void 0===n||null===(i=n.values)||void 0===i?void 0:i.filter((function(e){return e.$type!=="".concat(s.prefix,":TaskListener")&&s.otherExtensionList.push(e),e.$type==="".concat(s.prefix,":TaskListener")})))&&void 0!==e?e:[],this.elementListenersList=this.bpmnElementListeners.map((function(e){return We(e)}))},openListenerForm:function(e,t){var n=this;e?(this.listenerForm=qe(e),this.editingListenerIndex=t):(this.listenerForm={},this.editingListenerIndex=-1),e&&e.fields?this.fieldsListOfListener=e.fields.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{fieldType:e.string?"string":"expression"})})):(this.fieldsListOfListener=[],this.$set(this.listenerForm,"fields",[])),this.listenerFormModelVisible=!0,this.$nextTick((function(){n.$refs.listenerFormRef&&n.$refs.listenerFormRef.clearValidate()}))},removeListener:function(e,t){var n=this;this.$confirm("确认移除该监听器吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.bpmnElementListeners.splice(t,1),n.elementListenersList.splice(t,1),le(n.bpmnElement,n.otherExtensionList.concat(n.bpmnElementListeners))})).catch((function(){return console.info("操作取消")}))},saveListenerConfig:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.listenerFormRef.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:n=oe(e.listenerForm,!0,e.prefix),-1===e.editingListenerIndex?(e.bpmnElementListeners.push(n),e.elementListenersList.push(e.listenerForm)):(e.bpmnElementListeners.splice(e.editingListenerIndex,1,n),e.elementListenersList.splice(e.editingListenerIndex,1,e.listenerForm)),le(e.bpmnElement,e.otherExtensionList.concat(e.bpmnElementListeners)),e.listenerFormModelVisible=!1,e.listenerForm={};case 10:case"end":return t.stop()}}),t)})))()},openListenerFieldForm:function(e,t){var n=this;this.listenerFieldForm=e?JSON.parse(JSON.stringify(e)):{},this.editingListenerFieldIndex=e?t:-1,this.listenerFieldFormModelVisible=!0,this.$nextTick((function(){n.$refs.listenerFieldFormRef&&n.$refs.listenerFieldFormRef.clearValidate()}))},saveListenerFiled:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.listenerFieldFormRef.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:-1===e.editingListenerFieldIndex?(e.fieldsListOfListener.push(e.listenerFieldForm),e.listenerForm.fields.push(e.listenerFieldForm)):(e.fieldsListOfListener.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm),e.listenerForm.fields.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm)),e.listenerFieldFormModelVisible=!1,e.$nextTick((function(){return e.listenerFieldForm={}}));case 8:case"end":return t.stop()}}),t)})))()},removeListenerField:function(e,t){var n=this;this.$confirm("确认移除该字段吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.fieldsListOfListener.splice(t,1),n.listenerForm.fields.splice(t,1)})).catch((function(){return console.info("操作取消")}))}}},at={name:"MyPropertiesPanel",components:{UserTaskListeners:Object(M.a)(rt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-tab__content"},[n("el-table",{attrs:{data:e.elementListenersList,size:"mini",border:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"事件类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.listenerEventTypeObject[t.event]}}}),n("el-table-column",{attrs:{label:"监听器类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.listenerTypeObject[t.listenerType]}}}),n("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerForm(i,s)}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListener(i,s)}}},[e._v("移除")])]}}])})],1),n("div",{staticClass:"element-drawer__button"},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openListenerForm(null)}}},[e._v("添加监听器")])],1),n("el-drawer",{attrs:{visible:e.listenerFormModelVisible,title:"任务监听器",size:e.width+"px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFormModelVisible=t}}},[n("el-form",{ref:"listenerFormRef",attrs:{size:"mini",model:e.listenerForm,"label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"事件类型",prop:"event",rules:{required:!0,trigger:["blur","change"]}}},[n("el-select",{model:{value:e.listenerForm.event,callback:function(t){e.$set(e.listenerForm,"event",t)},expression:"listenerForm.event"}},e._l(Object.keys(e.listenerEventTypeObject),(function(t){return n("el-option",{key:t,attrs:{label:e.listenerEventTypeObject[t],value:t}})})),1)],1),n("el-form-item",{attrs:{label:"监听器类型",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}}},[n("el-select",{model:{value:e.listenerForm.listenerType,callback:function(t){e.$set(e.listenerForm,"listenerType",t)},expression:"listenerForm.listenerType"}},e._l(Object.keys(e.listenerTypeObject),(function(t){return n("el-option",{key:t,attrs:{label:e.listenerTypeObject[t],value:t}})})),1)],1),"classListener"===e.listenerForm.listenerType?n("el-form-item",{key:"listener-class",attrs:{label:"Java类",prop:"class",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.class,callback:function(t){e.$set(e.listenerForm,"class",t)},expression:"listenerForm.class"}})],1):e._e(),"expressionListener"===e.listenerForm.listenerType?n("el-form-item",{key:"listener-expression",attrs:{label:"表达式",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.expression,callback:function(t){e.$set(e.listenerForm,"expression",t)},expression:"listenerForm.expression"}})],1):e._e(),"delegateExpressionListener"===e.listenerForm.listenerType?n("el-form-item",{key:"listener-delegate",attrs:{label:"代理表达式",prop:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.delegateExpression,callback:function(t){e.$set(e.listenerForm,"delegateExpression",t)},expression:"listenerForm.delegateExpression"}})],1):e._e(),"timeout"===e.listenerForm.event?[n("el-form-item",{key:"eventDefinitionType",attrs:{label:"定时器类型",prop:"eventDefinitionType"}},[n("el-select",{model:{value:e.listenerForm.eventDefinitionType,callback:function(t){e.$set(e.listenerForm,"eventDefinitionType",t)},expression:"listenerForm.eventDefinitionType"}},[n("el-option",{attrs:{label:"日期",value:"date"}}),n("el-option",{attrs:{label:"持续时长",value:"duration"}}),n("el-option",{attrs:{label:"循环",value:"cycle"}}),n("el-option",{attrs:{label:"无",value:"null"}})],1)],1),e.listenerForm.eventDefinitionType&&"null"!==e.listenerForm.eventDefinitionType?n("el-form-item",{key:"eventTimeDefinitions",attrs:{label:"定时器",prop:"eventTimeDefinitions",rules:{required:!0,trigger:["blur","change"],message:"请填写定时器配置"}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.eventTimeDefinitions,callback:function(t){e.$set(e.listenerForm,"eventTimeDefinitions",t)},expression:"listenerForm.eventTimeDefinitions"}})],1):e._e()]:e._e()],2),n("el-divider"),n("p",{staticClass:"listener-filed__title"},[n("span",[n("i",{staticClass:"el-icon-menu"}),e._v("注入字段：")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openListenerFieldForm(null)}}},[e._v("添加字段")])],1),n("el-table",{staticStyle:{flex:"none"},attrs:{data:e.fieldsListOfListener,size:"mini","max-height":"240",border:"",fit:""}},[n("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),n("el-table-column",{attrs:{label:"字段名称","min-width":"100px",prop:"name"}}),n("el-table-column",{attrs:{label:"字段类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.fieldTypeObject[t.fieldType]}}}),n("el-table-column",{attrs:{label:"字段值/表达式","min-width":"100px","show-overflow-tooltip":"",formatter:function(e){return e.string||e.expression}}}),n("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerFieldForm(i,s)}}},[e._v("编辑")]),n("el-divider",{attrs:{direction:"vertical"}}),n("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListenerField(i,s)}}},[e._v("移除")])]}}])})],1),n("div",{staticClass:"element-drawer__button"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFormModelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerConfig}},[e._v("保 存")])],1)],1),n("el-dialog",{attrs:{title:"字段配置",visible:e.listenerFieldFormModelVisible,width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFieldFormModelVisible=t}}},[n("el-form",{ref:"listenerFieldFormRef",staticStyle:{height:"136px"},attrs:{model:e.listenerFieldForm,size:"mini","label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"字段名称：",prop:"name",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.name,callback:function(t){e.$set(e.listenerFieldForm,"name",t)},expression:"listenerFieldForm.name"}})],1),n("el-form-item",{attrs:{label:"字段类型：",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}}},[n("el-select",{model:{value:e.listenerFieldForm.fieldType,callback:function(t){e.$set(e.listenerFieldForm,"fieldType",t)},expression:"listenerFieldForm.fieldType"}},e._l(Object.keys(e.fieldTypeObject),(function(t){return n("el-option",{key:t,attrs:{label:e.fieldTypeObject[t],value:t}})})),1)],1),"string"===e.listenerFieldForm.fieldType?n("el-form-item",{key:"field-string",attrs:{label:"字段值：",prop:"string",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.string,callback:function(t){e.$set(e.listenerFieldForm,"string",t)},expression:"listenerFieldForm.string"}})],1):e._e(),"expression"===e.listenerFieldForm.fieldType?n("el-form-item",{key:"field-expression",attrs:{label:"表达式：",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[n("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.expression,callback:function(t){e.$set(e.listenerFieldForm,"expression",t)},expression:"listenerFieldForm.expression"}})],1):e._e()],1),n("template",{slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFieldFormModelVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerFiled}},[e._v("确 定")])],1)],2)],1)}),[],!1,null,null,null).exports,ElementForm:st,ElementProperties:nt,ElementListeners:et,SignalAndMassage:Ke,FlowCondition:Je,ElementMultiInstance:Ue,ElementTask:Ce,ElementStructure:Ne,ElementOtherConfig:re,ElementBaseInfo:ie},componentName:"MyPropertiesPanel",props:{bpmnModeler:Object,prefix:{type:String,default:"camunda"},width:{type:Number,default:480}},provide:function(){return{prefix:this.prefix,width:this.width}},data:function(){return{showProperties:!0,activeTab:["base","task"],elementId:"",elementType:"",elementBusinessObject:{},conditionFormVisible:!1,formVisible:!1}},watch:{elementId:{handler:function(){this.activeTab=["base","task"]}}},created:function(){this.initModels()},methods:{initModels:function(){var e=this;this.bpmnModeler?(this.timer&&clearTimeout(this.timer),window.bpmnInstances={modeler:this.bpmnModeler,modeling:this.bpmnModeler.get("modeling"),moddle:this.bpmnModeler.get("moddle"),eventBus:this.bpmnModeler.get("eventBus"),bpmnFactory:this.bpmnModeler.get("bpmnFactory"),elementRegistry:this.bpmnModeler.get("elementRegistry"),replace:this.bpmnModeler.get("replace"),selection:this.bpmnModeler.get("selection")},this.bpmnModeler.on("self.event",(function(e,t){console.log("self event",e,t)})),this.getActiveElement()):this.timer=setTimeout((function(){return e.initModels()}),10)},getActiveElement:function(){var e=this;this.initFormOnChanged(null),this.bpmnModeler.on("import.done",(function(t){e.initFormOnChanged(null)})),this.bpmnModeler.on("selection.changed",(function(t){var n=t.newSelection;e.initFormOnChanged(n[0]||null)})),this.bpmnModeler.on("element.changed",(function(t){var n=t.element;n&&n.id===e.elementId&&e.initFormOnChanged(n)}))},initFormOnChanged:function(e){var t,n=e;n||(n=null!==(t=window.bpmnInstances.elementRegistry.find((function(e){return"bpmn:Process"===e.type})))&&void 0!==t?t:window.bpmnInstances.elementRegistry.find((function(e){return"bpmn:Collaboration"===e.type}))),n&&(console.log("\n              ----------\n      select element changed:\n                id:  ".concat(n.id,"\n              type:  ").concat(n.businessObject.$type,"\n              ----------\n              ")),console.log("businessObject: ",n.businessObject),window.bpmnInstances.bpmnElement=n,this.bpmnElement=n,this.elementId=n.id,this.elementType=n.type.split(":")[1],this.elementBusinessObject=JSON.parse(JSON.stringify(n.businessObject)),this.conditionFormVisible=!("SequenceFlow"!==this.elementType||!n.source),this.formVisible="UserTask"===this.elementType||"StartEvent"===this.elementType)},beforeDestroy:function(){window.bpmnInstances=null},propertiesPanelHandel:function(){this.showProperties=!this.showProperties}}},ot=(n("e884"),Object(M.a)(at,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"process-panel__container",class:[e.showProperties?"show":"hide"],style:{width:this.width+"px"}},[n("div",{staticClass:"process-properties-bar",attrs:{title:e.showProperties?"收起":"展开"},on:{click:e.propertiesPanelHandel}},[n("div",{staticClass:"open-properties-handel"},[n("i",{class:[e.showProperties?"el-icon-caret-right":"el-icon-caret-left"]})])]),n("el-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-collapse-item",{attrs:{name:"base"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-info"}),e._v("常规")]),n("element-base-info",{attrs:{"business-object":e.elementBusinessObject,type:e.elementType}})],1),-1!==e.elementType.indexOf("Task")?n("el-collapse-item",{key:"task",attrs:{name:"task"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-s-claim"}),e._v("任务")]),n("element-task",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),-1!==e.elementType.indexOf("CallActivity")?n("el-collapse-item",{key:"task",attrs:{name:"task"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-s-claim"}),e._v("结构")]),n("element-structure",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),-1!==e.elementType.indexOf("Task")||-1!==e.elementType.indexOf("CallActivity")||-1!==e.elementType.indexOf("SubProcess")?n("el-collapse-item",{key:"multiInstance",attrs:{name:"multiInstance"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-s-help"}),e._v("多实例")]),n("element-multi-instance",{attrs:{"business-object":e.elementBusinessObject,type:e.elementType}})],1):e._e(),"UserTask"===e.elementType?n("el-collapse-item",{key:"taskListeners",attrs:{name:"taskListeners"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-message-solid"}),e._v("任务监听器")]),n("user-task-listeners",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),n("el-collapse-item",{key:"listeners",attrs:{name:"listeners"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-message-solid"}),e._v("执行监听器")]),n("element-listeners",{attrs:{id:e.elementId,type:e.elementType}})],1),e.formVisible?n("el-collapse-item",{key:"form",attrs:{name:"condition"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-s-order"}),e._v("表单")]),n("element-form",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),"Process"===e.elementType?n("el-collapse-item",{key:"message",attrs:{name:"condition"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-s-comment"}),e._v("消息与信号")]),n("signal-and-massage")],1):e._e(),e.conditionFormVisible?n("el-collapse-item",{key:"condition",attrs:{name:"condition"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-s-promotion"}),e._v("流转条件")]),n("flow-condition",{attrs:{"business-object":e.elementBusinessObject,type:e.elementType}})],1):e._e(),"Process"===e.elementType?n("el-collapse-item",{key:"extensions",attrs:{name:"extensions"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-circle-plus"}),e._v("扩展属性")]),n("element-properties",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),n("el-collapse-item",{key:"other",attrs:{name:"other"}},[n("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[n("i",{staticClass:"el-icon-s-promotion"}),e._v("描述信息")]),n("element-other-config",{attrs:{id:e.elementId}})],1)],1)],1)}),[],!1,null,"ee9f2790",null).exports);ot.install=function(e){e.component(ot.name,ot)};var lt=[B,te,ot],pt=function(e){lt.forEach((function(t){e.component(t.name,t)}))};"undefined"!=typeof window&&window.Vue&&pt(window.Vue);var mt=Object(u.a)({version:"0.0.1",install:pt},lt),ct=(n("d5a9"),n("f910"),n("2c13"),n("e7f6"),n("8c4f")),ut={"Exclusive Gateway":"排他网关","Parallel Gateway":"并行网关","Inclusive Gateway":"包容网关","Complex Gateway":"综合网关","Event based Gateway":"事件网关","Message Start Event":"消息启动事件","Timer Start Event":"定时启动事件","Conditional Start Event":"条件启动事件","Signal Start Event":"信号启动事件","Error Start Event":"错误启动事件","Escalation Start Event":"升级启动事件","Compensation Start Event":"补偿启动事件","Message Start Event (non-interrupting)":"消息启动事件 (非中断)","Timer Start Event (non-interrupting)":"定时启动事件 (非中断)","Conditional Start Event (non-interrupting)":"条件启动事件 (非中断)","Signal Start Event (non-interrupting)":"信号启动事件 (非中断)","Escalation Start Event (non-interrupting)":"升级启动事件 (非中断)"},dt=n("5e40");function bt(e,t,n,i,s,r){dt.a.call(this,e,t,n,i,s,r,2e3),this.handlers.label=function(){return null}}bt.prototype=dt.a.prototype;var ft={__init__:["customRenderer"],customRenderer:["type",bt]},ht=n("87f2"),gt=n("7a6b"),yt=n("dbc8"),vt=n("145d"),Et=n("cf0a"),xt=n("78f9");function St(e,t,n,i,s,r,a,o,l,p,m,c,u){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=s,this._elementFactory=r,this._connect=a,this._create=o,this._popupMenu=l,this._canvas=p,this._rules=m,this._translate=c,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context.shape;if(Object(xt.a)(e)&&i.isOpen(t)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}}))}function wt(e,t,n){var i=e.$instanceOf(t),s=!1,r=e.eventDefinitions||[];return Object(ht.forEach)(r,(function(e){e.$type===n&&(s=!0)})),i&&s}St.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","elementRegistry"],St.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,s=this._connect,r=this._create,a=this._popupMenu,o=this._canvas,l=this._rules,p=this._autoPlace,m=this._translate,c={};if("label"===e.type)return c;var u=e.businessObject;function d(e,t){s.start(e,t)}function b(e,t,n,s){function a(t,n){var a=i.createShape(Object(ht.assign)({type:e},s));r.start(t,a,{source:n})}return"string"!=typeof n&&(s=n,n=m("Append {type}",{type:e.replace(/^bpmn:/,"")})),{group:"model",className:t,title:n,action:{dragstart:a,click:p?function(t,n){var r=i.createShape(Object(ht.assign)({type:e},s));p.append(n,r)}:a}}}function f(e){return function(i,s){n.splitLane(s,e),t.open(s,!0)}}if(Object(vt.b)(u,["bpmn:Lane","bpmn:Participant"])&&Object(yt.b)(u)){var h=Object(Et.a)(e);Object(ht.assign)(c,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:m("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),h.length<2&&(e.height>=120&&Object(ht.assign)(c,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:m("Divide into two Lanes"),action:{click:f(2)}}}),e.height>=180&&Object(ht.assign)(c,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:m("Divide into three Lanes"),action:{click:f(3)}}})),Object(ht.assign)(c,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:m("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}Object(gt.b)(u,"bpmn:FlowNode")&&(Object(gt.b)(u,"bpmn:EventBasedGateway")?Object(ht.assign)(c,{"append.receive-task":b("bpmn:ReceiveTask","bpmn-icon-receive-task",m("Append ReceiveTask")),"append.message-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",m("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",m("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",m("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",m("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):wt(u,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?Object(ht.assign)(c,{"append.compensation-activity":b("bpmn:Task","bpmn-icon-task",m("Append compensation activity"),{isForCompensation:!0})}):Object(gt.b)(u,"bpmn:EndEvent")||u.isForCompensation||wt(u,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Object(yt.a)(u)||Object(ht.assign)(c,{"append.end-event":b("bpmn:EndEvent","bpmn-icon-end-event-none",m("Append EndEvent")),"append.gateway":b("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",m("Append Gateway")),"append.append-task":b("bpmn:UserTask","bpmn-icon-user-task",m("Append Task")),"append.intermediate-event":b("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",m("Append Intermediate/Boundary Event"))})),a.isEmpty(e,"bpmn-replace")||Object(ht.assign)(c,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:m("Change type"),action:{click:function(e,n){var i=Object(ht.assign)(function(e){var n=o.getContainer(),i=t.getPad(e).html,s=n.getBoundingClientRect(),r=i.getBoundingClientRect(),a=r.top-s.top;return{x:r.left-s.left,y:a+r.height+5}}(n),{cursor:{x:e.x,y:e.y}});a.open(n,"bpmn-replace",i)}}}}),Object(vt.b)(u,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(ht.assign)(c,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:m("Connect using "+(u.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:d,dragstart:d}}}),Object(vt.b)(u,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(ht.assign)(c,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:m("Connect using DataInputAssociation"),action:{click:d,dragstart:d}}}),Object(gt.b)(u,"bpmn:Group")&&Object(ht.assign)(c,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var g=l.allowed("elements.delete",{elements:[e]});return Object(ht.isArray)(g)&&(g=g[0]===e),g&&Object(ht.assign)(c,{delete:{group:"edit",className:"bpmn-icon-trash",title:m("Remove"),action:{click:function(){n.removeElements([e])}}}}),c};var Tt={__init__:["contextPadProvider"],contextPadProvider:["type",St]},kt=n("4bee"),Ft=n("35be"),At=n("194a"),Ct=n("61f7"),It=n("c4ba"),Dt=n("665f"),Lt=n("b71e");function Ot(e,t,n,i,s,r,a,o){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=s,this._handTool=r,this._globalConnect=a,this._translate=o,e.registerProvider(this)}Ot.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],Ot.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,s=this._lassoTool,r=this._handTool,a=this._globalConnect,o=this._translate;function l(e,i,s,r,a){function l(i){var s=n.createShape(Object(ht.assign)({type:e},a));a&&(s.businessObject.di.isExpanded=a.isExpanded),t.start(i,s)}var p=e.replace(/^bpmn:/,"");return{group:i,className:s,title:r||o("Create {type}",{type:p}),action:{dragstart:l,click:l}}}function p(e,i){var s=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:i});if(i){var r=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:s});t.start(e,[s,r],{hints:{autoSelect:[r]}})}else n.createShape({type:"bpmn:StartEvent",x:-1,y:0,parent:s}),t.start(e,[s])}function m(e){p(e,!0)}function c(e){t.start(e,n.createParticipantShape())}return Object(ht.assign)(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:o("Activate the hand tool"),action:{click:function(e){r.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:o("Activate the lasso tool"),action:{click:function(e){s.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:o("Activate the create/remove space tool"),action:{click:function(e){i.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:o("Activate the global connect tool"),action:{click:function(e){a.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",o("Create StartEvent")),"create.user-task":l("bpmn:UserTask","event","bpmn-icon-user-task",o("Create User Task")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","event","bpmn-icon-gateway-none",o("Create Gateway")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",o("Create EndEvent")),"create.call-activity":l("bpmn:CallActivity","schema","bpmn-icon-call-activity","创建调用活动"),"create.subprocess-expanded":{group:"schema",className:"bpmn-icon-subprocess-expanded",title:o("Create expanded SubProcess"),action:{dragstart:m,click:m}},"create.participant-expanded":{group:"schema",className:"bpmn-icon-participant",title:o("Create Pool/Participant"),action:{dragstart:c,click:c}}}),e};var _t={__depends__:[kt.a,Ft.a,At.a,Ct.a,It.a,Dt.a,Lt.a],__init__:["paletteProvider"],paletteProvider:["type",Ot]},Mt={name:"App",components:{},data:function(){return{showDesigner:!1,xmlString:"",modeler:null,reloadIndex:0,controlDrawerVisible:!1,translationsSelf:ut,controlForm:{processId:"",processName:"",simulation:!0,labelEditing:!1,labelVisible:!1,prefix:"flowable",headerButtonSize:"mini",additionalModel:[Tt,_t]},addis:{}}},created:function(){},mounted:function(){var e=this,t=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),n=this.$route.query.modelId;this.$nextTick((function(){e.$axios({method:"GET",url:"/flow/flowable/bpmn/getBpmnByModelId/"+n}).then((function(n){var i=n.data;e.controlForm.processId=i.modelKey,e.controlForm.processName=i.modelName,n.data.modelXml&&(e.xmlString=i.modelXml,e.showDesigner=!0),t.close()})).catch((function(){e.$message.error("加载失败！"),t.close()}))}))},methods:{initModeler:function(e){var t=this;setTimeout((function(){t.modeler=e,t.$refs.processDesigner.processReZoom()}),10)},reloadProcessDesigner:function(){for(var e in this.controlForm.additionalModel=[],this.addis)this.addis[e]&&this.controlForm.additionalModel.push(this.addis[e]);this.reloadIndex+=1,this.modeler=null},changeLabelEditingStatus:function(e){this.addis.labelEditing=!!e&&{labelEditingProvider:["value",""]},this.reloadProcessDesigner()},changeLabelVisibleStatus:function(e){this.addis.customRenderer=!!e&&ft,this.reloadProcessDesigner()},elementClick:function(e){this.element=e}}},Pt=(n("ff67"),Object(M.a)(Mt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"designer-main"},[e.showDesigner?n("my-process-designer",e._b({key:"designer-"+e.reloadIndex,ref:"processDesigner",attrs:{keyboard:""},on:{"element-click":e.elementClick,"init-finished":e.initModeler},model:{value:e.xmlString,callback:function(t){e.xmlString=t},expression:"xmlString"}},"my-process-designer",e.controlForm,!1)):e._e(),e.showDesigner?n("my-properties-panel",{key:"penal-"+e.reloadIndex,staticClass:"process-panel",attrs:{"bpmn-modeler":e.modeler,prefix:e.controlForm.prefix}}):e._e(),e._e(),n("el-drawer",{attrs:{visible:e.controlDrawerVisible,size:"400px",title:"偏好设置","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.controlDrawerVisible=t}}},[n("el-form",{staticClass:"control-form",attrs:{model:e.controlForm,size:"small","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"流程ID"}},[n("el-input",{on:{change:e.reloadProcessDesigner},model:{value:e.controlForm.processId,callback:function(t){e.$set(e.controlForm,"processId",t)},expression:"controlForm.processId"}})],1),n("el-form-item",{attrs:{label:"流程名称"}},[n("el-input",{on:{change:e.reloadProcessDesigner},model:{value:e.controlForm.processName,callback:function(t){e.$set(e.controlForm,"processName",t)},expression:"controlForm.processName"}})],1),n("el-form-item",{attrs:{label:"流转模拟"}},[n("el-switch",{attrs:{"inactive-text":"停用","active-text":"启用"},on:{change:e.reloadProcessDesigner},model:{value:e.controlForm.simulation,callback:function(t){e.$set(e.controlForm,"simulation",t)},expression:"controlForm.simulation"}})],1),n("el-form-item",{attrs:{label:"禁用双击"}},[n("el-switch",{attrs:{"inactive-text":"停用","active-text":"启用"},on:{change:e.changeLabelEditingStatus},model:{value:e.controlForm.labelEditing,callback:function(t){e.$set(e.controlForm,"labelEditing",t)},expression:"controlForm.labelEditing"}})],1),n("el-form-item",{attrs:{label:"隐藏label"}},[n("el-switch",{attrs:{"inactive-text":"停用","active-text":"启用"},on:{change:e.changeLabelVisibleStatus},model:{value:e.controlForm.labelVisible,callback:function(t){e.$set(e.controlForm,"labelVisible",t)},expression:"controlForm.labelVisible"}})],1),n("el-form-item",{attrs:{label:"流程引擎"}},[n("el-radio-group",{on:{change:e.reloadProcessDesigner},model:{value:e.controlForm.prefix,callback:function(t){e.$set(e.controlForm,"prefix",t)},expression:"controlForm.prefix"}},[n("el-radio",{attrs:{label:"camunda"}},[e._v("camunda")]),n("el-radio",{attrs:{label:"flowable"}},[e._v("flowable")]),n("el-radio",{attrs:{label:"activiti"}},[e._v("activiti")])],1)],1),n("el-form-item",{attrs:{label:"工具栏"}},[n("el-radio-group",{model:{value:e.controlForm.headerButtonSize,callback:function(t){e.$set(e.controlForm,"headerButtonSize",t)},expression:"controlForm.headerButtonSize"}},[n("el-radio",{attrs:{label:"mini"}},[e._v("mini")]),n("el-radio",{attrs:{label:"small"}},[e._v("small")]),n("el-radio",{attrs:{label:"medium"}},[e._v("medium")])],1)],1)],1),n("br")],1)],1)}),[],!1,null,null,null).exports);function Bt(e,t,n,i,s,r,a,o,l,p,m,c,u){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=s,this._elementFactory=r,this._connect=a,this._create=o,this._popupMenu=l,this._canvas=p,this._rules=m,this._translate=c,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context.shape;if(Object(xt.a)(e)&&i.isOpen(t)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}}))}function $t(e,t,n){var i=e.$instanceOf(t),s=!1,r=e.eventDefinitions||[];return Object(ht.forEach)(r,(function(e){e.$type===n&&(s=!0)})),i&&s}Bt.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","elementRegistry"],Bt.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,s=this._connect,r=this._create,a=this._popupMenu,o=this._canvas,l=this._rules,p=this._autoPlace,m=this._translate,c={};if("label"===e.type)return c;var u=e.businessObject;function d(e,t){s.start(e,t)}function b(e,t,n,s){function a(t,n){var a=i.createShape(Object(ht.assign)({type:e},s));r.start(t,a,{source:n})}return"string"!=typeof n&&(s=n,n=m("Append {type}",{type:e.replace(/^bpmn:/,"")})),{group:"model",className:t,title:n,action:{dragstart:a,click:p?function(t,n){var r=i.createShape(Object(ht.assign)({type:e},s));p.append(n,r)}:a}}}function f(e){return function(i,s){n.splitLane(s,e),t.open(s,!0)}}if(Object(vt.b)(u,["bpmn:Lane","bpmn:Participant"])&&Object(yt.b)(u)){var h=Object(Et.a)(e);Object(ht.assign)(c,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:m("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),h.length<2&&(e.height>=120&&Object(ht.assign)(c,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:m("Divide into two Lanes"),action:{click:f(2)}}}),e.height>=180&&Object(ht.assign)(c,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:m("Divide into three Lanes"),action:{click:f(3)}}})),Object(ht.assign)(c,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:m("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}Object(gt.b)(u,"bpmn:FlowNode")&&(Object(gt.b)(u,"bpmn:EventBasedGateway")?Object(ht.assign)(c,{"append.receive-task":b("bpmn:ReceiveTask","bpmn-icon-receive-task",m("Append ReceiveTask")),"append.message-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",m("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",m("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",m("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",m("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):$t(u,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?Object(ht.assign)(c,{"append.compensation-activity":b("bpmn:Task","bpmn-icon-task",m("Append compensation activity"),{isForCompensation:!0})}):Object(gt.b)(u,"bpmn:EndEvent")||u.isForCompensation||$t(u,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Object(yt.a)(u)||Object(ht.assign)(c,{"append.end-event":b("bpmn:EndEvent","bpmn-icon-end-event-none",m("Append EndEvent")),"append.gateway":b("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",m("Append Gateway")),"append.append-task":b("bpmn:UserTask","bpmn-icon-user-task",m("Append Task")),"append.intermediate-event":b("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",m("Append Intermediate/Boundary Event"))})),a.isEmpty(e,"bpmn-replace")||Object(ht.assign)(c,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:m("Change type"),action:{click:function(e,n){var i=Object(ht.assign)(function(e){var n=o.getContainer(),i=t.getPad(e).html,s=n.getBoundingClientRect(),r=i.getBoundingClientRect(),a=r.top-s.top;return{x:r.left-s.left,y:a+r.height+5}}(n),{cursor:{x:e.x,y:e.y}});a.open(n,"bpmn-replace",i)}}}}),Object(vt.b)(u,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(ht.assign)(c,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:m("Connect using "+(u.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:d,dragstart:d}}}),Object(vt.b)(u,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(ht.assign)(c,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:m("Connect using DataInputAssociation"),action:{click:d,dragstart:d}}}),Object(gt.b)(u,"bpmn:Group")&&Object(ht.assign)(c,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var g=l.allowed("elements.delete",{elements:[e]});return Object(ht.isArray)(g)&&(g=g[0]===e),g&&Object(ht.assign)(c,{delete:{group:"edit",className:"bpmn-icon-trash",title:m("Remove"),action:{click:function(){n.removeElements([e])}}}}),c};var Vt={__init__:["contextPadProvider"],contextPadProvider:["type",Bt]};function jt(e,t){}jt.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],jt.prototype.getPaletteEntries=function(){return null};var Rt={__init__:["paletteProvider"],paletteProvider:["type",jt]},Nt={name:"BpmnPreview",components:{},data:function(){return{showDesigner:!1,xmlString:"",procInstId:"",highLightedFlows:[],activeActivityIds:[],modeler:null,reloadIndex:0,controlDrawerVisible:!1,translationsSelf:ut,controlForm:{processId:"",processName:"",simulation:!0,labelEditing:!1,labelVisible:!1,prefix:"flowable",headerButtonSize:"mini",additionalModel:[Vt,Rt]},addis:{}}},created:function(){},mounted:function(){var e=this,t=this.$loading({lock:!0,text:"正在加载...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),n=this.$route.query,i=n.modelKey,s=n.procInstId;this.procInstId=s;var r=s?"/flow/flowable/bpmn/getHighLightedNodeVoByProcessInstanceId/"+s:"/flow/flowable/bpmn/getBpmnByModelKey/"+i;this.$nextTick((function(){e.$axios({method:"GET",url:r}).then((function(n){var i=n.data;n.data.modelXml&&(e.xmlString=i.modelXml,e.highLightedFlows=i.highLightedFlows||[],e.activeActivityIds=i.activeActivityIds||["Activity_0xahc1e"],e.showDesigner=!0),t.close()})).catch((function(){e.$message.error("加载失败！"),t.close()}))}))},methods:{initModeler:function(e){var t=this;setTimeout((function(){t.modeler=e,t.$refs.processDesigner.processReZoom()}),10)},reloadProcessDesigner:function(){for(var e in this.controlForm.additionalModel=[],this.addis)this.addis[e]&&this.controlForm.additionalModel.push(this.addis[e]);this.reloadIndex+=1,this.modeler=null},changeLabelEditingStatus:function(e){this.addis.labelEditing=!!e&&{labelEditingProvider:["value",""]},this.reloadProcessDesigner()},changeLabelVisibleStatus:function(e){this.addis.customRenderer=!!e&&ft,this.reloadProcessDesigner()},elementClick:function(e){this.element=e}}},zt=(n("f3d2"),Object(M.a)(Nt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.showDesigner?n("process-preview",e._b({key:"designer-"+e.reloadIndex,ref:"processDesigner",attrs:{"proc-inst-id":e.procInstId,highLightedFlows:e.highLightedFlows,activeActivityIds:e.activeActivityIds,keyboard:""},on:{"element-click":e.elementClick,"init-finished":e.initModeler},model:{value:e.xmlString,callback:function(t){e.xmlString=t},expression:"xmlString"}},"process-preview",e.controlForm,!1)):e._e()],1)}),[],!1,null,null,null).exports);s.a.use(ct.a);var Ut=new ct.a({mode:"hash",base:"/flow-bpmn/",routes:[{path:"/bpmn/designer",name:"bpmnDesigner",component:Pt},{path:"/bpmn/preview",name:"bpmnPreview",component:zt}]});s.a.prototype.$axios=l,s.a.use(m.a),s.a.use(c.vuePlugin),s.a.use(mt),new s.a({render:function(e){return e(r.default)},router:Ut}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5e33":function(e,t,n){"use strict";n("c504")},"5f72":function(e,t){e.exports=ELEMENT},"61b4":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},s=[]},6584:function(e){e.exports=JSON.parse('{"name":"Activiti","uri":"http://activiti.org/bpmn","prefix":"activiti","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","activiti:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"activiti:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true},{"name":"executionListener","isAbstract":true,"type":"Expression"}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"multiinstance_type","superClass":["Element"]},{"name":"multiinstance_condition","superClass":["Element"]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"},{"name":"multiinstance_condition","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["activiti:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","activiti:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","activiti:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["activiti:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]}],"emumerations":[]}')},"6c26":function(e,t,n){},"6d17":function(e,t,n){},"6fd2":function(e,t,n){},"70b8":function(e,t,n){"use strict";n("4e7b")},7761:function(e,t,n){"use strict";n("818f")},"78e6":function(e){e.exports=JSON.parse('{"name":"Flowable","uri":"http://flowable.org/bpmn","prefix":"flowable","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","flowable:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"flowable:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"xcField","isAbstract":true,"properties":[{"name":"xcString","isMany":true,"type":"Element"},{"name":"name","isAttr":true,"type":"String"}]},{"name":"xcString","isAbstract":true,"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"xcformKey","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"assigneeType","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"},{"name":"inheritVariables","isAttr":true,"type":"Boolean"},{"name":"processInstanceName","isAttr":true,"type":"String"},{"name":"calledElementType","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["flowable:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","flowable:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","flowable:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike","flowable:ExecutionListener","flowable:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["flowable:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["flowable:UserTask","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"AssigneeType","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IdmCandidateUsers","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IdmCandidateGroups","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IdmAssignee","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"NodeType","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"IsEditdata","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"initiator-can-complete","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:UserTask","flowable:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ModelBpmnExtension","superClass":["Element"],"meta":{"allowedIn":["bpmn:CallActivity"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]},{"name":"SkipExpression","isAbstract":true,"extends":["bpmn:SequenceFlow","bpmn:UserTask"],"properties":[{"name":"skipExpression","prefix":"","isAttr":true,"type":"String"}]}],"emumerations":[]}')},"818f":function(e,t,n){},"82c3":function(e){e.exports=JSON.parse('{"name":"Camunda","uri":"http://camunda.org/schema/1.0/bpmn","prefix":"camunda","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","camunda:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"camunda:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"},{"name":"modelerTemplateVersion","isAttr":true,"type":"Integer"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["camunda:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","camunda:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","camunda:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["camunda:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true},{"name":"id","type":"String","isAttr":true},{"name":"eventDefinitions","type":"bpmn:TimerEventDefinition","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvents","isAttr":true,"type":"String"}]}],"emumerations":[]}')},"8bbf":function(e,t){e.exports=Vue},"8ff4":function(e){e.exports=JSON.parse('{"name":"Camunda","uri":"http://camunda.org/schema/1.0/bpmn","prefix":"camunda","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","camunda:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"camunda:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"},{"name":"modelerTemplateVersion","isAttr":true,"type":"Integer"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["camunda:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","camunda:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","camunda:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["camunda:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true},{"name":"id","type":"String","isAttr":true},{"name":"eventDefinitions","type":"bpmn:TimerEventDefinition","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvents","isAttr":true,"type":"String"}]}],"emumerations":[]}')},"90bb":function(e,t,n){},9355:function(e,t,n){"use strict";n("3150")},"94c0":function(e,t,n){"use strict";e.exports={__init__:["camundaModdleExtension"],camundaModdleExtension:["type",n("215a")]}},"9a1a":function(e,t,n){"use strict";n("45fc"),n("b0c0"),n("ac1f"),n("5319");var i=n("87f2").some,s={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function r(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}function a(e,t){return(n=e)&&n.length&&i(e,(function(e){return r(e,t)}));var n}function o(e,t,n){var a=t.name,o=s[a.replace(/flowable:/,"")];return a===e&&function(e,t){return i(t,(function(t){return r(e,t)}))}(n,o)}function l(e){e.on("property.clone",(function(e){var t=e.newElement,n=e.propertyDescriptor;this.canCloneProperty(t,n)}),this)}l.$inject=["eventBus"],l.prototype.canCloneProperty=function(e,t){return o("flowable:FailedJobRetryTimeCycle",t,e)?a(e.eventDefinitions,"bpmn:TimerEventDefinition")||a(e.eventDefinitions,"bpmn:SignalEventDefinition")||r(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):o("flowable:Connector",t,e)||o("flowable:Field",t,e)?a(e.eventDefinitions,"bpmn:MessageEventDefinition"):void 0},e.exports=l},"9c0c":function(e,t,n){},"9f60":function(e,t,n){"use strict";n("f4aa")},a1bf:function(e,t,n){"use strict";n("b5e5")},a2e5:function(e,t,n){},a4ad:function(e,t,n){"use strict";n("3c78")},a674:function(e,t,n){e.exports={__init__:["FlowableModdleExtension"],FlowableModdleExtension:["type",n("9a1a")]}},a7c6:function(e,t,n){"use strict";n("a2e5")},a81a:function(e,t,n){"use strict";n("4030")},a944:function(e,t,n){"use strict";n("c975"),n("45fc");var i=n("87f2").isFunction,s=n("87f2").isObject,r=n("87f2").some;function a(e){var t=this;e.on("moddleCopy.canCopyProperty",(function(e){var n=e.property,i=e.parent;return t.canCopyProperty(n,i)}))}function o(e,t){return e&&i(e.$instanceOf)&&e.$instanceOf(t)}function l(e,t){return r(t,(function(t){return o(e,t)}))}function p(e,t){return t?o(e,t)?e:e.$parent?p(e.$parent,t):void 0:e.$parent}a.$inject=["eventBus"],a.prototype.canCopyProperty=function(e,t){return!(s(e)&&!function(e,t){var n=e.$type&&e.$model.getTypeDescriptor(e.$type),i=n&&n.meta&&n.meta.allowedIn;return!(i&&!function(e){return-1!==e.indexOf("*")}(i))||r(i,(function(e){return p(t,e)}))}(e,t))&&!(o(e,"camunda:InputOutput")&&!this.canHostInputOutput(t))&&!(l(e,["camunda:Connector","camunda:Field"])&&!this.canHostConnector(t))&&!(o(e,"camunda:In")&&!this.canHostIn(t))&&void 0},a.prototype.canHostInputOutput=function(e){if(p(e,"camunda:Connector"))return!0;var t=p(e,"bpmn:FlowNode");return!!t&&!l(t,["bpmn:StartEvent","bpmn:Gateway","bpmn:BoundaryEvent"])&&(!o(t,"bpmn:SubProcess")||!t.get("triggeredByEvent"))},a.prototype.canHostConnector=function(e){return!o(p(e,"camunda:ServiceTaskLike"),"bpmn:MessageEventDefinition")||p(e,"bpmn:IntermediateThrowEvent")||p(e,"bpmn:EndEvent")},a.prototype.canHostIn=function(e){return!!p(e,"bpmn:CallActivity")||!p(e,"bpmn:SignalEventDefinition")||p(e,"bpmn:IntermediateThrowEvent")||p(e,"bpmn:EndEvent")},e.exports=a},b5e5:function(e,t,n){},bf8f:function(e){e.exports=JSON.parse('{"name":"Activiti","uri":"http://activiti.org/bpmn","prefix":"activiti","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","activiti:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"activiti:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true},{"name":"executionListener","isAbstract":true,"type":"Expression"}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"multiinstance_type","superClass":["Element"]},{"name":"multiinstance_condition","superClass":["Element"]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"},{"name":"multiinstance_condition","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["activiti:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","activiti:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","activiti:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["activiti:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]}],"emumerations":[]}')},c00f:function(e,t,n){},c1b8:function(e,t,n){},c20b:function(e,t,n){},c263:function(e,t,n){"use strict";e.exports={__init__:["camundaModdleExtension"],camundaModdleExtension:["type",n("a944")]}},c504:function(e,t,n){},c60e:function(e,t,n){},d5a9:function(e,t,n){},dc9d:function(e,t,n){"use strict";n("c1b8")},e137:function(e,t,n){"use strict";n("45fc"),n("b0c0"),n("ac1f"),n("5319");var i=n("87f2").some,s={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function r(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}function a(e,t){return(n=e)&&n.length&&i(e,(function(e){return r(e,t)}));var n}function o(e,t,n){var a=t.name,o=s[a.replace(/activiti:/,"")];return a===e&&function(e,t){return i(t,(function(t){return r(e,t)}))}(n,o)}function l(e){e.on("property.clone",(function(e){var t=e.newElement,n=e.propertyDescriptor;this.canCloneProperty(t,n)}),this)}l.$inject=["eventBus"],l.prototype.canCloneProperty=function(e,t){return o("activiti:FailedJobRetryTimeCycle",t,e)?a(e.eventDefinitions,"bpmn:TimerEventDefinition")||a(e.eventDefinitions,"bpmn:SignalEventDefinition")||r(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):o("activiti:Connector",t,e)||o("activiti:Field",t,e)?a(e.eventDefinitions,"bpmn:MessageEventDefinition"):void 0},e.exports=l},e15b:function(e,t,n){e.exports={__init__:["ActivitiModdleExtension"],ActivitiModdleExtension:["type",n("09c5")]}},e884:function(e,t,n){"use strict";n("6d17")},f18e:function(e,t,n){"use strict";n("6fd2")},f3d2:function(e,t,n){"use strict";n("90bb")},f4aa:function(e,t,n){},fe7c:function(e,t,n){},ff67:function(e,t,n){"use strict";n("c00f")}});